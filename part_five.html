<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=0.8"><title>V&nbsp;Generative Recursion</title><link rel="stylesheet" type="text/css" href="part_five_files/scribble.css" title="default"><link rel="stylesheet" type="text/css" href="part_five_files/shared.css" title="default"><link rel="stylesheet" type="text/css" href="part_five_files/racket.css" title="default"><link rel="stylesheet" type="text/css" href="part_five_files/figure.css" title="default"><link rel="stylesheet" type="text/css" href="part_five_files/manual-style.css" title="default"><link rel="stylesheet" type="text/css" href="part_five_files/manual-racket.css" title="default"><script type="text/javascript" src="part_five_files/scribble-common.js"></script><script type="text/javascript" src="part_five_files/figure.js"></script><script type="text/javascript" src="part_five_files/manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick='TocviewToggle(this,"tocview_0");'>▼</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">How to Design Programs, Second Edition</a></td></tr></tbody></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tbody><tr><td align="right"></td><td><a href="part_preface.html" class="tocviewlink" data-pltdoc="x">Preface</a></td></tr><tr><td align="right"></td><td><a href="part_prologue.html" class="tocviewlink" data-pltdoc="x">Prologue:<span class="mywbr"> &nbsp;</span> How to Program</a></td></tr><tr><td align="right">I&nbsp;</td><td><a href="part_one.html" class="tocviewlink" data-pltdoc="x">Fixed Size Data</a></td></tr><tr><td align="right"></td><td><a href="i1-2.html" class="tocviewlink" data-pltdoc="x">Intermezzo 1: Beginning Student Language</a></td></tr><tr><td align="right">II&nbsp;</td><td><a href="part_two.html" class="tocviewlink" data-pltdoc="x">Arbitrarily Large Data</a></td></tr><tr><td align="right"></td><td><a href="i2-3.html" class="tocviewlink" data-pltdoc="x">Intermezzo 2: Quote, Unquote</a></td></tr><tr><td align="right">III&nbsp;</td><td><a href="part_three.html" class="tocviewlink" data-pltdoc="x">Abstraction</a></td></tr><tr><td align="right"></td><td><a href="i3-4.html" class="tocviewlink" data-pltdoc="x">Intermezzo 3: Scope and Abstraction</a></td></tr><tr><td align="right">IV&nbsp;</td><td><a href="part_four.html" class="tocviewlink" data-pltdoc="x">Intertwined Data</a></td></tr><tr><td align="right"></td><td><a href="i4-5.html" class="tocviewlink" data-pltdoc="x">Intermezzo 4: The Nature of Numbers</a></td></tr><tr><td align="right">V&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Generative Recursion</a></td></tr><tr><td align="right"></td><td><a href="i5-6.html" class="tocviewlink" data-pltdoc="x">Intermezzo 5: The Cost of Computation</a></td></tr><tr><td align="right">VI&nbsp;</td><td><a href="part_six.html" class="tocviewlink" data-pltdoc="x">Accumulators</a></td></tr><tr><td align="right"></td><td><a href="part_epilogue.html" class="tocviewlink" data-pltdoc="x">Epilogue:<span class="mywbr"> &nbsp;</span> Moving On</a></td></tr></tbody></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick='TocviewToggle(this,"tocview_1");'>►</a></td><td>V&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Generative Recursion</a></td></tr></tbody></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tbody><tr><td align="right">25&nbsp;</td><td><a href="#%28part._ch~3astrange-recursions%29" class="tocviewlink" data-pltdoc="x">Non standard Recursion</a></td></tr><tr><td align="right">26&nbsp;</td><td><a href="#%28part._ch~3adesign-algo%29" class="tocviewlink" data-pltdoc="x">Designing Algorithms</a></td></tr><tr><td align="right">27&nbsp;</td><td><a href="#%28part._ch~3agen-rec-samples%29" class="tocviewlink" data-pltdoc="x">Variations on the Theme</a></td></tr><tr><td align="right">28&nbsp;</td><td><a href="#%28part._ch~3agen-rec-math%29" class="tocviewlink" data-pltdoc="x">Mathematical Examples</a></td></tr><tr><td align="right">29&nbsp;</td><td><a href="#%28part._ch~3abacktrack%29" class="tocviewlink" data-pltdoc="x">Algorithms that Backtrack</a></td></tr><tr><td align="right">30&nbsp;</td><td><a href="#%28part._ch~3asummary5%29" class="tocviewlink" data-pltdoc="x">Summary</a></td></tr></tbody></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.0.0.10</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="i4-5.html" title="backward to &quot;Intermezzo 4: The Nature of Numbers&quot;" data-pltdoc="x">← prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;How to Design Programs, Second Edition&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="i5-6.html" title="forward to &quot;Intermezzo 5: The Cost of Computation&quot;" data-pltdoc="x">next →</a></span>&nbsp;</div><h3>V<tt>&nbsp;</tt><a name="(part._part~3afive)"></a>Генеративная(Порождающая) рекурсия</h3><table cellspacing="0" cellpadding="0"><tbody><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._ch~3astrange-recursions%29" class="toclink" data-pltdoc="x">25<span class="hspace">&nbsp;</span>Нестандартная рекурсия</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sec~3abundle%29" class="toclink" data-pltdoc="x">25.1<span class="hspace">&nbsp;</span>Рекурсия без структуры</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sec~3aquick-sort%29" class="toclink" data-pltdoc="x">25.2<span class="hspace">&nbsp;</span>Рекурсия, игнорирующая структуру</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._ch~3adesign-algo%29" class="toclink" data-pltdoc="x">26<span class="hspace">&nbsp;</span>Разработка алгоритмов</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Adapting_the_.Design_.Recipe%29" class="toclink" data-pltdoc="x">26.1<span class="hspace">&nbsp;</span>Адаптация рецепта разработки</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Termination%29" class="toclink" data-pltdoc="x">26.2<span class="hspace">&nbsp;</span>Прекращение</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sec~3astruct-gen-rec%29" class="toclink" data-pltdoc="x">26.3<span class="hspace">&nbsp;</span>Структурная рекурсия по сравнению с генеративной рекурсией</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sec~3achoice%29" class="toclink" data-pltdoc="x">26.4<span class="hspace">&nbsp;</span>Делаем выбор</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._ch~3agen-rec-samples%29" class="toclink" data-pltdoc="x">27<span class="hspace">&nbsp;</span>вариации на тему</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sec~3afractal%29" class="toclink" data-pltdoc="x">27.1<span class="hspace">&nbsp;</span>Фракталы, первый вкус</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sec~3abinary-search%29" class="toclink" data-pltdoc="x">27.2<span class="hspace">&nbsp;</span>Двоичный поиск</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sec~3afiles-lines%29" class="toclink" data-pltdoc="x">27.3<span class="hspace">&nbsp;</span>Взгляд на парсинг</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._ch~3agen-rec-math%29" class="toclink" data-pltdoc="x">28<span class="hspace">&nbsp;</span>математические примеры
</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sec~3anewton%29" class="toclink" data-pltdoc="x">28.1<span class="hspace">&nbsp;</span>Метод Ньютона</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sec~3aintegrate%29" class="toclink" data-pltdoc="x">28.2<span class="hspace">&nbsp;</span>Числовая интеграция</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sec~3aproj-gauss%29" class="toclink" data-pltdoc="x">28.3<span class="hspace">&nbsp;</span>Проект: Исключение Гаусса</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._ch~3abacktrack%29" class="toclink" data-pltdoc="x">29<span class="hspace">&nbsp;</span>алгоритмы с возвратом</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._fsm._sec~3atraverse-graph1%29" class="toclink" data-pltdoc="x">29.1<span class="hspace">&nbsp;</span>Перемещение по графам</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._sec~3aproj-backtrack%29" class="toclink" data-pltdoc="x">29.2<span class="hspace">&nbsp;</span>Проект: возврат(Backtracking)</a></p>

</td></tr><tr><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._ch~3asummary5%29" class="toclink" data-pltdoc="x">30<span class="hspace">&nbsp;</span>Резюме</a></p>

</td></tr></tbody></table>

<p>Если вы следуете <a name="(idx._(gentag._590))"></a>рецепту проектирования 
из первых четырех частей, вы либо превращаете знания предметной области в код, 
либо используете структурные определения данных для организации своего кода.
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Некоторые функции просто составляют такие функции; мы объединяем их в 
«структурную» группу.</span></span></span>
 Последние функции обычно разбивают свои аргументы на их непосредственные 
структурные компоненты, а затем обрабатывают эти компоненты. Если один из этих 
непосредственных компонентов принадлежит к тому же классу данных, что и входные, 
функция структурно рекурсивна. Хотя структурно разработанные функции составляют 
подавляющее большинство кода в мире, некоторые проблемы невозможно решить с 
помощью структурного подхода к проектированию. </p>

<p>Для решения таких сложных проблем программисты используют генеративную рекурсию, 
форму рекурсии, которая строго более эффективна, чем структурная рекурсия. 
Изучение генеративной рекурсии старо как математика, и её часто называют 
изучением алгоритмов. Входные данные алгоритма представляют проблему. Алгоритм 
имеет тенденцию преобразовывать проблему в набор из нескольких проблем, решать 
их и объединять их решения в одно общее решение. Часто некоторые из этих вновь 
<span style="font-weight: bold">сгенерированных</span> проблем являются проблемами 
того же типа, что и данная, и в 
этом случае алгоритм может быть повторно использован для их решения. В этих 
случаях алгоритм является рекурсивным, но его рекурсия использует вновь 
сгенерированные данные, а не непосредственные части входных данных. </p>

<p>Из самого описания генеративной рекурсии вы можете сказать, что проектирование 
генеративной рекурсивной функции - это скорее специальная деятельность, чем 
проектирование структурно рекурсивной функции. Тем не менее, многие элементы 
<a name="(idx._(gentag._592))"></a>общего рецепта проектирования применимы и к 
разработке алгоритмов, и в этой части книги показано, как и насколько помогает 
этот рецепт. Ключом к разработке алгоритмов является этап «генерации», который 
часто означает разделение проблемы. А чтобы найти новый способ разделения проблемы, 
требуется понимание.
<span class="refelem"><span class="refcolumn"><span class="refcontent">
По-гречески это «эврика!»</span></span></span>
 Иногда требуется очень мало понимания. Например, может потребоваться немного 
здравого смысла разбиения последовательностей букв. В других случаях он может 
полагаться на глубокие математические теоремы о числах. На практике программисты 
сами разрабатывают простые алгоритмы и полагаются на специалистов в предметной области 
для своих сложных собратьев. В любом случае, программисты должны досконально понимать 
лежащие в основе идеи, чтобы они могли кодировать алгоритмы и обеспечивать взаимодействие
программы с будущими читателями. Лучший способ познакомиться с этой идеей - изучить 
широкий спектр примеров и развить понимание видов генеративных рекурсий, которые могут
проявляться в реальном мире. </p>

<h3>25<tt>&nbsp;</tt><a name="(part._ch~3astrange-recursions)"></a>Нестандартная рекурсия</h3>

<p>На данном этапе вы разработали множество функций, использующих структурную рекурсию. 
Когда вы разрабатываете функцию, вы знаете, что вам нужно смотреть на определение данных 
для ее основного ввода. Если этот ввод описывается определением данных, ссылающихся на 
себя, вы получаете функцию, которая ссылается на себя в основном там, где определение 
данных ссылается на себя.</p>

<p>В этой главе представлены две программы-примера, которые по-разному 
используют рекурсию. Они иллюстрируют проблемы, требующие некоторой «эврики», 
от очевидных идей до сложных представлений. </p>

<h4>25.1<tt>&nbsp;</tt><a name="(part._sec~3abundle)"></a>Рекурсия без структуры</h4>

<p>Представьте, что вы присоединились к команде DrRacket. Команда работает над 
сервисом обмена для поддержки совместной работы программистов. В частности, 
следующая версия DrRacket позволит программистам ISL совместно использовать 
содержимое области определений DrRacket на нескольких компьютерах. Каждый раз, 
когда один из программистов изменяет буфер, обновленный DrRacket передает 
содержимое области определений экземплярам DrRacket, которые участвуют в 
сеансе совместного использования. </p>

<blockquote>

<p><span style="font-weight: bold">Пример Задачи</span> Ваша задача - разработать  функцию
<span class="RktSym">bundle</span>, которая подготавливает содержимое области определений 
для широковещательной трансляции(broadcasting). DrRacket передает контент в виде списка 
<a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a>. Задача функции состоит в том, чтобы объединить блоки
отдельных “letters”(букв) в блоки(chunks) и, таким образом, создать список строк, называемых
блоками(<span style="font-weight: bold">chunks</span>), заданной длины, называемой размером блока.
(<span style="font-weight: bold">chunk size</span>).</p>

</blockquote>

<p></p>

<div class="SIntrapara">Как видите, проблема в основном заключается в сигнатуре, и 
нет необходимости в каком-либо определении данных для конкретной проблемы:  
<a name="(idx._(gentag._593))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a><span class="RktCmt">] </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._string%29" class="techoutside" data-pltdoc="x"><span class="techinside">String</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">bundles chunks of </span><span class="RktSym">s</span><span class="RktCmt"> into strings of length </span><span class="RktSym">n</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Предназначение переформулирует фрагмент предложения из постановки задачи и использует 
параметры из заголовка фиктивной функции.
</div>

<p></p>

<p></p>

<div class="SIntrapara">Третий шаг требует примеров функций. Вот список 
 <a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a>s:
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="hspace">&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="hspace">&nbsp;</span><span class="RktVal">"f"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"h"</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">Если мы говорим <span class="RktSym">bundle</span>
объединить этот список в пары, то есть <span class="RktSym">n</span> равно 
<span class="RktVal">2</span>, то ожидаемым результатом будет следующий список: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"ab"</span><span class="hspace">&nbsp;</span><span class="RktVal">"cd"</span><span class="hspace">&nbsp;</span><span class="RktVal">"ef"</span><span class="hspace">&nbsp;</span><span class="RktVal">"gh"</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">Теперь, если вместо этого 
<span class="RktSym">n</span> равно <span class="RktVal">3</span>, остается оставшаяся 
“letter”(буква). Поскольку в формулировке задачи не указывается, какой из знаков остаётся, 
мы можем представить как минимум два допустимых сценария:
</div><div class="SIntrapara"><ul><li>

<p>Функция производит <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVal">"abc"</span><span class="stt"> </span><span class="RktVal">"def"</span><span class="stt"> </span><span class="RktVal">"g"</span><span class="RktPn">)</span>; то есть, она считает последнюю букву оставшейся.
</p>

</li><li>

<p> Или она производит <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVal">"a"</span><span class="stt"> </span><span class="RktVal">"bcd"</span><span class="stt"> </span><span class="RktVal">"efg"</span><span class="RktPn">)</span>, который сам упаковывает 
ведущий символьный знак в строку.</p>

</li></ul></div><div class="SIntrapara">Стоп! Придумайте хотя бы еще один вариант.
</div>

<p></p>

<p></p>

<div class="SIntrapara">Чтобы упростить задачу, мы выбираем первый вариант в качестве 
желаемого результата и заявляем об этом, записывая соответствующий тест: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29" class="RktValLink" data-pltdoc="x">explode</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"abcdefg"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"abc"</span><span class="hspace">&nbsp;</span><span class="RktVal">"def"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Обратите внимание на использование <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29" class="RktValLink" data-pltdoc="x">explode</a></span>; это делает тест читаемым.</div>

<p></p>

<p></p>

<div class="SIntrapara">Примеры и тесты также должны описывать, что происходит на 
границе определений данных. В этом контексте граница явно означает, что 
<span class="RktSym">bundle</span>(пакету) предоставляется список, который слишком 
короткий для данного размера блока(chunk): 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"ab"</span><span class="RktPn">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">Это также означает, что мы должны учитывать, 
что происходит, когда <span class="RktSym">bundle</span> задан <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>. Для простоты мы выбираем 
<span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span> 
в качестве желаемого результата: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">Одна естественная альтернатива - попросить 
<span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">""</span><span class="RktVal">)</span>. Может вы видите другие? </div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._594))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._(figure._fig~3abundle-template-bad))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> as compound, </span><span class="RktSym">s</span><span class="RktCmt"> considered atomic</span><br>;<span class="RktCmt"> (</span><a href="part_four.html#%28part._sec~3atwo-inputs~3acase1%29" data-pltdoc="x">Processing Two Lists Simultaneously: Case 1</a><span class="RktCmt">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29" class="RktValLink" data-pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a><span class="RktCmt">] as compound, </span><span class="RktSym">n</span><span class="RktCmt"> atomic</span><br>;<span class="RktCmt"> (</span><a href="part_four.html#%28part._sec~3atwo-inputs~3acase1%29" data-pltdoc="x">Processing Two Lists Simultaneously: Case 1</a><span class="RktCmt">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a><span class="RktCmt">] and </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> are on equal footing</span><br>;<span class="RktCmt"> (</span><a href="part_four.html#%28part._sec~3atwo-inputs~3acase2%29" data-pltdoc="x">Processing Two Lists Simultaneously: Case 2</a><span class="RktCmt">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29" class="RktValLink" data-pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">consider all possibilities</span><br>;<span class="RktCmt"> (</span><a href="part_four.html#%28part._sec~3atwo-inputs~3acase3%29" data-pltdoc="x">Processing Two Lists Simultaneously: Case 3</a><span class="RktCmt">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29" class="RktValLink" data-pltdoc="x">cons?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._positive~3f%29%29" class="RktValLink" data-pltdoc="x">positive?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29" class="RktValLink" data-pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;146: </span>Бесполезные шаблоны для разделения строк на куски </span></p>

</blockquote></div>

<p></p>

<p>Шаг шаблона показывает, что <a name="(idx._(gentag._595))"></a>структурный подход 
не работает. На  <a href="#%28counter._%28figure._fig~3abundle-template-bad%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">146</span></a> показаны 
<span style="font-weight: bold">четыре</span> возможных шаблона. Поскольку оба аргумента 
<span class="RktSym">bundle</span> сложны, первые два считают один из аргументов атомарным. 
Этого явно не может быть, потому что функция должна разбирать каждый аргумент. 
Третий шаблон основан на предположении, что два аргумента обрабатываются синхронно, 
что близко, за исключением того, что <span class="RktSym">bundle</span> явно должен 
сбрасывать размер блока до исходного значения через регулярные промежутки. 
В окончательном шаблоне говорится, что два аргумента обрабатываются независимо, а это 
означает, что на каждом этапе есть четыре возможности для продолжения. Этот окончательный 
проект слишком сильно разделяет аргументы, потому что список и подсчитанное число должны
обрабатываться вместе. Короче говоря, мы должны признать, что структурные шаблоны кажутся
бесполезными для этой проблемы проектирования. </p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._596))"></a>
<a name="(idx._(gentag._597))"></a>
<a name="(idx._(gentag._598))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._(figure._fig~3abundle))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a><span class="RktCmt">] </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._string%29" class="techoutside" data-pltdoc="x"><span class="techinside">String</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">bundles chunks of </span><span class="RktSym">s</span><span class="RktCmt"> into strings of length </span><span class="RktSym">n</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">idea</span><span class="RktCmt"> take </span><span class="RktSym">n</span><span class="RktCmt"> items and drop </span><span class="RktSym">n</span><span class="RktCmt"> at a time</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29" class="RktValLink" data-pltdoc="x">implode</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">take</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">drop</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> X] </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> X]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">keeps the first </span><span class="RktSym">n</span><span class="RktCmt"> items from </span><span class="RktSym">l</span><span class="RktCmt"> if possible or everything</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">take</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">take</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29" class="RktValLink" data-pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> X] </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> X]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">removes the first </span><span class="RktSym">n</span><span class="RktCmt"> items from </span><span class="RktSym">l</span><span class="RktCmt"> if possible or everything</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">drop</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">drop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29" class="RktValLink" data-pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;147: </span>Генеративная рекурсия </span></p>

</blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara">На  <a href="#%28counter._%28figure._fig~3abundle%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">147</span></a> показано полное определение 
для <span class="RktSym">bundle</span>. В определении используются функции 
<span class="RktSym">drop</span> и <span class="RktSym">take</span>, требуемые в 
<a href="part_four.html#%28counter._%28exercise._ex~3adrop-take%29%29" data-pltdoc="x">упражнении&nbsp;395</a>; эти функции также доступны в стандартных библиотеках. 
Для полноты картины на рисунке приведены их определения: <span class="RktSym">drop</span> 
удаляет до <span class="RktSym">n</span> элементов из начала списка, 
<span class="RktSym">take</span> возвращает до этого значения количество элементов. 
Используя эти функции, довольно просто определить  <span class="RktSym">bundle</span>:
</div><div class="SIntrapara"><ol><li>

<p>если заданный список - <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>, результат будет <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>, как было решено;</p>

</li><li>

<p>  в противном случае <span class="RktSym">bundle</span> использует 
<span class="RktSym">take</span> для получения первых <span class="RktSym">n</span> <a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a>s из <span class="RktSym">s</span> и 
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29" class="RktValLink" data-pltdoc="x">implode</a></span>
(превращает) их в простую  <a href="part_one.html#%28tech._string%29" class="techoutside" data-pltdoc="x"><span class="techinside">String</span></a>;</p>

</li><li>

<p>затем она повторяется со списком, который сокращается на <span class="RktSym">n</span>
элементов, что выполняется с помощью <span class="RktSym">drop</span>; и
</p>

</li><li>

<p>наконец, <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span> объединяет 
строку из 2 со списком строк из 3, чтобы создать результат для полного списка.</p>

</li></ol></div><div class="SIntrapara">3 элемент списка подчеркивает ключевое различие 
между <span class="RktSym">bundle</span> и любой функцией в первых четырех частях этой книги.
Поскольку определение <a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a> <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span>es включает элемент в список для создания другого, все функции 
в первых четырех частях используют <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span> и
 <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span> для 
деконструкции непустого списка. В отличие от этого, <span class="RktSym">bundle</span> 
использует <span class="RktSym">drop</span>, который удаляет не один, а 
<span class="RktSym">n</span> элементов одновременно.</div>

<p></p>

<p>Хотя определение <span class="RktSym">bundle</span> необычно, лежащие в его основе 
идеи интуитивно понятны и не слишком отличаются от функций, которые мы видели до сих пор.
Действительно, если размер блока <span class="RktSym">n</span> равен 
<span class="RktVal">1</span>, <span class="RktSym">bundle</span> специализируется на 
структурно-рекурсивном определении. Кроме того, <span class="RktSym">drop</span> 
гарантированно создает неотъемлемую часть данного списка, а не произвольно 
измененную версию. И именно эта идея представлена в следующем разделе. </p>

<p><a name="(counter._(exercise._ex~3abundle-loops))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;421. <span class="RktPn">(</span><span class="RktSym">bundle</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"a"</span><span class="stt"> </span><span class="RktVal">"b"</span><span class="stt"> </span><span class="RktVal">"c"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span> правильное использование 
функции <span class="RktSym">bundle</span>? Что это производит? Почему?
 <a href="#%28counter._%28exercise._ex~3abundle-loops%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3abundle-from-abstraction))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;422. Определите функцию <span class="RktSym">list-&gt;chunks</span>.
Она потребляет список произвольных данных <span class="RktSym">l</span> и натуральное число 
<span class="RktSym">n</span>. Результатом функции является список фрагментов списка размером 
<span class="RktSym">n</span>. Каждый фрагмент представляет собой подпоследовательность 
элементов в <span class="RktSym">l</span>.</p>

<p>Используйте <span class="RktSym">list-&gt;chunks</span> для определения 
<span class="RktSym">bundle</span> через композицию функций.  
<a href="#%28counter._%28exercise._ex~3abundle-from-abstraction%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3astring-bundle))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;423. Определите <span class="RktSym">partition</span>. Она 
потребляет <span class="RktSym">String</span> s и натуральное число 
<span class="RktSym">n</span>. Функция создает список фрагментов строки размером 
<span class="RktSym">n</span>.</p>

<p></p>

<div class="SIntrapara">Для непустых строк <span class="RktSym">s</span> и 
положительных натуральных чисел <span class="RktSym">n</span>,
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._equal~3f%29%29" class="RktValLink" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">partition</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29" class="RktValLink" data-pltdoc="x">explode</a></span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">истинно. Но не используйте это равенство 
как определение для <span class="RktSym">partition</span>; вместо этого используйте 
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._substring%29%29" class="RktValLink" data-pltdoc="x">substring</a></span>.</div>

<p></p>

<p><span style="font-weight: bold">Подсказка</span>  Сделайте так, чтобы 
<span class="RktSym">partition</span> произвело естественный результат для пустой строки. 
В случае, когда <span class="RktSym">n</span> равно <span class="RktVal">0</span>, 
см. <a href="#%28counter._%28exercise._ex~3abundle-loops%29%29" data-pltdoc="x">Упражнение&nbsp;421</a>.</p>

<p><span style="font-weight: bold">Примечание</span> Функция 
<span class="RktSym">partition</span> несколько ближе к тому, что потребуется для 
совместной среды DrRacket, чем <span class="RktSym">bundle</span>. 
<a href="#%28counter._%28exercise._ex~3astring-bundle%29%29" class="ex-end" data-pltdoc="x"></a></p>

<h4>25.2<tt>&nbsp;</tt><a name="(part._sec~3aquick-sort)"></a>Рекурсия, игнорирующая структуру </h4>

<p>Напомним, что функция <span class="RktSym">sort&gt;</span> из 
<a href="part_two.html#%28part._ch~3alist-sort%29" data-pltdoc="x">Разработка с помощью Композиции</a> использует список чисел и переупорядочивает его в некотором порядке, обычно по 
возрастанию или убыванию. Она продолжается путем вставки первого числа в соответствующую 
позицию отсортированного остатка списка. Иными словами, это 
<a name="(idx._(gentag._599))"></a>структурно рекурсивная функция, которая повторно 
обрабатывает результат естественной рекурсии.
</p>

<p></p>

<div class="SIntrapara">Алгоритм быстрой сортировки Хоара радикально отличается 
от сортировки списков и стал классическим примером генеративной рекурсии. В основании 
лежащего в основе генеративного шага используется проверенная временем стратегия 
«разделяй и властвуй». То есть он разделяет нетривиальные экземпляры проблемы на 
две более мелкие связанные проблемы; решает те мелкие проблемы; и объединяет их решения 
в решение исходной проблемы. В случае алгоритма быстрой сортировки промежуточная цель - 
разделить список чисел на два списка:
</div><div class="SIntrapara"><ul><li>

<p>тот, который содержит все числа, которые строго меньше первого</p>

</li><li>

<p>и еще один со всеми теми элементами, которые строго побольше.</p>

</li></ul></div><div class="SIntrapara">Затем два меньших списка сортируются с помощью 
алгоритма быстрой сортировки. После того, как два списка отсортированы, результаты 
составлены с первым элементом, помещенным в середину. Из-за своей особой роли первый 
элемент в списке называется сводным элементом(<span style="font-style: italic">pivot item</span>).
</div>

<p></p>

<blockquote class="Figure"><a name="(counter._(figure._fig~3asort-ill))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside">

<p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_180.png" alt="image" width="665.998046875" height="559.0625"></p>

</blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;148: </span>Графическая иллюстрация алгоритма быстрой сортировки</span></p>

</blockquote>

<p>Чтобы лучше понять, как работает алгоритм быстрой сортировки, давайте рассмотрим 
пример быстрой сортировки <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVal">11</span><span class="stt"> </span><span class="RktVal">8</span><span class="stt"> </span><span class="RktVal">14</span><span class="stt"> </span><span class="RktVal">7</span><span class="RktPn">)</span>. На  <a href="#%28counter._%28figure._fig~3asort-ill%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">148</span></a> этот процесс показан 
графически. Фигура состоит из верхней половины, фазы разделения и нижней половины, 
фазы подчинения(conquer). </p>

<p>Фаза разделения представлена прямоугольниками и сплошными стрелками. 
Три стрелки выходят из каждого списка в прямоугольной рамке и переходят в 
прямоугольник с тремя частями: обведенный круговой элемент в середине, слева от 
него заключенный в рамку список чисел, меньших, чем сводный, и справа от него 
список в прямоугольнике с теми числами, которые больше чем стержень. Каждый из 
этих шагов выделяет по крайней мере одно число в качестве стержня, что означает, 
что два соседних списка короче, чем данный список. Следовательно, завершается 
и весь процесс.</p>

<p>Рассмотрим первый шаг, на котором находится ввод <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVal">11</span><span class="stt"> </span><span class="RktVal">8</span><span class="stt"> </span><span class="RktVal">14</span><span class="stt"> </span><span class="RktVal">7</span><span class="RktPn">)</span>. Опорный элемент(вращения/pivot item) - 
<span class="RktVal">11</span>. Разделение списка на элементы больше и меньше 
<span class="RktVal">11</span> дает <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVal">8</span><span class="stt"> </span><span class="RktVal">7</span><span class="RktPn">)</span> и 
<span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVal">14</span><span class="RktPn">)</span>. Остальные шаги фазы 
разделения работают аналогично. Разделение заканчивается, когда все числа были изолированы 
как опорные элементы(pivot elements). На этом этапе вы уже можете считать окончательный
результат, считывая pivots(оси вращения) слева направо. </p>

<p>Фаза завоевания(подчинения) представлена пунктирными стрелками и списками
 в прямоугольной рамке. Три стрелки входят в каждое поле результата: средняя - 
от точки поворота, левая - от результата сортировки меньших чисел в рамке, 
а правая - от результата сортировки больших чисел в рамке. Каждый шаг добавляет 
по крайней мере одно число в список результатов, сводную точку, то есть списки 
растут к нижней части диаграммы. Поле внизу - это отсортированный вариант списка 
вверху.</p>

<p>Взгляните на крайнюю левую, самую верхнюю ступень завоевания. Она объединяет опору
<span class="RktVal">7</span> с двумя пустыми списками, в результате чего получается 
<span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="RktVal">)</span>. Следующий вниз соответствует этапу разбиения, на котором выделяется 
<span class="RktVal">8</span> и, таким образом, получается <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="stt"> </span><span class="RktVal">8</span><span class="RktVal">)</span>. Каждый уровень фазы завоевания отражает
соответствующий уровень фазы разделения. В конце концов, общий процесс рекурсивен. </p>

<p><a name="(counter._(exercise._ex~3aquicksort-hand))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;424. Нарисуйте диаграмму быстрой сортировки, как на  
<a href="#%28counter._%28figure._fig~3asort-ill%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">148</span></a> для <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVal">11</span><span class="stt"> </span><span class="RktVal">9</span><span class="stt"> </span><span class="RktVal">2</span><span class="stt"> </span><span class="RktVal">18</span><span class="stt"> </span><span class="RktVal">12</span><span class="stt"> </span><span class="RktVal">14</span><span class="stt"> </span><span class="RktVal">4</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span>. <a href="#%28counter._%28exercise._ex~3aquicksort-hand%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara">Теперь, когда у нас есть хорошее понимание идеи быстрой сортировки, 
мы можем перевести ее на ISL+. Ясно, что <span class="RktSym">quick-sort&lt;</span> различает 
два случая. Если ввод - <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>, она производит <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>, потому что этот список уже отсортирован; в противном 
случае он выполняет генеративную рекурсию. Этот случай разделения предполагает следующее выражение <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span>: 
<a name="(idx._(gentag._600))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">produces a sorted version of </span><span class="RktSym">alon</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Дан ответ для первого случая. Во втором случае, когда ввод <span class="RktSym">quick-sort&lt;</span> является непустым списком, алгоритм использует первый элемент для разделения 
остальной части списка на два подсписка: список со всеми элементами, меньшими, чем 
элемент сводной таблицы, и еще один с теми, которые больше, чем элемент поворота(pivot).</div>

<p></p>

<p>Поскольку размер остальной части списка неизвестен, мы оставляем задачу разбиения 
списка на две вспомогательные функции: <span class="RktSym">smallers</span>(меньшие) и 
<span class="RktSym">largers</span>(большие). Они обрабатывают список и отфильтровывают те
элементы, которые меньше и больше, соответственно, чем сводная таблица. Следовательно, каждая вспомогательная функция принимает два аргумента, а именно список чисел и число. Разработка этих двух функций - это упражнение в структурной рекурсии. Попробуйте сами или прочтите определения, показанные на <a href="#%28counter._%28figure._fig~3aquick-sort%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">149</span></a>.</p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._601))"></a>
<a name="(idx._(gentag._602))"></a>
<a name="(idx._(gentag._603))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._(figure._fig~3aquick-sort))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">produces a sorted version of </span><span class="RktSym">alon</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">assume</span><span class="RktCmt"> the numbers are all distinct </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pivot</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">smallers</span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="hspace">&nbsp;</span><span class="RktSym">pivot</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pivot</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">largers</span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="hspace">&nbsp;</span><span class="RktSym">pivot</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">largers</span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29" class="RktValLink" data-pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">largers</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">largers</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">smallers</span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c%29%29" class="RktValLink" data-pltdoc="x">&lt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">smallers</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">smallers</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;149: </span>Алгоритм быстрой сортировки</span></p>

</blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara">Каждый из этих списков сортируется отдельно с 
использованием <span class="RktSym">quick-sort&lt;</span>, что подразумевает использование
рекурсии, в частности следующих двух выражений:
</div><div class="SIntrapara"><ol><li>

<p><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">smallers</span><span class="stt"> </span><span class="RktSym">alon</span><span class="stt"> </span><span class="RktSym">pivot</span><span class="RktPn">)</span><span class="RktPn">)</span>,
которое сортирует список элементов меньше, чем pivot(поворотная точка); а также</p>

</li><li>

<p><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">largers</span><span class="stt"> </span><span class="RktSym">alon</span><span class="stt"> </span><span class="RktSym">pivot</span><span class="RktPn">)</span><span class="RktPn">)</span>,
 которое сортирует список элементов больше, чем pivot(поворотная точка).</p>

</li></ol></div><div class="SIntrapara">Как только <span class="RktSym">quick-sort&lt;</span> получит отсортированные версии двух списков, она должна объединить два списка и сводную 
таблицу в правильном порядке: сначала все элементы, меньшие, чем <span class="RktSym">pivot</span>, затем <span class="RktSym">pivot</span> и, наконец, все те, которые больше. 
Поскольку первый и последний список уже отсортированы, <span class="RktSym">quick-sort&lt;</span> может просто использовать
 <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">smallers</span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="hspace">&nbsp;</span><span class="RktSym">pivot</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">largers</span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="hspace">&nbsp;</span><span class="RktSym">pivot</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara"><a href="#%28counter._%28figure._fig~3aquick-sort%29%29" data-pltdoc="x">Рисунок&nbsp;<span class="FigureRef">149</span></a> содержит полную программу; прочтите перед тем, как продолжить.</div>

<p></p>

<p></p>

<div class="SIntrapara">Теперь, когда у нас есть фактическое определение функции, 
мы можем вручную вычислить приведенный выше пример: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">Вычисление показывает основные этапы процесса сортировки, то есть этапы разделения, этапы рекурсивной сортировки и конкатенацию трех частей. Из этого расчета легко увидеть, как <span class="RktSym">quick-sort&lt;</span> реализует процесс, показанный на 
<a href="#%28counter._%28figure._fig~3asort-ill%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">148</span></a>.</div>

<p></p>

<p>И  <a href="#%28counter._%28figure._fig~3asort-ill%29%29" data-pltdoc="x">рисунок&nbsp;<span class="FigureRef">148</span></a>, и расчет также показывают, как <span class="RktSym">quick-sort&lt;</span> полностью игнорирует структуру данного списка. Первая рекурсия работает 
с двумя удаленными числами из первоначально данного списка, а вторая - с третьим элементом 
списка. Эти рекурсии не случайны, но они определенно не зависят от структуры определения данных. 
</p>

<p>Сравните организацию <span class="RktSym">quick-sort&lt;</span> с функцией 
<span class="RktSym">sort&gt;</span> из <a href="part_two.html#%28part._ch~3alist-sort%29" data-pltdoc="x">Разработка с помощью Композиции</a>. Проектирование последней следует 
рецепту структурного проектирования, создавая программу, которая обрабатывает элементы списка
элемент за элементом. Разбивая список, <span class="RktSym">quick-sort&lt;</span> может 
ускорить процесс сортировки списка, хотя и за счет отказа от простого использования  
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span>
и <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span>.</p>

<p><a name="(counter._(exercise._ex~3aquick-sort-purpose))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;425. Четко сформулируйте формулировку цели для  
<span class="RktSym">smallers</span> и <span class="RktSym">largers</span> на  
<a href="#%28counter._%28figure._fig~3aquick-sort%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">149</span></a>. 
<a href="#%28counter._%28exercise._ex~3aquick-sort-purpose%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3aquick-sort-terminal))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;426. Завершите ручное выполнение выше. Внимательное изучение 
вычисления предлагает дополнительный тривиальный случай для <span class="RktSym">quick-sort&lt;</span>. Каждый раз, когда <span class="RktSym">quick-sort&lt;</span> использует список из 
одного элемента, она возвращает его как есть. В конце концов, отсортированная версия списка 
из одного элемента - это сам список.</p>

<p>Измените <span class="RktSym">quick-sort&lt;</span>, чтобы воспользоваться этим наблюдением.
Оцените пример еще раз. Сколько шагов сохраняет обновленный алгоритм? 
<a href="#%28counter._%28exercise._ex~3aquick-sort-terminal%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3aquick-sort-switch))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;427. В то время как <span class="RktSym">quick-sort&lt;</span> 
во многих случаях быстро уменьшает размер проблемы, для небольших проблем он слишком медленный.
Следовательно, люди используют <span class="RktSym">quick-sort&lt;</span>, чтобы уменьшить 
размер проблемы и переключаются на другую функцию сортировки, когда список достаточно мал.</p>

<p>Разработайте версию <span class="RktSym">quick-sort&lt;</span>, которая использует 
<span class="RktSym">sort&lt;</span>(соответствующим образом адаптированный вариант 
<span class="RktSym">sort&gt;</span> из a href="part_two.html#%28part._sec~3asort.I%29" data-pltdoc="x">Вспомогательных функций, которые повторяются</a>), если длина ввода ниже 
некоторого порога.  <a href="#%28counter._%28exercise._ex~3aquick-sort-switch%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3aquick-sort-drop))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;428. Если вход в <span class="RktSym">quick-sort&lt;</span> 
содержит одно и то же число несколько раз, алгоритм возвращает список, который строго 
короче входного. Почему? Устраните проблему, чтобы выходные данные были такими же длинными, 
как и входные. <a href="#%28counter._%28exercise._ex~3aquick-sort-drop%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3aquick-sort-filter))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;429. Используйте <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._filter%29%29" class="RktValLink" data-pltdoc="x">filter</a></span> 
чтобы определить <span class="RktSym">smallers</span> и <span class="RktSym">largers</span>. 
<a href="#%28counter._%28exercise._ex~3aquick-sort-filter%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3aquick-sort-abstract))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;430. Разработайте вариант 
<span class="RktSym">quick-sort&lt;</span>, который использует только одну функцию сравнения, например <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c%29%29" class="RktValLink" data-pltdoc="x">&lt;</a></span>. Её этап 
разделения делит данный список <span class="RktSym">alon</span> только на список, содержащий 
только элементы <span class="RktSym">alon</span> меньшего размера, чем pivot(поворотный эемент),
и еще один с теми, которые не меньше..</p>

<p>Используйте <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span> чтобы упаковать программу как единую 
функцию. Абстрагируйте эту функцию, чтобы она использовала список и функцию сравнения. 
<a href="#%28counter._%28exercise._ex~3aquick-sort-abstract%29%29" class="ex-end" data-pltdoc="x"></a></p>

<h3>26<tt>&nbsp;</tt><a name="(part._ch~3adesign-algo)"></a>Разработка алгоритмов
</h3>

<p>В обзоре к этой части уже объясняется, что проектирование функций генеративной 
рекурсии является более индивидуальным, чем <a name="(idx._(gentag._604))"></a>структурное
проектирование. Как показано в первой главе, две генеративные рекурсии могут радикально 
отличаться по способу обработки функций. Как <span class="RktSym">bundle</span>, так и 
<span class="RktSym">quick-sort&lt;</span> обрабатывают списки, но в то время как первая, 
по крайней мере, соблюдает последовательность в данном списке, последняя по своему желанию
переупорядочивает данный список. Вопрос в том, может ли единый<a name="(idx._(gentag._605))"></a>
рецепт проектирования помочь в создании столь сильно различающихся функций. </p>

<p>В первом разделе показано, как адаптировать <a name="(idx._(gentag._606))"></a>размерность
процесса в <a name="(idx._(gentag._607))"></a>рецепте проектирования к генеративной рекурсии.
Второй раздел посвящен другому новому явлению: алгоритм может не дать ответа на некоторые 
входные данные. Поэтому программисты должны анализировать свои программы и дополнять 
информацию о конструкции <a name="(idx._(gentag._608))"></a>комментарием о завершении. 
Остальные разделы противопоставляют <a name="(idx._(gentag._609))"></a>структурную и 
<a name="(idx._(gentag._610))"></a>генеративную рекурсию.</p>

<h4>26.1<tt>&nbsp;</tt><a name="(part._.Adapting_the_.Design_.Recipe)"></a>Адаптация рецепта разработки </h4>

<p></p>

<div class="SIntrapara">Давайте рассмотрим шесть общих шагов нашего рецепта структурного
проектирования в свете примеров из предыдущей главы:
</div><div class="SIntrapara"><ul><li>

<p> Как и раньше, мы должны представить информацию о проблеме в виде данных 
на выбранном нами языке программирования. Выбор 
<span style="font-weight: bold">представления данных</span> для проблемы влияет на 
наши представления о вычислительном процессе, поэтому необходимо заранее спланировать работу. 
Как вариант, будьте готовы вернуться назад и исследовать различные 
<a name="(idx._(gentag._611))"></a>представления данных. Тем не менее, мы должны анализировать информацию о проблеме и определять коллекции данных.</p>

</li><li>

<p> Нам также нужна подпись, заголовок функции и <a name="(idx._(gentag._612))"></a>предназначение.
Поскольку генеративный шаг не связан со структурой <a name="(idx._(gentag._613))"></a>определения
данных, предназначение должно выходить за рамки того, <span style="font-weight: bold">что</span>
функция должна вычислять, а также объяснять, <span style="font-weight: bold">как</span> 
функция вычисляет свой результат. </p>

</li><li>

<p>Полезно объяснить “как” на <a name="(idx._(gentag._614))"></a>примерах функций, 
так как мы объясняли <span class="RktSym">bundle</span> и 
<span class="RktSym">quick-sort&lt;</span> в предыдущей главе. То есть, в то время как 
примеры функций в структурном мире просто указывают, какой результат должна производить 
функция для каких входных данных, цель примеров в мире генеративной рекурсии - объяснить 
основную идею вычислительного процесса.</p>

<p>Для <span class="RktSym">bundle</span> в примерах указывается, как функция действует 
в целом и в некоторых граничных случаях. Для <span class="RktSym">quick-sort&lt;</span> 
пример на  <a href="#%28counter._%28figure._fig~3asort-ill%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">148</span></a> иллюстрирует, как функция разбивает данный список по 
элементу сводной таблицы. Добавляя такие отработанные примеры в предназначение, мы - 
разработчики - получаем лучшее понимание желаемого процесса и передаем это понимание будущим
читателям этого кода. </p>

</li><li>

<p>Наше обсуждение предлагает <a name="(idx._(gentag._615))"></a>общий шаблон для 
<a name="(idx._(gentag._616))"></a>алгоритмов. Грубо говоря, при разработке алгоритма 
различаются два вида проблем: <span style="font-style: italic">тривиально разрешимые</span> 
и неразрешимые.
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Для этой части книги «тривиальный» это технический термин.</span></span></span>  
Если данная проблема тривиально разрешима, алгоритм выдает соответствующее решение. 
Например, тривиально разрешимы проблемы сортировки пустого списка или списка из одного 
элемента. Список с большим количеством элементов - нетривиальная задача. Для этих 
нетривиальных проблем алгоритмы обычно генерируют новые проблемы того же типа, что и данная,
рекурсивно решают их и объединяют решения в общее решение.
</p>

<p></p>

<div class="SIntrapara">Исходя из этого наброска, все алгоритмы имеют примерно такую организацию: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">generative-recursive-fun</span><span class="hspace">&nbsp;</span><span class="RktSym">problem</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">trivially-solvable?</span><span class="hspace">&nbsp;</span><span class="RktSym">problem</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">determine-solution</span><span class="hspace">&nbsp;</span><span class="RktSym">problem</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">combine-solutions</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">problem</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">generative-recursive-fun</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">generate-problem-1</span><span class="hspace">&nbsp;</span><span class="RktSym">problem</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">generative-recursive-fun</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">generate-problem-n</span><span class="hspace">&nbsp;</span><span class="RktSym">problem</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Исходная проблема иногда требуется, чтобы объединить решения для вновь созданных проблем, 
поэтому она передается в  <span class="RktSym">combine-solutions</span>
(объединение решений).</div>

<p></p>

</li><li>

<p></p>

<div class="SIntrapara">Этот <a name="(idx._(gentag._617))"></a>шаблон - всего лишь 
примерный план, а не окончательная форма. Каждая часть шаблона напоминает нам о следующих 
четырех вопросах: 
</div><div class="SIntrapara"><ul><li>

<p>это тривиально решаемая проблема?
</p>

</li><li>

<p>Как решаются тривиальные решения?</p>

</li><li>

<p>Как алгоритм генерирует новые проблемы, которые легче решить, чем исходная? 
Есть ли одна новая проблема, которую мы создаем, или их несколько?</p>

</li><li>

<p>Совпадает ли решение данной проблемы с решением (одной из) новых проблем? 
Или нам нужно объединить решения, чтобы создать решение исходной проблемы? И если да, 
то нужно ли нам что-нибудь из исходных данных о проблеме?</p>

</li></ul></div><div class="SIntrapara">Чтобы определить алгоритм как функцию, мы должны 
выразить ответы на эти четыре вопроса в виде функций и выражений в терминах выбранного
<a name="(idx._(gentag._618))"></a>представления данных. </div>

<p></p>

<p>На этом шаге снова может помочь попытка на основе таблиц из <a href="part_two.html#%28part._ch~3adesign-lists%29" data-pltdoc="x">Проектирования с определениями данных ссылающихся на себя</a>. Еще раз рассмотрите пример <span class="RktSym">quick-sort&lt;</span> из <span class="RktSym">quick-sort&lt;</span> example from
<a href="#%28part._sec~3aquick-sort%29" data-pltdoc="x">Рекурсия, которая игнорирует структуру</a>. Основная идея <span class="RktSym">quick-sort&lt;</span> состоит в том, чтобы разделить
данный список на список меньших и больших элементов и отсортировать их по отдельности. На 
<a href="#%28counter._%28figure._fig~3aquick-sort-table%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">150</span></a> показано, как работают некоторые простые числовые примеры 
для нетривиальных случаев. Из этих примеров легко догадаться, что ответ на четвертый вопрос -
добавить отсортированный список меньших чисел, число pivot(поворота) и отсортированный список
больших чисел, которые можно легко преобразовать в код.</p>

</li><li>

<p>Как только функция будет завершена, пора ее протестировать. Как и прежде, 
целью тестирования является обнаружение и устранение ошибок. </p>

</li></ul></div>

<p></p>

<blockquote class="Figure"><a name="(counter._(figure._fig~3aquick-sort-table))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table style="border-collapse: collapse;" cellspacing="0" cellpadding="0"><tbody><tr><td style="border-bottom: 1px solid black;" align="left">

<p><span class="RktSym">alon</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="RktSym">pivot</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>sorted, smaller</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>sorted, larger</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>expected</p>

</td></tr><tr><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">2</span><span class="stt"> </span><span class="RktVal">3</span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">4</span><span class="RktVal">)</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">2</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="RktVal">)</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">3</span><span class="stt"> </span><span class="RktVal">4</span><span class="RktVal">)</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">2</span><span class="stt"> </span><span class="RktVal">3</span><span class="stt"> </span><span class="RktVal">4</span><span class="RktVal">)</span></p>

</td></tr><tr><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">2</span><span class="stt"> </span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">4</span><span class="RktVal">)</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">2</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktVal">)</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">4</span><span class="RktVal">)</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">2</span><span class="stt"> </span><span class="RktVal">4</span><span class="RktVal">)</span></p>

</td></tr><tr><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">3</span><span class="stt"> </span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">4</span><span class="RktVal">)</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">3</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktVal">)</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">4</span><span class="RktVal">)</span></p>

</td><td align="left">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="left">

<p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">3</span><span class="stt"> </span><span class="RktVal">4</span><span class="RktVal">)</span></p>

</td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;150: </span>Табличный подход к угадыванию
для комбинирования решений</span></p>

</blockquote>

<p><a name="(counter._(exercise._ex~3agen-fun-instance1))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;431. Ответьте на четыре ключевых вопроса для задачи 
<span class="RktSym">bundle</span> и на первые три вопроса для задачи <span class="RktSym">quick-sort&lt;</span>. Сколько требуется экземпляров <span class="RktSym">generate-problem</span>  
<a href="#%28counter._%28exercise._ex~3agen-fun-instance1%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3aworm5-explained))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;432. В <a href="part_two.html#%28counter._%28exercise._ex~3aworm5%29%29" data-pltdoc="x">упражнении&nbsp;219</a>  вводится функция <span class="RktSym">food-create</span>, которая потребляет 
<a href="part_one.html#%28tech._posn%29" class="techoutside" data-pltdoc="x"><span class="techinside">Posn</span></a> и создает случайно выбранный <a href="part_one.html#%28tech._posn%29" class="techoutside" data-pltdoc="x"><span class="techinside">Posn</span></a>, который гарантированно отличается от заданного. 
Сначала переформулируйте две функции как одно определение, используя <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span>; затем обоснуйте разработку   
<span class="RktSym">food-create</span>. <a href="#%28counter._%28exercise._ex~3aworm5-explained%29%29" class="ex-end" data-pltdoc="x"></a></p>

<h4>26.2<tt>&nbsp;</tt><a name="(part._.Termination)"></a>Прекращение</h4>

<p></p>

<div class="SIntrapara">Генеративная рекурсия добавляет к вычислениям совершенно 
новый аспект: non-termination(непрерывность/непрекращаемость). Такая функция, как 
<span class="RktSym">bundle</span>, может никогда не выдать значение или сигнализировать 
об ошибке для определенных входных данных. В  <a href="#%28counter._%28exercise._ex~3abundle-loops%29%29" data-pltdoc="x">упражнении&nbsp;421</a> спрашивается, каков результат 
<span class="RktPn">(</span><span class="RktSym">bundle</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"a"</span><span class="stt"> </span><span class="RktVal">"b"</span><span class="stt"> </span><span class="RktVal">"c"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span>, и вот объяснение, почему она не 
дает результата: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29" class="RktValLink" data-pltdoc="x">implode</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">take</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">drop</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._implode%29%29" class="RktValLink" data-pltdoc="x">implode</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">drop</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">drop</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktVal">""</span><span class="hspace">&nbsp;</span><span class="highlighted"><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"a"</span><span class="stt"> </span><span class="RktVal">"b"</span><span class="stt"> </span><span class="RktVal">"c"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span></span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Запуск показывает, что вычисление <span class="RktPn">(</span><span class="RktSym">bundle</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"a"</span><span class="stt"> </span><span class="RktVal">"b"</span><span class="stt"> </span><span class="RktVal">"c"</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span> требует 
наличия результата для того же самого выражения. В контексте ISL+ это означает, 
что вычисление не прекращается. Специалисты по информатике говорят, что 
<span class="RktSym">bundle</span> не завершается(<span style="font-style: italic">not terminate</span>), когда второй аргумент равен <span class="RktVal">0</span>; они также говорят, 
что функция зацикливается(<span style="font-style: italic">loops</span>) или что вычисление
застревает в бесконечном цикле <span style="font-style: italic">infinite
loop</span>.</div>

<p></p>

<p>Сравните это понимание с разработками, представленными в первых четырех частях. 
Каждая функция, разработанная в соответствии с рецептом, либо выдает ответ, либо выдает 
сигнал ошибки для каждого входа. В конце концов, рецепт диктует, что каждая естественная 
рекурсия потребляет немедленную часть ввода, а не сам ввод. Поскольку данные построены
иерархически, ввод сжимается(уменьшается) на каждом этапе. В конце концов функция 
применяется к элементарному фрагменту данных, и рекурсия останавливается. </p>

<p>Это напоминание также объясняет, почему генеративные рекурсивные функции могут 
расходиться. Согласно <a name="(idx._(gentag._619))"></a>рецепту проектирования 
генеративной рекурсии, алгоритм может генерировать новые проблемы без каких-либо ограничений.
Если рецепт разработки требовал гарантии того, чтобы новые проблемы были «меньше», 
чем данная, они бы прекратили свое существование.
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Теория вычислений на самом деле показывает, что в конце концов мы должны снять 
эти ограничения.
</span></span></span>  
Но наложение такого ограничения без нужды усложнило бы разработку таких функций, как 
<span class="RktSym">bundle</span>.</p>

<p>Поэтому в этой книге мы оставляем первые шесть шагов рецепта разработки в основном 
неизменными и дополняем их седьмым шагом: <a name="(idx._(gentag._620))"></a><span style="font-style: italic">termination argument</span>(аргументом завершения). На  
<a href="#%28counter._%28figure._fig~3adesign7%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">151</span></a> представлена ​​первая часть рецепта проектирования 
генеративной рекурсии, а на  <a href="#%28counter._%28figure._fig~3adesign7b%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">152</span></a> - вторая. Они показывают 
рецепт проектирования в стандартной табличной форме. Неизмененные шаги отмечены тире в 
столбце  <span style="font-weight: bold">activity</span>(активности). Другие приходят 
с комментариями о том, чем рецепт разработки для генеративной рекурсии отличается от 
рецепта для структурной рекурсии. Последняя строка на 
<a href="#%28counter._%28figure._fig~3adesign7b%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">152</span></a> полностью новая. </p>

<p>Аргумент завершения может иметь одну из двух форм. Первый аргументирует, 
почему каждый рекурсивный вызов работает с проблемой, которая меньше заданной. 
Часто этот аргумент прост; в редких случаях вам нужно будет поработать с математиком, 
чтобы доказать теорему для таких аргументов. Второй тип иллюстрирует на примере, что 
функция не может завершаться.
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Вы не можете определить предикат для этого класса; в противном случае вы можете изменить 
функцию и убедиться, что она всегда завершается.
</span></span></span>
В идеале он также должен описывать класс данных, для которых функция может зацикливаться. 
В редких случаях вы не сможете привести ни одного аргумента, потому что информатика еще
недостаточно знает. </p>

<blockquote class="Figure"><a name="(counter._(figure._fig~3adesign7))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote><table style="border-collapse: collapse;" cellspacing="0" cellpadding="0"><tbody><tr><td style="border-bottom: 1px solid black;" align="left">

<p><span style="font-weight: bold">шаги</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span style="font-weight: bold">результат</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span style="font-weight: bold">деятельность</span></p>

</td></tr><tr><td style="border-bottom: 1px solid black;" align="left">

<p>анализ проблемы</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><a name="(idx._(gentag._623))"></a>представление и <a name="(idx._(gentag._624))"></a>определение данных</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>— </p>

</td></tr><tr><td style="border-bottom: 1px solid black;" align="left">

<p>заголовок</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>предназначение, касающееся «как» для функции/p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>дополнить объяснение того, <span style="font-weight: bold">что</span> функция вычисляет,
однострочным описанием того, <span style="font-weight: bold">как</span> она вычисляет результат</p>

</td></tr><tr><td style="border-bottom: 1px solid black;" align="left">

<p>примеры</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>примеры и тесты</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>проработайте «как» на нескольких примерах</p>

</td></tr><tr><td style="border-bottom: 1px solid black;" align="left">

<p>шаблон</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>фиксированный шаблон</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>— </p>

</td></tr></tbody></table></blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;151: </span>Разработка алгоритмов (часть 1) </span></p>

</blockquote><blockquote class="Figure"><a name="(counter._(figure._fig~3adesign7b))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote><table style="border-collapse: collapse;" cellspacing="0" cellpadding="0"><tbody><tr><td style="border-bottom: 1px solid black;" align="left">

<p><span style="font-weight: bold">шаги</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span style="font-weight: bold">результат</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span style="font-weight: bold">деятельность</span></p>

</td></tr><tr><td style="border-bottom: 1px solid black;" align="left">

<p>определение</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>полноценное определение функции</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>сформулировать условия для тривиально решаемых задач; сформулировать 
ответы на эти тривиальные случаи; определить, как создавать новые задачи 
для нетривиальных задач, возможно, используя вспомогательные функции; 
определить, как объединить решения сгенерированных проблем в решение 
данной проблемы</p>

</td></tr><tr><td style="border-bottom: 1px solid black;" align="left">

<p>тесты</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>обнаруживать ошибки</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>— </p>

</td></tr><tr><td style="border-bottom: 1px solid black;" align="left">

<p> прекращение</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>(1) аргумент размера для каждого рекурсивного вызова 
или 
(2) примеры исключений для завершения</p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p><span class="hspace">&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="left">

<p>исследовать, меньше ли проблемных данных для каждых рекурсивных данных, 
чем заданные данные; найти примеры, которые вызывают цикл функции
</p>

</td></tr></tbody></table></blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;152: </span>Разработка алгоритмов (часть 2) </span></p>

</blockquote>

<p></p>

<div class="SIntrapara">Давайте проиллюстрируем два вида <a name="(idx._(gentag._625))"></a>аргументов завершения на примерах. Для функции <span class="RktSym">bundle</span> 
достаточно предупредить читателей о размере блока  <span class="RktVal">0</span>: <a name="(idx._(gentag._626))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a><span class="RktCmt">] </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._string%29" class="techoutside" data-pltdoc="x"><span class="techinside">String</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">bundles sub-sequences of </span><span class="RktSym">s</span><span class="RktCmt"> into strings of length </span><span class="RktSym">n</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">termination</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="stt"> </span><span class="RktSym">s</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktCmt"> loops unless </span><span class="RktSym">s</span><span class="RktCmt"> is </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bundle</span><span class="hspace">&nbsp;</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
В этом случае можно определить предикат, который точно описывает, когда <span class="RktSym">bundle</span> завершается. Для <span class="RktSym">quick-sort&lt;</span> 
ключевое наблюдение состоит в том, что каждое рекурсивное использование 
<span class="RktSym">quick-sort&lt;</span> получает список, который короче, чем  
<span class="RktSym">alon</span>: <a name="(idx._(gentag._627))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">creates a sorted variant of </span><span class="RktSym">alon</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">termination</span><span class="RktCmt"> both recursive calls to </span><span class="RktSym">quick-sort&lt;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">receive list that miss the pivot item</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym">alon</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
В одном случае список состоит из чисел, которые строго меньше, чем pivot(поворотное значение);
другой - для чисел строго большего размера.</div>

<p></p>

<p><a name="(counter._(exercise._ex~3aterminate-bundle))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;433. Разработайте проверенную версию 
<span class="RktSym">bundle</span>, которая гарантированно завершится для всех входных данных. 
Она может сигнализировать об ошибке в тех случаях, когда исходная версия зацикливается. 
 <a href="#%28counter._%28exercise._ex~3aterminate-bundle%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3aquick-sort-non-terminate))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;434. Рассмотрим следующее определение 
<span class="RktSym">smallers</span>, одного из двух «генераторов проблем» для 
<span class="RktSym">quick-sort&lt;</span>:
<a name="(idx._(gentag._628))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">smallers</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">smallers</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">smallers</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Что может пойти не так, если эта версия используется с определением 
 <span class="RktSym">quick-sort&lt;</span> из <a href="#%28part._sec~3aquick-sort%29" data-pltdoc="x">Рекурсия, которая игнорирует структуру</a> ? <a href="#%28counter._%28exercise._ex~3aquick-sort-non-terminate%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p><a name="(counter._(exercise._ex~3aquick-sort-terminates))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;435. Когда вы работали над 
<a href="#%28counter._%28exercise._ex~3aquick-sort-abstract%29%29" data-pltdoc="x">упражнением&nbsp;430</a> или <a href="#%28counter._%28exercise._ex~3aquick-sort-drop%29%29" data-pltdoc="x">упражнением&nbsp;428</a>, вы, возможно, получили решения 
в виде циклов. Точно так же <a href="#%28counter._%28exercise._ex~3aquick-sort-non-terminate%29%29" data-pltdoc="x">упражнение&nbsp;434</a> фактически показывает, 
насколько хрупким является аргумент завершения для <span class="RktSym">quick-sort&lt;</span>. 
Во всех случаях аргумент основан на идее, что <span class="RktSym">smallers</span> и 
<span class="RktSym">largers</span> производят списки, которые имеют максимальную длину, 
равную данному списку, и на нашем понимании, что ни один из них не включает данную 
pivot(опорную точку) в результат. </p>

<p>Основываясь на этом объяснении, измените определение <span class="RktSym">quick-sort&lt;</span>,
чтобы обе функции получали списки, которые короче заданного. 
<a href="#%28counter._%28exercise._ex~3aquick-sort-terminates%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3aworm5-terminated))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;436.  Сформулируйте аргумент завершения для 
<span class="RktSym">food-create</span> из   <a href="#%28counter._%28exercise._ex~3aworm5-explained%29%29" data-pltdoc="x">упражнения&nbsp;432</a>. 
<a href="#%28counter._%28exercise._ex~3aworm5-terminated%29%29" class="ex-end" data-pltdoc="x"></a></p>

<h4>26.3<tt>&nbsp;</tt><a name="(part._sec~3astruct-gen-rec)"></a>Структурная рекурсия по сравнению с генеративной рекурсией </h4>

<p>Шаблон для алгоритмов настолько общий, что включает в себя 
<a name="(idx._(gentag._629))"></a>структурно рекурсивные функции. Рассмотрим левую часть 
<a href="#%28counter._%28figure._fig~3agenerative-vs-structural%29%29" data-pltdoc="x">рисунка&nbsp;<span class="FigureRef">153</span></a>. Этот шаблон предназначен для 
работы с одним тривиальным предложением и одним <a name="(idx._(gentag._630))"></a>шагом
генерации. Если заменить <span class="RktSym">trivial?</span> на <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span> и <span class="RktSym">generate</span> на
<span class="RktSym">generate</span> with
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span>, мы получаем
шаблон для функций обработки списков; см. правую часть  
<a href="#%28counter._%28figure._fig~3agenerative-vs-structural%29%29" data-pltdoc="x">рисунка&nbsp;<span class="FigureRef">153</span></a>.</p>

<blockquote class="Figure"><a name="(counter._(figure._fig~3agenerative-vs-structural))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table cellspacing="0" cellpadding="0"><tbody><tr><td valign="top"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">general</span><span class="hspace">&nbsp;</span><span class="RktSym">P</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">trivial?</span><span class="hspace">&nbsp;</span><span class="RktSym">P</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">solve</span><span class="hspace">&nbsp;</span><span class="RktSym">P</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">combine-solutions</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">P</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">general</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">generate</span><span class="hspace">&nbsp;</span><span class="RktSym">P</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></td><td valign="top">

<p><span class="hspace">&nbsp;</span></p>

</td><td valign="top"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">special</span><span class="hspace">&nbsp;</span><span class="RktSym">P</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">P</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">solve</span><span class="hspace">&nbsp;</span><span class="RktSym">P</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">combine-solutions</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">P</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">special</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">P</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;153: </span>От генеративной к структурной рекурсии </span></p>

</blockquote>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3agenerative-length))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;437. Определите <span class="RktSym">solve</span>
и <span class="RktSym">combine-solutions</span> так, чтобы
</div><div class="SIntrapara"><ul><li>

<p><span class="RktSym">special</span> вычисляла длину своего ввода,</p>

</li><li>

<p><span class="RktSym">special</span> делало отритцательным каждое число в данном списке чисел, и</p>

</li><li>

<p><span class="RktSym">special</span> переводит указанный список строк в верхний регистр.</p>

</li></ul></div><div class="SIntrapara">Какие выводы вы сделаете из этих упражнений? 
<a href="#%28counter._%28exercise._ex~3agenerative-length%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p>Теперь вы можете задаться вопросом, есть ли реальная разница между 
<a name="(idx._(gentag._631))"></a>структурным рекурсивным проектированием и 
проектированием для <a name="(idx._(gentag._632))"></a>генеративной рекурсии. Наш ответ - 
«это зависит от обстоятельств». Конечно, можно сказать, что все функции, использующие 
структурную рекурсию, являются лишь частными случаями порождающей рекурсии. 
Однако это отношение «все равно» бесполезно, если мы хотим понять процесс 
проектирования функций. Он смешивает два вида проектирования, которые требуют разных форм 
знаний и имеют разные последствия. Один полагается на систематический анализ данных и 
не более того; другой требует глубокого, часто математического, понимания самого 
<a name="(idx._(gentag._633))"></a>процесса  решения проблем. Один приводит программистов 
к естественному завершению функций; другой требует аргумента завершения. Объединение 
этих двух подходов бесполезно. </p>

<h4>26.4<tt>&nbsp;</tt><a name="(part._sec~3achoice)"></a>Делаем выбор</h4>

<p>Когда вы взаимодействуете с функцией <span class="RktSym">f</span>, которая сортирует 
списки чисел, вы не можете узнать, является ли <span class="RktSym">f</span> 
<span class="RktSym">sort&lt;</span> или  <span class="RktSym">quick-sort&lt;</span>. 
Обе функции ведут себя наблюдаемым образом эквивалентно.
<span class="refelem"><span class="refcolumn"><span class="refcontent"><span style="font-style: italic">Наблюдаемая эквивалентность</span> - центральная концепция изучения 
языков программирования.
</span></span></span>  
Возникает вопрос, какой из двух языков программирования должен обеспечивать. В более общем 
плане, когда мы можем спроектировать функцию, используя 
<a name="(idx._(gentag._634))"></a>структурную рекурсию и 
<a name="(idx._(gentag._635))"></a>генеративную рекурсию, мы должны выяснить, 
какую из них выбрать. 
</p>

<p></p>

<div class="SIntrapara">Чтобы проиллюстрировать последствия этого выбора, мы обсудим 
классический пример из математики: задачу нахождения наибольшего общего делителя (НОД - 
greatest common  divisor - <span style="font-style: italic">gcd</span>) двух натуральных
положительных чисел.
<span class="refelem"><span class="refcolumn"><span class="refcontent">Джон Стоун предложил 
в качестве подходящего примера наибольший общий делитель.</span></span></span>  
Все такие числа имеют общий делитель 1. Иногда - скажем, 2 и 3 - это также единственный 
общий делитель. И 6, и 25 - числа с несколькими делителями:
</div><div class="SIntrapara"><ul><li>

<p>6 без остатка делится на 1, 2, 3 и 6;</p>

</li><li>

<p>25 без остатка делится на 1, 5 и 25.</p>

</li></ul></div><div class="SIntrapara">И все же их наибольший общий делитель равен 1. 
Напротив, 18 и 24 имеют много общих делителей, а их наибольший общий делитель равен 6:
</div><div class="SIntrapara"><ul><li>

<p>18 делится на 1, 2, 3, 6, 9 и 18 без остатка;</p>

</li><li>

<p>24 делится на 1, 2, 3, 4, 6, 8, 12 и 24 без остатка.</p>

</li></ul></div>

<p></p>

<p></p>

<div class="SIntrapara">Выполнить первые три шага рецепта разработки несложно:  <a name="(idx._(gentag._636))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt">[&gt;= 1] </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt">[&gt;= 1] -&gt; </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds the greatest common divisor of </span><span class="RktSym">n</span><span class="RktCmt"> and </span><span class="RktSym">m</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29" class="RktValLink" data-pltdoc="x">gcd</a></span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">25</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29" class="RktValLink" data-pltdoc="x">gcd</a></span><span class="hspace">&nbsp;</span><span class="RktVal">18</span><span class="hspace">&nbsp;</span><span class="RktVal">24</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29" class="RktValLink" data-pltdoc="x">gcd</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Сигнатура определяет входные данные как натуральные числа, большие или равные 
<span class="RktVal">1</span>.</div>

<p></p>

<p>Отсюда мы разрабатываем как структурное, так и генеративно-рекурсивное решение. 
Поскольку эта часть книги посвящена генеративной рекурсии, мы просто представляем 
структурное решение на <a href="#%28counter._%28figure._fig~3astructural-gcd%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">154</span></a> и оставляем конструктивные 
идеи упражнениям. Просто обратите внимание, что <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span><span class="stt"> </span><span class="RktSym">n</span><span class="stt"> </span><span class="RktSym">i</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span><span class="stt"> </span><span class="RktSym">m</span><span class="stt"> </span><span class="RktSym">i</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span> кодирует идею о том, что и
<span class="RktSym">n</span>, и <span class="RktSym">m</span> «без остатка» делятся 
на <span class="RktSym">i</span>.</p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._637))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._(figure._fig~3astructural-gcd))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcd-structural</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">determines the gcd of </span><span class="RktSym">n</span><span class="RktCmt"> and </span><span class="RktSym">m</span><span class="RktCmt"> less than </span><span class="RktSym">i</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">greatest-divisor-&lt;=</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">i</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">greatest-divisor-&lt;=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">greatest-divisor-&lt;=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._min%29%29" class="RktValLink" data-pltdoc="x">min</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;154: </span>Нахождение наибольшего общего делителя с помощью структурной рекурсии</span></p>

</blockquote></div>

<p></p>

<p><a name="(counter._(exercise._ex~3aexplain-structural-gcd))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;438. По вашим словам: как работает 
<span class="RktSym">greatest-divisor-&lt;=</span>? Используйте рецепт разработки, 
чтобы подобрать нужные слова. Почему локально определенный 
<span class="RktSym">greatest-divisor-&lt;=</span> повторяется на  
<span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._min%29%29" class="RktValLink" data-pltdoc="x">min</a></span><span class="stt"> </span><span class="RktSym">n</span><span class="stt"> </span><span class="RktSym">m</span><span class="RktPn">)</span>? 
<a href="#%28counter._%28exercise._ex~3aexplain-structural-gcd%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara">Хотя разработка  <span class="RktSym">gcd-structural</span> довольно 
прост, она также наивна. Она просто проверяет каждое число между меньшим из 
<span class="RktSym">n</span> и <span class="RktSym">m</span> и <span class="RktVal">1</span>,
делит ли оно  <span class="RktSym">n</span> и <span class="RktSym">m</span> поровну, и 
возвращает первое такое число. Для малых <span class="RktSym">n</span> и
<span class="RktSym">m</span> это отлично работает. Однако рассмотрим следующий пример:
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym">gcd-structural</span><span class="hspace">&nbsp;</span><span class="RktVal">101135853</span><span class="hspace">&nbsp;</span><span class="RktVal">45014640</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">Результат - <span class="RktVal">177</span>. 
Для этого <span class="RktSym">gcd-structural</span> проверяет условие «равномерно делимого» 
для 45014640, то есть проверяет <span style="font-style: italic"></span>4<span style="font-style: italic"></span>5<span style="font-style: italic"></span>0<span style="font-style: italic"></span>1<span style="font-style: italic"></span>4<span style="font-style: italic"></span>6<span style="font-style: italic"></span>4<span style="font-style: italic"></span>0<span style="font-style: italic"> - </span>1<span style="font-style: italic"></span>7<span style="font-style: italic"></span>7<span style="font-style: italic"></span> остатков. Проверка этого количества
остатков - дважды! - требует больших усилий, и даже достаточно быстрым компьютерам требуется
время для выполнения этой задачи.</div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3agcd-struct-time))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;439. Скопируйте <span class="RktSym">gcd-structural</span> 
в DrRacket и вычислите 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._time%29%29" class="RktStxLink" data-pltdoc="x">time</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcd-structural</span><span class="hspace">&nbsp;</span><span class="RktVal">101135853</span><span class="hspace">&nbsp;</span><span class="RktVal">45014640</span><span class="RktPn">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">в области взаимодействия. 
<a href="#%28counter._%28exercise._ex~3agcd-struct-time%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p></p>

<div class="SIntrapara">Поскольку математики давно осознали неэффективность этой 
структурной функции, они глубоко изучили проблему поиска делителей. Основная идея 
заключается в том, что
</div><div class="SIntrapara"><blockquote>

<p>для двух натуральных чисел, <span class="RktSym">L</span> для <span style="font-weight: bold">большого(large)</span> и <span class="RktSym">S</span> для <span style="font-weight: bold">меньшего(small)</span>, наибольший общий делитель равен наибольшему общему делителю
<span class="RktSym">S</span> и остатку от <span class="RktSym">L</span>, деленному на 
<span class="RktSym">S</span>.</p>

</blockquote></div><div class="SIntrapara">Вот как мы можем сформулировать это понимание в 
виде уравнения: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29" class="RktValLink" data-pltdoc="x">gcd</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29" class="RktValLink" data-pltdoc="x">gcd</a></span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="RktPn">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">Поскольку <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span><span class="stt"> </span><span class="RktSym">L</span><span class="stt"> </span><span class="RktSym">S</span><span class="RktPn">)</span> меньше, чем <span class="RktSym">L</span> и <span class="RktSym">S</span>,
использование <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29" class="RktValLink" data-pltdoc="x">gcd</a></span> в правой части в первую очередь потребляет <span class="RktSym">S</span>.</div>

<p></p>

<p></p>

<div class="SIntrapara">Вот как это понимание применимо к нашему небольшому примеру:
</div><div class="SIntrapara"><ul><li>

<p>Данные числа <span class="RktVal">18</span> и <span class="RktVal">24</span>.</p>

</li><li>

<p>По интуиции у них такой же gcd как  <span class="RktVal">18</span> и <span class="RktVal">6</span>.</p>

</li><li>

<p> И у этих двоих наибольший общий делитель такой же, как у <span class="RktVal">6</span> и
<span class="RktVal">0</span>.</p>

</li></ul></div><div class="SIntrapara">Теперь кажется, что мы застряли, потому что 
<span class="RktVal">0</span> - это неожиданно. Но <span class="RktVal">0</span> можно 
без остатка разделить на любое число, что означает, что мы нашли ответ: 
<span class="RktVal">6</span>.</div>

<p></p>

<p></p>

<div class="SIntrapara">Работа над примером не только подтверждает базовое понимание, 
но также предлагает, как превратить его в алгоритм:
</div><div class="SIntrapara"><ul><li>

<p>когда меньшее из чисел равно <span class="RktVal">0</span>, мы сталкиваемся с 
тривиальным случаем;</p>

</li><li>

<p>большее из двух чисел является решением в тривиальном случае;</p>

</li><li>

<p>для создания новой проблемы требуется одна операция <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span>; а также</p>

</li><li>

<p>Вышеприведенное уравнение говорит нам, что ответ на вновь возникшую проблему также 
является ответом на первоначально данную проблему.</p>

</li></ul></div><div class="SIntrapara">Короче говоря, ответы на четыре вопроса о рецепте 
разработки выпадают. </div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._638))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._(figure._fig~3agenerative-gcd))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcd-generative</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt">[&gt;= 1] </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt">[&gt;=1] -&gt; </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">generative recursion</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29" class="RktValLink" data-pltdoc="x">gcd</a></span><span class="stt"> </span><span class="RktSym">L</span><span class="stt"> </span><span class="RktSym">S</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">==</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29" class="RktValLink" data-pltdoc="x">gcd</a></span><span class="stt"> </span><span class="RktSym">S</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span><span class="stt"> </span><span class="RktSym">L</span><span class="stt"> </span><span class="RktSym">S</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktCmt"> </span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._max%29%29" class="RktValLink" data-pltdoc="x">max</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._min%29%29" class="RktValLink" data-pltdoc="x">min</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;155: </span>Нахождение наибольшего общего делителя с помощью порождающей(генеративной) рекурсии


</blockquote></div>

<p></p>

<p>На <a href="#%28counter._%28figure._fig~3agenerative-gcd%29%29" data-pltdoc="x">Рисунке&nbsp;<span class="FigureRef">155</span></a>  представлено определение 
алгоритма. Определение <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span> вводящее  рабочую лошадку функции: 
<span class="RktSym">clever-gcd</span>. Её первая линия <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span>
обнаруживает тривиальный случай, сравнивая <span class="RktSym">smaller</span> с 
<span class="RktVal">0</span>, и дает соответствующее решение. Генеративный шаг использует 
<span class="RktSym">smaller</span> в качестве нового первого аргумента и 
<span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span><span class="stt"> </span><span class="RktSym">large</span><span class="stt"> </span><span class="RktSym">small</span><span class="RktPn">)</span> в качестве нового второго аргумента 
для  <span class="RktSym">clever-gcd</span>.</p>

<p></p>

<div class="SIntrapara">Если мы теперь используем <span class="RktSym">gcd-generative</span> 
в нашем примере выше,
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym">gcd-generative</span><span class="hspace">&nbsp;</span><span class="RktVal">101135853</span><span class="hspace">&nbsp;</span><span class="RktVal">45014640</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">мы видим, что ответ почти мгновенный. Ручное
вычисление показывает, что <span class="RktSym">clever-gcd</span> повторяется только девять раз,
прежде чем даст решение: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktVal">101135853</span><span class="hspace">&nbsp;</span><span class="RktVal">45014640</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktVal">45014640</span><span class="hspace">&nbsp;</span><span class="RktVal">11106573</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktVal">11106573</span><span class="hspace">&nbsp;</span><span class="RktVal">588348</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktVal">588348</span><span class="hspace">&nbsp;</span><span class="RktVal">516309</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktVal">516309</span><span class="hspace">&nbsp;</span><span class="RktVal">72039</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktVal">72039</span><span class="hspace">&nbsp;</span><span class="RktVal">12036</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktVal">12036</span><span class="hspace">&nbsp;</span><span class="RktVal">11859</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktVal">11859</span><span class="hspace">&nbsp;</span><span class="RktVal">177</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">clever-gcd</span><span class="hspace">&nbsp;</span><span class="RktVal">177</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Это также означает, что она проверяет только девять условий <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span>, что явно намного меньше затрат, чем требует 
<span class="RktSym">gcd-structural</span>.</div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3agcd-gen-time))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;440. Скопируйте <span class="RktSym">gcd-generative</span>
в область определений DrRacket и вычислите 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._time%29%29" class="RktStxLink" data-pltdoc="x">time</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcd-generative</span><span class="hspace">&nbsp;</span><span class="RktVal">101135853</span><span class="hspace">&nbsp;</span><span class="RktVal">45014640</span><span class="RktPn">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">в области взаимодействия. <a href="#%28counter._%28exercise._ex~3agcd-gen-time%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p>Теперь вы можете подумать, что разработка генеративной рекурсии обнаружила гораздо 
более быстрое решение проблемы <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._gcd%29%29" class="RktValLink" data-pltdoc="x">gcd</a></span>, и вы можете
заключить, что генеративная рекурсия - это всегда правильный путь. Это суждение слишком
опрометчиво по трем причинам. Во-первых, даже хорошо разработанный алгоритм не всегда быстрее,
чем эквивалентная структурно-рекурсивная функция. Например, 
<span class="RktSym">quick-sort&lt;</span> выигрывает только для больших списков; для 
маленьких стандартная функция <span class="RktSym">sort&lt;</span> работает быстрее. 
Хуже того, плохо спроектированный алгоритм может нанести ущерб производительности программы. 
Во-вторых, обычно проще разработать функцию, используя рецепт структурной рекурсии. 
И наоборот, разработка алгоритма требует представления о том, как создавать новые проблемы,
 - шаг, который часто требует глубокого понимания. Наконец, программисты, читающие функции, 
могут легко понять структурно рекурсивные функции даже без большой документации. 
Однако генеративный этап алгоритма основан на «эврике!» и без хорошего объяснения его 
трудно понять будущим читателям, в том числе и в более старых версиях вас самих. </p>

<p>Опыт показывает, что большинство функций программы используют структурное проектирование; 
лишь немногие используют генеративную рекурсию. Когда мы сталкиваемся с ситуацией, 
когда разработка может использовать рецепт либо для структурной, либо для генеративной 
рекурсии, лучший подход - начать со структурной версии. Если результат оказывается слишком
медленным для поставленной задачи - и только тогда - пора исследовать использование 
генеративной рекурсии. </p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3aquick-sort-time1))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;441. Вычислите
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="hspace">&nbsp;</span><span class="RktVal">16</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">в ручную. Показывать только те строки, которые
представляют новый рекурсивный вызов <span class="RktSym">quick-sort&lt;</span>. Сколько 
требуется рекурсивных применений <span class="RktSym">quick-sort&lt;</span>? Сколько 
рекурсивных применений функции <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span>? 
Предложите общее правило для списка длиной  <span class="RktSym">n</span>.</div>

<p></p>

<p></p>

<div class="SIntrapara">Вычислите
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym">quick-sort&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="hspace">&nbsp;</span><span class="RktVal">14</span><span class="RktPn">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">в ручную. Сколько требуется рекурсивных применений
<span class="RktSym">quick-sort&lt;</span>? Сколько рекурсивных применений 
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span>? 
Противоречит ли это первой части упражнения? 
<a href="#%28counter._%28exercise._ex~3aquick-sort-time1%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p><a name="(counter._(exercise._ex~3aquick-sort-time2))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;442. Добавьте <span class="RktSym">sort&lt;</span> и
<span class="RktSym">quick-sort&lt;</span> в область определений. Выполните тесты функций, 
чтобы убедиться, что они работают на базовых примерах. Также разработайте 
<span class="RktSym">create-tests</span>, функцию, которая случайным образом создает 
большие тестовые примеры. Затем изучите, насколько быстро каждый из них работает на
различных списках. </p>

<p>Подтверждает ли эксперимент утверждение о том, что функция простой сортировки 
<span class="RktSym">sort&lt;</span> часто выигрывает у функции быстрой сортировки 
<span class="RktSym">quick-sort&lt;</span>, для коротких списков и наоборот?</p>

<p>Определите точку перехода. Используйте её для создания умной функции сортировки, 
которая ведет себя как <span class="RktSym">quick-sort&lt;</span> для больших списков и 
как <span class="RktSym">sort&lt;</span> для списков ниже этой точки перехода. 
Сравните с <a href="#%28counter._%28exercise._ex~3aquick-sort-switch%29%29" data-pltdoc="x">упражнением&nbsp;427</a>. 
<a href="#%28counter._%28exercise._ex~3aquick-sort-time2%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3agcd-structural1))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;443. Учитывая материал заголовка для 
<span class="RktSym">gcd-structural</span>, наивное использование рецепта разработки 
может использовать следующий шаблон или какой-либо его вариант:  
<a name="(idx._(gentag._639))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcd-structural</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29" class="RktValLink" data-pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3e%29%29" class="RktValLink" data-pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcd-structural</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29" class="RktValLink" data-pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29" class="RktValLink" data-pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcd-structural</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29" class="RktValLink" data-pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcd-structural</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sub1%29%29" class="RktValLink" data-pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">m</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Почему с помощью этой стратегии невозможно найти делитель? href="#%28counter._%28exercise._ex~3agcd-structural1%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p><a name="(counter._(exercise._ex~3agcd-structural2))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;444. <a href="#%28counter._%28exercise._ex~3agcd-structural1%29%29" data-pltdoc="x">Упражнение&nbsp;443</a>  означает, что проектирование для 
<span class="RktSym">gcd-structural</span> требует некоторого планирования и подхода 
«разработки с помощью композиции».</p>

<p></p>

<div class="SIntrapara">Само объяснение «наибольшего общего знаменателя/делителя» 
предполагает двухэтапный подход. Сначала создайте функцию, которая может вычислять 
список делителей натурального числа.
<span class="refelem"><span class="refcolumn"><span class="refcontent">В идеале следует
использовать наборы(множества), а не списки.</span></span></span> 
 Во-вторых, создайте функцию, которая выбирает наибольшее общее число в списке делителей 
<span class="RktSym">n</span> и списке делителей <span class="RktSym">m</span>. 
Общая функция будет выглядеть так:  
<a name="(idx._(gentag._640))"></a>
<a name="(idx._(gentag._641))"></a>
<a name="(idx._(gentag._642))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gcd-structural</span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">largest-common</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">divisors</span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">divisors</span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt">[&gt;= 1] </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt">[&gt;= 1] -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">computes the divisors of </span><span class="RktSym">l</span><span class="RktCmt"> smaller or equal to </span><span class="RktSym">k</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">divisors</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt">] [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt">] -&gt; </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds the largest number common to both </span><span class="RktSym">k</span><span class="RktCmt"> and </span><span class="RktSym">l</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">largest-common</span><span class="hspace">&nbsp;</span><span class="RktSym">k</span><span class="hspace">&nbsp;</span><span class="RktSym">l</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Как вы думаете, почему <span class="RktSym">divisors</span> потребляют два числа? 
Почему она использует <span class="RktSym">S</span> в качестве первого аргумента в 
обоих случаях использования? 
<a href="#%28counter._%28exercise._ex~3agcd-structural2%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<h3>27<tt>&nbsp;</tt><a name="(part._ch~3agen-rec-samples)"></a>Вариации на тему</h3>

<p>Разработка алгоритма начинается с неформального описания процесса создания проблемы, 
которую легче решить, чем данная, и решение которой способствует решению данной 
проблемы. Придумывание такой идеи требует вдохновения, погружения в прикладную область 
и опыта работы с множеством различных примеров. </p>

<p>В этой главе представлено несколько наглядных примеров алгоритмов. Некоторые 
заимствованы непосредственно из математики, которая является источником многих идей; 
другие происходят из вычислительных настроек. Первый пример - это графическая иллюстрация 
нашего принципа: треугольник Серпинского. Второй объясняет принцип «разделяй и властвуй» 
на простом математическом примере поиска корня функции. Затем показано, как превратить эту 
идею в быстрый алгоритм поиска последовательностей, широко используемое применение. 
Третий раздел касается “parsing”(синтаксического анализа) последовательностей 
<a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a>s, что также является распространенной проблемой 
в реальном программировании. </p>

<h4>27.1<tt>&nbsp;</tt><a name="(part._sec~3afractal)"></a>Фракталы, первая проба</h4>

<p>Фракталы играют важную роль в вычислительной геометрии. Флейк пишет в 
<span style="font-style: italic">Вычислительной красоте природы</span> (The MIT Press, 1998), 
что «геометрию можно расширить, чтобы учесть объекты с дробной размерностью. Такие объекты,
известные как <span style="font-style: italic">fractals</span>(фракталы), очень близки 
к отображению богатства и разнообразия форм, встречающихся в природе. Фракталы обладают 
структурным самоподобием на нескольких ... масштабах, а это означает, что часть фрактала 
часто будет выглядеть как целое ». </p>

<blockquote class="Figure"><a name="(counter._(figure._fig~3asiepic))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered">

<p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_181.png" alt="image" width="390" height="355.7025033688162"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_182.png" alt="image" width="40" height="35.71281292110203"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_183.png" alt="image" width="42" height="37.71281292110203"></p>

</blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;156: </span>Треугольник Серпинского</span></p>

</blockquote>

<p>На <a href="#%28counter._%28figure._fig~3asiepic%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">156</span></a>  показан пример фрактальной формы, известной как 
треугольник Серпинского. Основная форма - (равносторонний) треугольник, как и в центре. 
Когда этот треугольник будет составлен достаточно много раз треугольным образом, мы получим 
крайнюю левую форму. </p>

<p>Крайнее правое изображение на  <a href="#%28counter._%28figure._fig~3asiepic%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">156</span></a> поясняет шаг генерации. 
Само по себе это говорит о том, что для треугольника найдите середину каждой стороны и 
соедините их друг с другом. Этот шаг дает четыре треугольника; повторите процесс для 
каждого из внешних из этих трех треугольников, если только эти треугольники не слишком 
маленькие. </p>

<p></p>

<div class="SIntrapara">Альтернативное объяснение, хорошо подходящее для функций композиции 
форм в библиотеке <span class="sroman"> <span class="Smaller"><span style="font-style: italic">2htdp/image</span></span> </span>,
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Этим решением мы обязаны Марку Смиту.</span></span></span> 
основано на переходе от изображения в центре к изображению справа. Сопоставив два 
центральных треугольника и поместив одну копию над этими двумя, мы также получим форму справа: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">s-triangle</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td>

<p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_184.png" alt="image" width="47" height="42"></p>

</td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29" class="RktValLink" data-pltdoc="x">beside</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s-triangle</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s-triangle</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>

<p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_185.png" alt="image" width="87" height="42"></p>

</td></tr><tr><td><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29" class="RktValLink" data-pltdoc="x">above</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s-triangle</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29" class="RktValLink" data-pltdoc="x">beside</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s-triangle</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s-triangle</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></td></tr><tr><td>

<p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_186.png" alt="image" width="87" height="76"></p>

</td></tr></tbody></table></blockquote></div>

<p></p>

<p>В этом разделе используется альтернативное описание для разработки алгоритма 
Серпинского; <a href="part_six.html#%28part._sec~3afractal-acc%29" data-pltdoc="x">Аккумуляторы как
результаты</a> имеет дело с первым описанием. Учитывая, что цель состоит в том, чтобы 
создать изображение равностороннего треугольника, мы кодируем задачу с помощью 
(положительного) числа - длины стороны треугольника. Это решение дает сигнатуру, 
предназначение и заголовок: </p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._643))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._image%29" class="techoutside" data-pltdoc="x"><span class="techinside">Image</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">creates Sierpinski triangle of size </span><span class="RktSym">side</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sierpinski</span><span class="hspace">&nbsp;</span><span class="RktSym">side</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._triangle%29%29" class="RktValLink" data-pltdoc="x">triangle</a></span><span class="hspace">&nbsp;</span><span class="RktSym">side</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">outline</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara">Пришло время обратиться к четырем вопросам генеративной рекурсии:
</div><div class="SIntrapara"><ul><li>

<p>Когда данное число настолько мало, что рисовать внутри него треугольники бессмысленно, 
проблема тривиальна.</p>

</li><li>

<p>В этом случае достаточно построить треугольник.</p>

</li><li>

<p>В противном случае алгоритм должен сгенерировать треугольник Серпинского размером 
<span style="font-style: italic">side / </span>2<span style="font-style: italic"></span>, 
поскольку сопоставление двух таких треугольников в любом направлении дает один треугольник 
размера <span style="font-style: italic">side</span>(стороны).</p>

</li><li>

<p></p>

<div class="SIntrapara"> Если <span class="RktSym">half-sized</span>(половинный размер) - 
это треугольник Серпинского с размером <span style="font-style: italic">side / </span>2<span style="font-style: italic"></span>, то 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29" class="RktValLink" data-pltdoc="x">above</a></span><span class="hspace">&nbsp;</span><span class="RktSym">half-sized</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29" class="RktValLink" data-pltdoc="x">beside</a></span><span class="hspace">&nbsp;</span><span class="RktSym">half-sized</span><span class="hspace">&nbsp;</span><span class="RktSym">half-sized</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
это треугольник Серпинского с размером стороны -  <span style="font-style: italic">side</span>.</div>

<p></p>

</li></ul></div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._644))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._(figure._fig~3asierpinski-code))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">SMALL</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">a size measure in terms of pixels </span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">small-triangle</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._triangle%29%29" class="RktValLink" data-pltdoc="x">triangle</a></span><span class="hspace">&nbsp;</span><span class="RktSym">SMALL</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">outline</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._image%29" class="techoutside" data-pltdoc="x"><span class="techinside">Image</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">generative</span><span class="RktCmt"> creates Sierpinski Δ of size </span><span class="RktSym">side</span><span class="RktMeta"></span><span class="RktCmt"> by generating</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">one for </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29" class="RktValLink" data-pltdoc="x">/</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">side</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="RktCmt"> and placing one copy above two copies</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sierpinski</span><span class="hspace">&nbsp;</span><span class="RktSym">SMALL</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">small-triangle</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sierpinski</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym">SMALL</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29" class="RktValLink" data-pltdoc="x">above</a></span><span class="hspace">&nbsp;</span><span class="RktSym">small-triangle</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29" class="RktValLink" data-pltdoc="x">beside</a></span><span class="hspace">&nbsp;</span><span class="RktSym">small-triangle</span><span class="hspace">&nbsp;</span><span class="RktSym">small-triangle</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sierpinski</span><span class="hspace">&nbsp;</span><span class="RktSym">side</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">side</span><span class="hspace">&nbsp;</span><span class="RktSym">SMALL</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._triangle%29%29" class="RktValLink" data-pltdoc="x">triangle</a></span><span class="hspace">&nbsp;</span><span class="RktSym">side</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">outline</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">red</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">half-sized</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sierpinski</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29" class="RktValLink" data-pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="RktSym">side</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29" class="RktValLink" data-pltdoc="x">above</a></span><span class="hspace">&nbsp;</span><span class="RktSym">half-sized</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29" class="RktValLink" data-pltdoc="x">beside</a></span><span class="hspace">&nbsp;</span><span class="RktSym">half-sized</span><span class="hspace">&nbsp;</span><span class="RktSym">half-sized</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;157: </span>Алгоритм Серпинского</span></p>

</blockquote></div>

<p></p>

<p>С этими ответами легко определить функцию. На  
<a href="#%28counter._%28figure._fig~3asierpinski-code%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">157</span></a> представлены подробности. «Условие тривиальности» 
преобразуется в <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="stt"> </span><span class="RktSym">side</span><span class="stt"> </span><span class="RktSym">SMALL</span><span class="RktPn">)</span> для некоторой
константы <span class="RktSym">SMALL</span>(маленький). Для тривиального ответа функция
возвращает треугольник заданного размера. В рекурсивном случае выражение 
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span> вводит 
имя <span class="RktSym">half-sized</span> для треугольника Серпинского, который вдвое меньше указанного размера. После того, как рекурсивный вызов сгенерировал маленький треугольник Серпинского, он составляет это изображение с помощью сверху -  <span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._above%29%29" class="RktValLink" data-pltdoc="x">above</a></span>
 и сбоку - <span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._beside%29%29" class="RktValLink" data-pltdoc="x">beside</a></span>.</p>

<p></p>

<div class="SIntrapara">На рисунке выделены еще два момента. Во-первых, предназначение
формулируется как объяснение того, <span style="font-weight: bold">что</span> выполняет функция. 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">creates Sierpinski triangle of size </span><span class="RktSym">side</span><span class="RktMeta"></span><span class="RktCmt"> by </span>...</p>

</blockquote></div><div class="SIntrapara">и <span style="font-weight: bold">как</span>  
она достигает этой цели: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span>...<span class="RktCmt"> generating one of size </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29" class="RktValLink" data-pltdoc="x">/</a></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">side</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="RktCmt"> and </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">placing one copy above two composed copies</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Во-вторых, примеры иллюстрируют два возможных случая: один, если заданный размер 
достаточно мал, и второй, если размер все еще слишком велик. В последнем случае 
выражение, вычисляющее ожидаемое значение, в точности объясняет смысл 
предназначения. </div>

<p></p>

<p>Поскольку <span class="RktSym">sierpinski</span> основана на генеративной рекурсии, 
определение функции и тестирование - не последний шаг. Мы также должны учитывать, 
почему алгоритм завершается при любом заданном допустимом вводе. Ввод 
<span class="RktSym">sierpinski</span> - одно положительное число. Если число меньше 
<span class="RktSym">SMALL</span>, алгоритм завершается. В противном случае рекурсивный 
вызов использует число, которое вдвое меньше заданного. Следовательно, алгоритм должен 
завершиться для всех положительных <span class="RktSym">side</span>, если 
<span class="RktSym">SMALL</span> также положителен.</p>

<p>Один взгляд на процесс Серпинского состоит в том, что он делит проблему пополам 
до тех пор, пока она не станет решаемой немедленно. Проявив немного воображения, 
вы увидите, что этот процесс можно использовать для поиска чисел с определенными 
свойствами. В следующем разделе эта идея подробно объясняется. </p>

<h4>27.2<tt>&nbsp;</tt><a name="(part._sec~3abinary-search)"></a>Бинарный поиск</h4>

<p></p>

<div class="SIntrapara">Прикладные математики моделируют реальный мир с помощью 
нелинейных уравнений, а затем пытаются их решить. В частности, они переводят 
задачи в функцию  <span style="font-style: italic">f</span> из чисел в числа и 
ищут некоторое число <span style="font-style: italic">r</span> такое, что
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><span style="font-style: italic">f</span>(<span style="font-style: italic">r</span>)<span style="font-style: italic"> = </span>0<span style="font-style: italic"></span>.</p>

</blockquote></div><div class="SIntrapara">Значение  <span style="font-style: italic">r</span>
 называется <span style="font-style: italic">root</span>(корнем)
<span style="font-style: italic">f</span>.</div>

<p></p>

<blockquote class="Herefigure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered">

<p><img src="part_five_files/pict_187.png" alt="image" width="400" height="400"></p>

</blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3aroot))" x-target-lift="Figure"></a>Рисуноск&nbsp;158: </span>Числовая функция <span style="font-style: italic">f</span> с корнем
на интервале <span style="font-style: italic"></span>[<span style="font-style: italic">a,b</span>]<span style="font-style: italic"></span> (этап 1)</span></p>

</blockquote>

<p></p>

<div class="SIntrapara">Вот проблема из физической области:
</div><div class="SIntrapara"><blockquote>

<p><span style="font-weight: bold">Пример задачи</span> Ракета летит с постоянной скоростью 
<span style="font-style: italic">v</span> миль в час по прямой к какой-то цели на 
расстоянии <span style="font-style: italic">d</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>0<span style="font-style: italic"></span></span><span style="font-style: italic"></span> миль. Затем он ускоряется со скоростью 
<span style="font-style: italic">a</span> миль в час в квадрате за 
<span style="font-style: italic">t</span> часов. Когда она поразит цель? </p>

</blockquote></div><div class="SIntrapara">Физика говорит нам, что пройденное расстояние 
зависит от времени:
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><span style="font-style: italic">d</span>(<span style="font-style: italic">t</span>)<span style="font-style: italic"> = </span>(<span style="font-style: italic">v * t + </span>1<span style="font-style: italic">/</span>2<span style="font-style: italic"> * a * t</span><span style="vertical-align: super; font-size: 80%"><span style="font-style: italic"></span>2<span style="font-style: italic"></span></span><span style="font-style: italic"></span>)<span style="font-style: italic"></span></p>

</blockquote></div><div class="SIntrapara">Вопрос о том, когда она попадает в цель, 
требует от нас найти время <span style="font-style: italic">t</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>0<span style="font-style: italic"></span></span><span style="font-style: italic"></span>, при котором объект достигает 
желаемой цели: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><span style="font-style: italic">d</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>0<span style="font-style: italic"></span></span><span style="font-style: italic"> = </span>(<span style="font-style: italic">v * t</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>0<span style="font-style: italic"></span></span><span style="font-style: italic"> + </span>1<span style="font-style: italic">/</span>2<span style="font-style: italic"> * a * t</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>0<span style="font-style: italic"></span></span><span style="font-style: italic"></span><span style="vertical-align: super; font-size: 80%"><span style="font-style: italic"></span>2<span style="font-style: italic"></span></span><span style="font-style: italic"></span>)<span style="font-style: italic"></span></p>

</blockquote></div><div class="SIntrapara">Из алгебры мы знаем, что это квадратное 
уравнение и что такие уравнения можно решить, если span style="font-style: italic">d</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>0<span style="font-style: italic"></span></span><span style="font-style: italic"></span>, <span style="font-style: italic">a</span> и <span style="font-style: italic">v</span> 
удовлетворяют определенным условиям.
</div>

<p></p>

<p>Обычно такие задачи требуют большей сложности, чем квадратные уравнения. 
В ответ математики потратили последние несколько столетий на разработку методов 
поиска корней для различных типов функций. В этом разделе мы изучаем решение, 
основанное на теореме о промежуточном значении(<span style="font-style: italic">Intermediate Value
Theorem</span> - IVT), раннем результате анализа. Полученный алгоритм является 
основным примером порождающей(генеративной) рекурсии, основанной на математической теореме. 
Ученые-компьютерщики обобщили его на алгоритм бинарного поиска(<span style="font-style: italic">binary search</span>). </p>

<p>Теорема о промежуточном значении утверждает, что непрерывная функция 
<span style="font-style: italic">f</span> имеет корень в интервале 
<span style="font-style: italic"></span>[<span style="font-style: italic">a,b</span>]<span style="font-style: italic"></span> если <span style="font-style: italic">f</span>(<span style="font-style: italic">a</span>)<span style="font-style: italic"></span> и <span style="font-style: italic">f</span>(<span style="font-style: italic">b</span>)<span style="font-style: italic"></span>
находятся на противоположных сторонах оси x. 
Под <span style="font-style: italic">continuous</span>(непрерывной) мы подразумеваем функцию,
которая не «прыгает», не имеет пропусков и выполняется «плавным» путем.</p>

<p><a href="#%28counter._%28figure._fig~3aroot%29%29" data-pltdoc="x">Рисунок&nbsp;<span class="FigureRef">158</span></a>  иллюстрирует теорему о промежуточном значении. 
Функция <span style="font-style: italic">f</span> - это непрерывная функция, о чем 
свидетельствует непрерывный гладкий график. Он находится ниже оси x в точке 
<span style="font-style: italic">a</span> и выше в точке <span style="font-style: italic">b</span>,
 и действительно, она пересекает ось x где-то в этом интервале, обозначенном на рисунке 
как “range 1”(диапазон 1).
</p>

<p></p>

<div class="SIntrapara">Теперь посмотрим на середину между 
<span style="font-style: italic">a</span> и  <span style="font-style: italic">b</span>:
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><span style="font-style: italic">m = </span>(<span style="font-style: italic">a+b</span>)<span style="font-style: italic"> / </span>2<span style="font-style: italic"></span></p>

</blockquote></div><div class="SIntrapara">Она разбивает интервал <span style="font-style: italic"></span>[<span style="font-style: italic">a,b</span>]<span style="font-style: italic"></span> на два меньших интервала одинакового размера. Теперь мы можем вычислить значение 
<span style="font-style: italic">f</span> в точке <span style="font-style: italic">m</span> 
и посмотреть, ниже ли оно <span style="font-style: italic"></span>0<span style="font-style: italic"></span> или выше. Здесь <span style="font-style: italic">f</span>(<span style="font-style: italic">m</span>)<span style="font-style: italic"> &gt; </span>0<span style="font-style: italic"></span>, поэтому, согласно теореме о промежуточном значении, корень находится в левом
интервале: <span style="font-style: italic"></span>[<span style="font-style: italic">a,m</span>]<span style="font-style: italic"></span>. Наш рисунок подтверждает это, потому что 
корень находится в левой половине интервала, обозначенного “range 2”(диапазон 2) на   
<a href="#%28counter._%28figure._fig~3aroot%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">158</span></a>.</div>

<p></p>

<p></p>

<div class="SIntrapara">Теперь у нас есть описание ключевого шага в процессе поиска корня. 
Затем мы переводим это описание в алгоритм ISL+. Наша первая задача - заявить о его цели,
т.е предназначении. Очевидно, что алгоритм использует функцию и границы интервала, в 
котором мы ожидаем найти корень:  
<a name="(idx._(gentag._645))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span>...</td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-root</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Эти три параметра не могут быть просто функциями и числами. Чтобы 
<span class="RktSym">find-root</span> работал, мы должны предположить, что 
выполняется следующее: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
то есть <span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">left</span><span class="RktPn">)</span> и <span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">right</span><span class="RktPn">)</span>  должны быть на противоположных сторонах оси x. </div>

<p></p>

<p></p>

<div class="SIntrapara">Затем нам нужно исправить результат функции и сформулировать 
предназначение. Проще говоря, <span class="RktSym">find-root</span>  находит интервал, 
содержащий корень. Поиск делит интервал до тех пор, пока его размер <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="stt"> </span><span class="RktSym">right</span><span class="stt"> </span><span class="RktSym">left</span><span class="RktPn">)</span>, справа налево, не станет достаточно
маленьким, скажем, меньше некоторой постоянной <span class="RktSym">ε</span>.
<span class="refelem"><span class="refcolumn"><span class="refcontent">
DrRacket позволяет использовать греческие символы, такие как <span class="RktSym">ε</span>. 
Но вместо этого вы также можете написать  <span class="RktSym">EPSILON</span>.
</span></span></span> 
В этот момент функция может выдать один из трех результатов: левую границу, правую границу 
или представление интервала. Любой из них полностью идентифицирует интервал, и, поскольку
возвращать числа проще, мы выбираем левую границу. Вот полный материал заголовка:
<a name="(idx._(gentag._646))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">determines </span><span class="RktSym">R</span><span class="RktCmt"> such that </span><span class="RktSym">f</span><span class="RktCmt"> has a root in [</span><span class="RktSym">R</span><span class="RktCmt">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="stt"> </span><span class="RktSym">R</span><span class="stt"> </span><span class="RktSym">ε</span><span class="RktPn">)</span><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">assume</span><span class="RktCmt"> </span><span class="RktSym">f</span><span class="RktCmt"> is continuous </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">(2) </span><span class="Smaller"><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">left</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">0</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">right</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">right</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">0</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">left</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">generative</span><span class="RktCmt"> divides interval in half, the root is in </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">one of the two halves, picks according to (2)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-root</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3afind-root-example))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;445. Рассмотрим следующее определение функции: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Оно определяет бином, для которого мы можем определить его корни вручную: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td>

<p><span class="RktRes">0</span></p>

</td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span></td></tr><tr><td>

<p><span class="RktRes">0</span></p>

</td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Используйте <span class="RktSym">poly</span>, чтобы сформулировать 
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29" class="RktStxLink" data-pltdoc="x">check-satisfied</a></span> тест для 
 <span class="RktSym">find-root</span>. <a name="(idx._(gentag._647))"></a></div>

<p></p>

<p></p>

<div class="SIntrapara">Также используйте <span class="RktSym">poly</span>, чтобы 
проиллюстрировать процесс поиска корней. Начните с интервала <span style="font-style: italic"></span>[<span style="font-style: italic"></span>3<span style="font-style: italic">,</span>6<span style="font-style: italic"></span>]<span style="font-style: italic"></span> и табулируйте
информацию следующим образом для <span style="font-style: italic">ε = </span>0<span style="font-style: italic"></span>:
</div><div class="SIntrapara"><blockquote><table style="border-collapse: collapse;" cellspacing="0" cellpadding="0"><tbody><tr><td style="border-bottom: 1px solid black;">

<p><span style="font-style: italic">шаг</span></p>

</td><td style="border-bottom: 1px solid black;">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span style="font-style: italic">левый</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span style="font-style: italic">f левое</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span style="font-style: italic">правый</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span style="font-style: italic">f правое</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span style="font-style: italic">середина</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span style="font-style: italic">f середины</span></p>

</td><td style="border-bottom: 1px solid black;" align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td style="border-bottom: 1px solid black;" colspan="3" align="right">

<p></p>

</td></tr><tr><td>

<p><span style="font-style: italic">n=</span>1<span style="font-style: italic"></span></p>

</td><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>3</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>-1</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>6.00</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>8.00</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>4.50</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>1.25</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td colspan="3" align="right">

<p> </p>

</td></tr><tr><td>

<p><span style="font-style: italic">n=</span>2<span style="font-style: italic"></span></p>

</td><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>3</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>-1</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>4.50</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>1.25</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>?</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td align="right">

<p>?</p>

</td><td align="right">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td colspan="3" align="right">

<p></p>

</td></tr></tbody></table></blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara">Наша следующая задача - решить четыре вопроса разработки алгоритмов:
</div><div class="SIntrapara"><ol><li>

<p></p>

<div class="SIntrapara"> Нам нужно условие, которое описывает, когда проблема решена, 
и соответствующий ответ. Учитывая наше обсуждение, это просто: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">ε</span><span class="RktPn">)</span></p>

</blockquote></div>

<p></p>

</li><li>

<p>Результат сопоставления в тривиальном случае это <span class="RktSym">left</span>.</p>

</li><li>

<p></p>

<div class="SIntrapara">Для генеративного случая нам нужно выражение, которое генерирует 
новые проблемы для <span class="RktSym">find-root</span>. Согласно нашему неформальному 
описанию, этот шаг требует определения средней точки и значения функции в ней: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">mid</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29" class="RktValLink" data-pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f@m</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">mid</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Затем средняя точка используется для выбора следующего интервала. После IVT интервал 
<span style="font-style: italic"></span>[<span style="font-style: italic">left,mid</span>]<span style="font-style: italic"></span> является следующим кандидатом, если 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">f@m</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f@m</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">хотя <span style="font-style: italic"></span>[<span style="font-style: italic">mid,right</span>]<span style="font-style: italic"></span> 
используется для рекурсивного вызова, если 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f@m</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">f@m</span><span class="RktPn">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">При преобразовании в код тело 
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span> должно быть условным: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">f@m</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f@m</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-root</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">mid</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f@m</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">f@m</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-root</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">mid</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
В обоих предложениях мы используем <span class="RktSym">find-root</span> для продолжения поиска.</div>

<p></p>

</li><li>

<p>Ответ на последний вопрос очевиден. Поскольку рекурсивный вызов 
<span class="RktSym">find-root</span> находит корень <span class="RktSym">f</span>, 
делать больше нечего.
</p>

</li></ol></div><div class="SIntrapara">Завершенная функция изображена на  
<a href="#%28counter._%28figure._fig~3aroot-of-f%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">159</span></a>; следующие упражнения подробно описывают её конструкцию. </div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._648))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._(figure._fig~3aroot-of-f))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">determines </span><span class="RktSym">R</span><span class="RktCmt"> such that </span><span class="RktSym">f</span><span class="RktCmt"> has a root in [</span><span class="RktSym">R</span><span class="RktCmt">,</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="stt"> </span><span class="RktSym">R</span><span class="stt"> </span><span class="RktSym">ε</span><span class="RktPn">)</span><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">assume</span><span class="RktCmt"> </span><span class="RktSym">f</span><span class="RktCmt"> is continuous </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">assume</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">left</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">0</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">right</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">right</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVal">0</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">left</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">generative</span><span class="RktCmt"> divides interval in half, the root is in one of the two</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">halves, picks according to assumption </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-root</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">ε</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">mid</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2F%29%29" class="RktValLink" data-pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f@mid</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">mid</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">f@mid</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f@mid</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-root</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">mid</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f@mid</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">f@mid</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-root</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">mid</span><span class="hspace">&nbsp;</span><span class="RktSym">right</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;159: </span>Алгоритм <span style="font-style: italic">find-root</span></span></p>

</blockquote></div>

<p></p>

<p><a name="(counter._(exercise._ex~3afind-root-test))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;446. обавьте тест из <a href="#%28counter._%28exercise._ex~3afind-root-example%29%29" data-pltdoc="x">упражнения&nbsp;445</a> в программу на 
 <a href="#%28counter._%28figure._fig~3aroot-of-f%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">159</span></a>. Поэкспериментируйте с разными значениями 
<span class="RktSym">ε</span>. 
<a href="#%28counter._%28exercise._ex~3afind-root-test%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3afind-root-test2))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;447. Функция <span class="RktSym">poly</span> имеет два корня.
Используйте <span class="RktSym">find-root</span> с <span class="RktSym">poly</span> и 
интервалом, который содержит оба корня.  
<a href="#%28counter._%28exercise._ex~3afind-root-test2%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3afind-root-termination))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;448. Алгоритм <span class="RktSym">find-root</span> завершается
 для всех (непрерывных) <span class="RktSym">f</span>, <span class="RktSym">left</span> и
<span class="RktSym">right</span> для которых выполнено предположение. Почему? Сформулируйте
аргумент завершения/termination.</p>

<p><span style="font-weight: bold">Подсказка</span> . Предположим, что аргументы функции 
<span class="RktSym">find-root</span> описывают интервал размера <span class="RktSym">S1</span>.
Насколько велико расстояние между <span class="RktSym">left</span> и
<span class="RktSym">right</span> при первом и втором рекурсивных вызовах 
<span class="RktSym">find-root</span>? Через сколько шагов <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="stt"> </span><span class="RktSym">right</span><span class="stt"> </span><span class="RktSym">left</span><span class="RktPn">)</span> станет меньше или равно 
 <span class="RktSym">ε</span>? <a href="#%28counter._%28exercise._ex~3afind-root-termination%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3afind-root-locals))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;449. Как показано на <a href="#%28counter._%28figure._fig~3aroot-of-f%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">159</span></a>, 
<span class="RktSym">find-root</span> дважды вычисляет значение <span class="RktSym">f</span> 
для каждого граничного значения, чтобы сгенерировать следующий интервал. Используйте 
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span>, чтобы избежать этого пересчета.</p>

<p>Кроме того, <span class="RktSym">find-root</span> повторно вычисляет значение границы 
между рекурсивными вызовами. Например, <span class="RktPn">(</span><span class="RktSym">find-root</span><span class="stt"> </span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">left</span><span class="stt"> </span><span class="RktSym">right</span><span class="RktPn">)</span> вычисляет <span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">left</span><span class="RktPn">)</span> и, если 
<span style="font-style: italic"></span>[<span style="font-style: italic">left,mid</span>]<span style="font-style: italic"></span> выбран в качестве следующего интервала, 
<span class="RktSym">find-root</span> вычисляет <span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">left</span><span class="RktPn">)</span> снова. Представьте вспомогательную функцию, которая похожа на 
<span class="RktSym">find-root</span>, но использует не только <span class="RktSym">left</span>
и <span class="RktSym">right</span>, но также <span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">left</span><span class="RktPn">)</span> и
<span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">right</span><span class="RktPn">)</span> на каждом рекурсивном этапе. </p>

<p>Сколько перерасчетов <span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">left</span><span class="RktPn">)</span> эта конструкция
максимально избегает? <span style="font-weight: bold">Примечание</span> Два дополнительных
аргумента этой вспомогательной функции изменяются на каждом рекурсивном этапе, но это 
изменение связано с изменением числовых аргументов. Эти аргументы представляют собой так 
называемые <span style="font-style: italic">accumulators</span>(аккумуляторы), о которых и 
идет речь в <a href="part_six.html" data-pltdoc="x">Аккумуляторах</a>. 
<a href="#%28counter._%28exercise._ex~3afind-root-locals%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3afind-root-monotonic))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;450. Функция <span class="RktSym">f</span> 
<span style="font-style: italic">монотонно возрастает</span>,  если выполняется 
<span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">a</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span> всякий раз, 
когда выполняется <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c%29%29" class="RktValLink" data-pltdoc="x">&lt;</a></span><span class="stt"> </span><span class="RktSym">a</span><span class="stt"> </span><span class="RktSym">b</span><span class="RktPn">)</span>. Упростите 
<span class="RktSym">find-root</span>, предположив, что данная функция не только непрерывна, 
но и монотонно возрастает. 
<a href="#%28counter._%28exercise._ex~3afind-root-monotonic%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3afind-root-discrete))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;451. Таблица представляет собой структуру 
из двух полей: натурального числа <span class="RktSym">length</span> и <span class="RktSym">array</span>(массива) функций,
<span class="refelem"><span class="refcolumn"><span class="refcontent">Многие языки программирования, включая Racket, поддерживают массивы и векторы, похожие на таблицы. 
</span></span></span>  
которая использует натуральные числа и для полей от <span class="RktVal">0</span> до 
<span class="RktSym">length</span> (исключая) дает ответы:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">table</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktSym">array</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._table)"></a><span style="font-style: italic">Table</span><span class="RktCmt"> is a structure:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-table</span><span class="stt"> </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="stt"> </span><span class="RktPn">[</span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="stt"> </span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="stt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Поскольку эта структура данных несколько необычна, очень важно проиллюстрировать ее 
примерами: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">table1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-table</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">i</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a2</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3d%29%29" class="RktValLink" data-pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._pi%29%29" class="RktValLink" data-pltdoc="x">pi</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._error%29%29" class="RktValLink" data-pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"table2 is not defined for i =!= 0"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">table2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-table</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">a2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Здесь <span class="RktSym">table1</span> массив функций определеных для большего количества
входов, чем позволяет поле длины; <span class="RktSym">table2</span> определен только для 
одного входа, а именно <span class="RktVal">0</span>. Наконец, мы также определяем полезную функцию для поиска значений в таблицах: 
 <a name="(idx._(gentag._649))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._table%29" class="techoutside" data-pltdoc="x"><span class="techinside">Table</span></a><span class="RktCmt"> </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">looks up the </span><span class="RktSym">i</span><span class="RktCmt">th value in </span><span class="RktSym">array</span><span class="RktCmt"> of </span><span class="RktSym">t</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">table-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">table-array</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div>

<p></p>

<p>Табличным корнем <span class="RktSym">t</span> является число в 
<span class="RktPn">(</span><span class="RktSym">table-array</span><span class="stt"> </span><span class="RktSym">t</span><span class="RktPn">)</span>, близкое к <span class="RktVal">0</span>.
<span style="font-style: italic">root index</span>(Индекс корня) - это натуральное число 
<span class="RktSym">i</span> такое, что <span class="RktPn">(</span><span class="RktSym">table-ref</span><span class="stt"> </span><span class="RktSym">t</span><span class="stt"> </span><span class="RktSym">i</span><span class="RktPn">)</span> является корнем из таблицы 
<span class="RktSym">t</span>. Таблица <span class="RktSym">t</span> монотонно увеличивается, 
если <span class="RktPn">(</span><span class="RktSym">table-ref</span><span class="stt"> </span><span class="RktSym">t</span><span class="stt"> </span><span class="RktVal">0</span><span class="RktPn">)</span> меньше, чем <span class="RktPn">(</span><span class="RktSym">table-ref</span><span class="stt"> </span><span class="RktSym">t</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span>, <span class="RktPn">(</span><span class="RktSym">table-ref</span><span class="stt"> </span><span class="RktSym">t</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span> меньше, чем 
<span class="RktPn">(</span><span class="RktSym">table-ref</span><span class="stt"> </span><span class="RktSym">t</span><span class="stt"> </span><span class="RktVal">2</span><span class="RktPn">)</span>, и так далее.
</p>

<p>Разработайте <span class="RktSym">find-linear</span>. Функция использует монотонно
увеличивающуюся таблицу и находит наименьший индекс для корня из таблицы. Используйте 
структурный рецепт для <a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a>, начиная от <span class="RktVal">0</span> 
до <span class="RktVal">1</span>, <span class="RktVal">2</span> и так далее до 
<span class="RktSym">array-length</span> данной таблицы. Такой процесс поиска корней часто 
называют линейным поиском - <span style="font-style: italic">linear
search</span>.</p>

<p>Разработайте <span class="RktSym">find-binary</span>, которая также находит наименьший 
индекс для корня монотонно возрастающей таблицы, но использует для этого генеративную рекурсию. 
Как и при обычном бинарном поиске, алгоритм сужает интервал до минимально возможного размера, 
а затем выбирает индекс. Не забудьте сформулировать аргумент  прекращения(termination).</p>

<p><span style="font-weight: bold">Подсказка</span> Ключевая проблема заключается в том, 
что индекс таблицы - это <span style="font-weight: bold">natural</span>(натуральное) число, 
а не простое число. Следовательно, аргументы границы интервала для <span class="RktSym">find</span>(поиска) должны быть натуральными числами. Подумайте, как это наблюдение меняет 
(1) природу экземпляров тривиально решаемых проблем, 
(2) вычисление средней точки, 
(3) и решение о том, какой интервал генерировать следующим. 
Чтобы сделать это конкретным, представьте себе таблицу с 1024 слотами и корнем в 1023. 
Сколько вызовов <span class="RktSym">find</span> требуется в 
<span class="RktSym">find-linear</span> и <span class="RktSym">find-binary</span> 
соответственно? 
<a href="#%28counter._%28exercise._ex~3afind-root-discrete%29%29" class="ex-end" data-pltdoc="x"></a></p>

<h4>27.3<tt>&nbsp;</tt><a name="(part._sec~3afiles-lines)"></a>Взгляд на парсинг(синтаксичекий разбор)Parsing</h4>

<p></p>

<div class="SIntrapara">Как упоминалось в разделе <a href="part_four.html#%28part._ch~3afiles%29" data-pltdoc="x">Итеративное уточнение</a>, компьютеры поставляются с файлами, которые
представляют собой форму постоянной памяти. С нашей точки зрения, файл - это просто список
<a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a>s.
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Точное соглашение отличается от одной операционной системы к другой, но для наших целей 
это не имеет значения.</span></span></span>
который прерывается специальной строкой: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._file)"></a><span style="font-style: italic">File</span><span class="RktCmt"> is one of: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">–</span><span class="RktCmt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">–</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="stt"> </span><span class="RktVal">"\n"</span><span class="stt"> </span><a href="#%28tech._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">File</span></a><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">–</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="stt"> </span><a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a><span class="stt"> </span><a href="#%28tech._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">File</span></a><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">interpretation</span><span class="RktCmt"> represents the content of a file </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktVal">"\n"</span><span class="RktCmt"> is the newline character </span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Идея состоит в том, что <a href="#%28tech._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">File</span></a>(файл)ы разбиваются на строки, где 
<span class="RktVal">"\n"</span> представляет так называемый символ новой строки, 
который указывает конец строки. Давайте также введем строки, прежде чем мы продолжим: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._line)"></a><span style="font-style: italic">Line</span><span class="RktCmt"> is a [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a><span class="RktCmt">].</span></p>

</blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara">Многие функции должны обрабатывать файлы в виде списка строк. 
<span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpbatch-io.html#%28def._%28%28lib._2htdp%2Fbatch-io..rkt%29._read-lines%29%29" class="RktValLink" data-pltdoc="x">read-lines</a></span> из библиотеки <span class="sroman">the <span class="Smaller"><span style="font-style: italic">2htdp/batch-io</span></span> </span> - 
одна из них. Конкретно функция превращает файл 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"h"</span><span class="hspace">&nbsp;</span><span class="RktVal">"o"</span><span class="hspace">&nbsp;</span><span class="RktVal">"w"</span><span class="hspace">&nbsp;</span><span class="RktVal">" "</span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"r"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="hspace">&nbsp;</span><span class="RktVal">" "</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">"o"</span><span class="hspace">&nbsp;</span><span class="RktVal">"u"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"o"</span><span class="hspace">&nbsp;</span><span class="RktVal">"i"</span><span class="hspace">&nbsp;</span><span class="RktVal">"n"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"?"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"n"</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">" "</span><span class="hspace">&nbsp;</span><span class="RktVal">"p"</span><span class="hspace">&nbsp;</span><span class="RktVal">"r"</span><span class="hspace">&nbsp;</span><span class="RktVal">"o"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"r"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="hspace">&nbsp;</span><span class="RktVal">"s"</span><span class="hspace">&nbsp;</span><span class="RktVal">"s"</span><span class="hspace">&nbsp;</span><span class="RktVal">"?"</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
в список из трех строк: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"h"</span><span class="hspace">&nbsp;</span><span class="RktVal">"o"</span><span class="hspace">&nbsp;</span><span class="RktVal">"w"</span><span class="hspace">&nbsp;</span><span class="RktVal">" "</span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"r"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="hspace">&nbsp;</span><span class="RktVal">" "</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">"o"</span><span class="hspace">&nbsp;</span><span class="RktVal">"u"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"o"</span><span class="hspace">&nbsp;</span><span class="RktVal">"i"</span><span class="hspace">&nbsp;</span><span class="RktVal">"n"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"?"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"n"</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">" "</span><span class="hspace">&nbsp;</span><span class="RktVal">"p"</span><span class="hspace">&nbsp;</span><span class="RktVal">"r"</span><span class="hspace">&nbsp;</span><span class="RktVal">"o"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"r"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"s"</span><span class="hspace">&nbsp;</span><span class="RktVal">"s"</span><span class="hspace">&nbsp;</span><span class="RktVal">"?"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Аналогично файл 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span><span class="hspace">&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span><span class="hspace">&nbsp;</span><span class="RktVal">"f"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"h"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">также соответствует списку из трех строк:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"f"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"h"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Стоп! Каковы представления списком строк для этих трех случаев: 
<span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>, <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVal">"\n"</span><span class="RktPn">)</span> и <span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktVal">"\n"</span><span class="stt"> </span><span class="RktVal">"\n"</span><span class="RktPn">)</span>? Почему эти примеры важны для тестирования?</div>

<p></p>

<p>Проблема превращения последовательности <a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a>s в 
список строк называется проблемой <span style="font-style: italic">parsing</span>
(синтаксического анализа). Многие языки программирования предоставляют функции, которые 
извлекают из файлов строки, слова, числа и другие виды так называемых токенов. Но даже 
если они это сделают, часто программам требуется еще больше анализировать эти токены. 
Этот раздел дает представление о технике синтаксического анализа. Однако синтаксический 
анализ настолько сложен и настолько важен для создания полноценных программных приложений, 
что большинство программ бакалавриата включают как минимум один курс по синтаксическому анализу.
Поэтому не думайте, что вы сможете правильно решить реальные проблемы синтаксического анализа
даже после освоения этого раздела.</p>

<p></p>

<div class="SIntrapara">Мы начинаем с утверждения очевидного - подписи, предназначения, 
одного из приведенных выше примеров и заголовка - для функции, которая превращает файл 
в список строк - <a href="#%28tech._line%29" class="techoutside" data-pltdoc="x"><span class="techinside">Line</span></a>s: <a name="(idx._(gentag._650))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">File</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._line%29" class="techoutside" data-pltdoc="x"><span class="techinside">Line</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">converts a file into a list of lines </span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">file-&gt;list-of-lines</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"f"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"h"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"f"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"h"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">file-&gt;list-of-lines</span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara">Также легко описать процесс синтаксического анализа, учитывая 
наш опыт работы с <a href="#%28part._sec~3abundle%29" data-pltdoc="x">Рекурсией без структуры</a>:
</div><div class="SIntrapara"><ol><li>

<p>Проблема тривиально разрешима, если файл это   <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>.</p>

</li><li>

<p>В этом случае файл не содержит строки. </p>

</li><li>

<p>В противном случае файл содержит хотя бы одину  <span class="RktVal">"\n"</span> или другую
<a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a>. Эти элементы - до первого знака <span class="RktVal">"\n"</span> включительно, если он есть, должны быть отделены от остальной части файла(<a href="#%28tech._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">File</span></a>). Остальное - это новая проблема того же типа, которую может решить 
 <span class="RktSym">file-&gt;list-of-lines</span>.
</p>

</li><li>

<p>Затем достаточно добавить(<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span>) начальный 
сегмент как одну строку к списку строк(<a href="#%28tech._line%29" class="techoutside" data-pltdoc="x"><span class="techinside">Line</span></a>s), которые являются результатом 
остальной части  <a href="#%28tech._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">File</span></a>.</p>

</li></ol></div><div class="SIntrapara">Четыре вопроса предполагают прямое создание 
шаблона для генеративных рекурсивных функций. Поскольку для отделения начального сегмента 
от остальной части файла требуется сканирование произвольно длинного списка 
<a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a>s, мы помещаем в наш список пожеланий две 
вспомогательные функции: <span class="RktSym">first-line</span>, которая собирает 
все <a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a>s, но исключает первое появление 
<span class="RktVal">"\n"</span> или конец списка; и <span class="RktSym">remove-first-line</span>, которая удаляет те самые элементы, которые собирает 
<span class="RktSym">first-line</span>. </div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._651))"></a>
<a name="(idx._(gentag._652))"></a>
<a name="(idx._(gentag._653))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._(figure._fig~3afile2list))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">File</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._line%29" class="techoutside" data-pltdoc="x"><span class="techinside">Line</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">converts a file into a list of lines </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">file-&gt;list-of-lines</span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first-line</span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">file-&gt;list-of-lines</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">remove-first-line</span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">File</span></a><span class="RktCmt"> -&gt; </span><a href="#%28tech._line%29" class="techoutside" data-pltdoc="x"><span class="techinside">Line</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">retrieves the prefix of </span><span class="RktSym">afile</span><span class="RktCmt"> up to the first occurrence of </span><span class="RktSym">NEWLINE</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first-line</span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29" class="RktValLink" data-pltdoc="x">string=?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">NEWLINE</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first-line</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">File</span></a><span class="RktCmt"> -&gt; </span><a href="#%28tech._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">File</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">drops the suffix of </span><span class="RktSym">afile</span><span class="RktCmt"> behind the first occurrence of </span><span class="RktSym">NEWLINE</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">remove-first-line</span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string~3d~3f%29%29" class="RktValLink" data-pltdoc="x">string=?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">NEWLINE</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">remove-first-line</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">NEWLINE</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the </span><a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a><span class="RktCmt"> </span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;160: </span>Преобразование файла в список строк</span></p>

</blockquote></div>

<p></p>

<p>Отсюда легко создать остальную часть программы. В 
<span class="RktSym">file-&gt;list-of-lines</span> ответ в первом предложении должен быть 
<span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>, потому 
что пустой файл не содержит никаких строк. Ответ во втором предложении должен 
соединить(с помощью <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span>) значение 
<span class="RktPn">(</span><span class="RktSym">first-line</span><span class="stt"> </span><span class="RktSym">afile</span><span class="RktPn">)</span> со значением 
<span class="RktPn">(</span><span class="RktSym">file-&gt;list-of-lines</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">remove-first-line</span><span class="stt"> </span><span class="RktSym">afile</span><span class="RktPn">)</span><span class="RktPn">)</span>, потому что первое выражение вычисляет первую строку, 
а второе в одиночку вычисляет остальные строки. Наконец, вспомогательные функции 
структурно рекурсивно просматривают свои входы; их разработка - несложное упражнение. 
На <a href="#%28counter._%28figure._fig~3afile2list%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">160</span></a> представлен полный программный код.</p>

<p></p>

<div class="SIntrapara">Вот как <span class="RktSym">file-&gt;list-of-lines</span> обрабатывает
второй тест: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym">file-&gt;list-of-lines</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span><span class="hspace">&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span><span class="hspace">&nbsp;</span><span class="RktVal">"f"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"h"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">file-&gt;list-of-lines</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span><span class="hspace">&nbsp;</span><span class="RktVal">"f"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"h"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">file-&gt;list-of-lines</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"f"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"h"</span><span class="hspace">&nbsp;</span><span class="RktVal">"\n"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"f"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"h"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">file-&gt;list-of-lines</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"e"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"f"</span><span class="hspace">&nbsp;</span><span class="RktVal">"g"</span><span class="hspace">&nbsp;</span><span class="RktVal">"h"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Это вычисление является еще одним напоминанием о том, что аргумент рекурсивного применения 
<span class="RktSym">file-&gt;list-of-lines</span> почти никогда не является остальной 
частью данного файла. Это также показывает, почему эта генеративная рекурсия гарантированно
завершается для каждого данного файла(<a href="#%28tech._file%29" class="techoutside" data-pltdoc="x"><span class="techinside">File</span></a>). Каждое рекурсивное применение 
использует список, который короче заданного, что означает, что рекурсивный процесс
останавливается, когда процесс достигает
 <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>.</div>

<p></p>

<p><a name="(counter._(exercise._ex~3afile-lines-purpose))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;452. Как в <span class="RktSym">first-line</span>, так и в 
<span class="RktSym">remove-first-line</span> отсутствуют предназначение. Сормулируйте 
правильные формулировки целей.  
<a href="#%28counter._%28exercise._ex~3afile-lines-purpose%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3aparse-words))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;453. Разработайте функцию <span class="RktSym">tokenize</span>. 
Она превращает строку(<a href="#%28tech._line%29" class="techoutside" data-pltdoc="x"><span class="techinside">Line</span></a>) в список токенов. Здесь токен - это либо 
<a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a>, либо <a href="part_one.html#%28tech._string%29" class="techoutside" data-pltdoc="x"><span class="techinside">String</span></a>, состоящая 
из строчных букв и ничего другого. То есть отбрасываются все 
<a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a> с пробелами; все остальные буквы остаются как есть; 
и все следующие друг за другом буквы объединяются в “words”(слова).   
<span style="font-weight: bold">Подсказка</span> Прочитать о функции <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._string-whitespace~3f%29%29" class="RktValLink" data-pltdoc="x">string-whitespace?</a></span>
function. <a href="#%28counter._%28exercise._ex~3aparse-words%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3amatrix-gen))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;454. Разработайте <span class="RktSym">create-matrix</span>.
Функция использует число <span style="font-style: italic">n</span> и список из 
<span style="font-style: italic">n</span><span style="vertical-align: super; font-size: 80%"><span style="font-style: italic"></span>2<span style="font-style: italic"></span></span><span style="font-style: italic"></span> чисел. Она создает матрицу 
<img src="part_five_files/pict_188.png" alt="image" width="30" height="7">, например: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">create-matrix</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Придумайте второй пример.  
<a href="#%28counter._%28exercise._ex~3amatrix-gen%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<h3>28<tt>&nbsp;</tt><a name="(part._ch~3agen-rec-math)"></a>Математические примеры</h3>

<p>Многие решения математических задач используют генеративную рекурсию. 
Будущий программист должен познакомиться с такими решениями по двум причинам. 
С одной стороны, изрядное количество задач по программированию, по сути, связано 
с превращением таких математических идей в программы. С другой стороны, практика 
решения таких математических задач часто оказывается вдохновляющей для разработки 
алгоритмов. В этой главе рассматриваются три таких проблемы. </p>

<h4>28.1<tt>&nbsp;</tt><a name="(part._sec~3anewton)"></a>Метод Ньютона</h4>

<p><a href="#%28part._sec~3abinary-search%29" data-pltdoc="x">Бинарный поиск</a>  
представляет один метод поиска корня математической функции. Как и упражнения в том же 
эскизе раздела, метод естественным образом обобщается на вычислительные задачи, такие 
как поиск определенных значений в таблицах, векторах и массивах. В математических 
приложениях программисты склонны использовать методы, берущие начало в аналитической 
математике. Один из самых известных принадлежит Ньютону. Как и бинарный поиск, так 
называемый <span style="font-style: italic">метод Ньютона</span> многократно улучшает 
приближение к корню, пока оно не станет «достаточно близким». Начиная с предположения, 
скажем, <span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"></span>, суть процесса состоит в построении касательной 
к <span style="font-style: italic">f</span> в точке <span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"></span>
и определении его корня. Хотя касательная аппроксимирует функцию, определить ее корень 
также несложно. Достаточно часто повторяя этот процесс, 
<span class="refelem"><span class="refcolumn"><span class="refcontent">N
Ньютон доказал этот факт.</span></span></span> 
алгоритм может найти корень <span style="font-style: italic">r</span>, для которого 
<span style="font-style: italic"></span>(<span style="font-style: italic">f r</span>)<span style="font-style: italic"></span> достаточно близко к 
<span style="font-style: italic"></span>0<span style="font-style: italic"></span>.</p>

<p></p>

<div class="SIntrapara">Понятно, что этот процесс основан на двух частях предметных 
областях знаний о касательных: их наклонах(slopes) и корнях(roots). Неформально касательная к 
<span style="font-style: italic">f</span> в некоторой точке <span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"></span>
 - это прямая, проходящая через точку <span style="font-style: italic"></span>(<span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic">, f</span>(<span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"></span>)<span style="font-style: italic"></span>)<span style="font-style: italic"></span> и имеющая тот же наклон, что и 
<span style="font-style: italic">f</span>. Один из математических способов получить наклон
касательной состоит в том, чтобы выбрать две близкие точки на оси x, которые равноудалены от 
<span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"></span>, и использовать наклон прямой, определяемый функцией 
<span style="font-style: italic">f</span>, в этих двух точках. Условие состоит в том, чтобы
выбрать небольшое число <span style="font-style: italic">ε</span> и работать с 
<span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"> + ε</span> и <span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"> - ε</span>. 
То есть это точки <span style="font-style: italic"></span>(<span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"> - ε, f</span>(<span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"> - ε</span>)<span style="font-style: italic"></span>)<span style="font-style: italic"></span> и <span style="font-style: italic"></span>(<span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"> + ε, f</span>(<span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"> + ε</span>)<span style="font-style: italic"></span>)<span style="font-style: italic"></span>, которые определяют прямую и наклон: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_189.png" alt="image" width="317" height="19"></p>

</blockquote></div>

<p></p>

<p><a name="(counter._(exercise._ex~3aslope))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;455. Переведите эту математическую формулу в функцию <span class="RktSym">slope</span>
на ISL+, которая отображает функцию <span class="RktSym">f</span> и число 
<span class="RktSym">r1</span> в наклон функции <span class="RktSym">f</span> в точке 
<span class="RktSym">r1</span>. Предположим, что <span class="RktSym">ε</span> - глобальная
постоянная. Для ваших примеров используйте функции, точный наклон которых вы можете вычислить,
скажем, горизонтальные линии, линейные функции и, возможно, полиномы, если вы знаете некоторые
вычисления. 
<a href="#%28counter._%28exercise._ex~3aslope%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara">Вторая часть знаний в предметной области касается корня касательной,
которая представляет собой прямую или линейную функцию. Касательная проходит через 
<span style="font-style: italic"></span>(<span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic">, f</span>(<span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"></span>)<span style="font-style: italic"></span>)<span style="font-style: italic"></span> и имеет указанный выше наклон(<span style="font-style: italic">slope</span>). Математически это определяется как 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_190.png" alt="image" width="225" height="13"></p>

</blockquote></div><div class="SIntrapara">Нахождение корня касательной(<span style="font-style: italic">tangent</span>) означает нахождение такого значения, чтобы тангенс(<span style="font-style: italic">tangent</span>) (<span style="font-style: italic">root-of-tangent</span>)<span style="font-style: italic"></span> был равен <span style="font-style: italic"></span>0<span style="font-style: italic"></span>:
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_191.png" alt="image" width="252" height="13"></p>

</blockquote></div><div class="SIntrapara">Мы можем решить это уравнение простым способом:
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_192.png" alt="image" width="178" height="23"></p>

</blockquote></div>

<p></p>

<p><a name="(counter._(exercise._ex~3aroot-of-tangent))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;456. Разработайте <span class="RktSym">root-of-tangent</span>, 
функцию, которая отображает  <span class="RktSym">f</span> и <span class="RktSym">r1</span><span class="RktMeta"></span> в корень касательной через <span style="font-style: italic"></span>(<span style="font-style: italic"></span><span class="RktSym">r1</span><span style="font-style: italic">,</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">r1</span><span class="RktPn">)</span><span style="font-style: italic"></span>)<span style="font-style: italic"></span>. <a href="#%28counter._%28exercise._ex~3aroot-of-tangent%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara">Теперь мы можем использовать рецепт разработки, чтобы перевести 
описание процесса Ньютона в программу ISL+. Функция - назовем ее 
<span class="RktSym">newton</span> в честь ее изобретателя - потребляет функцию 
<span class="RktSym">f</span> и число <span class="RktSym">r1</span>:
<a name="(idx._(gentag._654))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds a number </span><span class="RktSym">r</span><span class="RktCmt"> such that </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">r</span><span class="RktPn">)</span><span class="RktCmt"> is small</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">generative</span><span class="RktCmt"> repeatedly generates improved guesses</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newton</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">r1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1.0</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara">Что касается шаблона <span class="RktSym">newton</span>, мы обратимся 
к четырем центральным вопросам рецепта проектирования генеративной рекурсии:
</div><div class="SIntrapara"><ol><li>

<p></p>

<div class="SIntrapara">  Если <span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">r1</span><span class="RktPn">)</span> 
достаточно близко к <span class="RktVal">0</span>, проблема решена. Близость к 
<span class="RktVal">0</span> может означать <span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">r1</span><span class="RktPn">)</span> 
небольшое положительное или небольшое отрицательное число. Следовательно, мы проверяем его
абсолютное значение: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._abs%29%29" class="RktValLink" data-pltdoc="x">abs</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">r1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">ε</span><span class="RktPn">)</span></p>

</blockquote></div>

<p></p>

</li><li>

<p>Решение - <span class="RktSym">r1</span>.</p>

</li><li>

<p>Генеративный шаг алгоритма состоит в нахождении корня касательной к <span class="RktSym">f</span> в точке <span class="RktSym">r1</span>, которая генерирует следующее предположение. 
Применяя <span class="RktSym">newton</span> к <span class="RktSym">f</span> и это новое предположение, мы возобновляем процесс.</p>

</li><li>

<p>Ответ рекурсии также является ответом на исходную проблему.</p>

</li></ol></div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._655))"></a>
<a name="(idx._(gentag._656))"></a>
<a name="(idx._(gentag._657))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._(figure._fig~3anewton))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds a number </span><span class="RktSym">r</span><span class="RktCmt"> such that </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._abs%29%29" class="RktValLink" data-pltdoc="x">abs</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">f</span><span class="stt"> </span><span class="RktSym">r</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">ε</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29" class="RktStxLink" data-pltdoc="x">check-within</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newton</span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym">ε</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29" class="RktStxLink" data-pltdoc="x">check-within</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newton</span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">3.5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktSym">ε</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newton</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">r1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c~3d%29%29" class="RktValLink" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._abs%29%29" class="RktValLink" data-pltdoc="x">abs</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">r1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">ε</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">r1</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">newton</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">root-of-tangent</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">r1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">see </span><a href="#%28counter._%28exercise._ex~3aslope%29%29" data-pltdoc="x">exercise&nbsp;455</a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">slope</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">r</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">see </span><a href="#%28counter._%28exercise._ex~3aroot-of-tangent%29%29" data-pltdoc="x">exercise&nbsp;456</a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">root-of-tangent</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">r</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;161: </span>Процесс Ньютона </span></p>

</blockquote></div>

<p></p>

<p>На <a href="#%28counter._%28figure._fig~3anewton%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">161</span></a> показан <span class="RktSym">newton</span>. Он включает два 
теста, которые являются производными от тестов в <a href="#%28part._sec~3abinary-search%29" data-pltdoc="x">бинарном поиске</a> для <span class="RktSym">find-root</span>. В конце концов, 
обе функции ищут корень функции, а у <span class="RktSym">poly</span> есть два известных корня. </p>

<blockquote class="Herefigure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered">

<p><img src="part_five_files/pict_193.png" alt="image" width="400" height="400"></p>

</blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3apoly-root))" x-target-lift="Figure"></a>Рисунок&nbsp;162: </span>График <span class="RktSym">poly</span> в интервале <span style="font-style: italic"></span>[<span style="font-style: italic"></span><span class="RktVal"><span class="nobreak">-1</span></span><span style="font-style: italic">,</span><span class="RktVal">5</span><span style="font-style: italic"></span>]<span style="font-style: italic"></span></span></p>

</blockquote>

<p></p>

<div class="SIntrapara">Мы не закончили с разработкой <span class="RktSym">newton</span>. 
Новый, седьмой шаг рецепта проектирования требует исследования поведения завершения функции. 
Для <span class="RktSym">newton</span> проблема проявляется в <span class="RktSym">poly</span>:
<a name="(idx._(gentag._658))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Как уже упоминалось, его корни - это  <span class="RktVal">2</span> и <span class="RktVal">4</span>. График <span class="RktSym">poly</span> на <a href="#%28counter._%28figure._fig~3apoly-root%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">162</span></a> подтверждает 
эти корни, а также показывает, что между двумя корнями функция выравнивается. Для 
математически склонного человека эта форма поднимает вопрос о том, что вычисляет 
 <span class="RktSym">newton</span> для начального предположения <span class="RktVal">3</span>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td>

<p><span class="RktRes">-1</span></p>

</td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">newton</span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td>

<p><span class="RktErr">/:division by zero</span></p>

</td></tr></tbody></table></blockquote></div><div class="SIntrapara">Объяснение состоит в том, 
что <span class="RktSym">slope</span> дает “bad”(плохое) значение, а функция 
<span class="RktSym">root-of-tangent</span>  превращает его в ошибку: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">slope</span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td>

<p><span class="RktRes">0</span></p>

</td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">root-of-tangent</span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td>

<p><span class="RktErr">/:division by zero</span></p>

</td></tr></tbody></table></blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara">Помимо этой ошибки времени выполнения, 
<span class="RktSym">newton</span> демонстрирует две другие проблемы, связанные с завершением. 
К счастью, мы можем продемонстрировать и то, и другое с помощью <span class="RktSym">poly</span>.
Первая касается природы чисел, которую мы кратко затронули в 
<a href="part_one.html#%28part._sec~3aarith-num%29" data-pltdoc="x">Арифметике чисел</a>. 
Во многих упражнениях для начинающих по программированию можно безопасно игнорировать 
различие между точными и неточными числами, но когда дело доходит до перевода математики в
программы, нужно действовать с особой осторожностью. Учтите следующее: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">newton</span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">2.9999</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Программа ISL + рассматривает <span class="RktVal">2.9999</span> как точное число, и 
вычисления в <span class="RktSym">newton</span> обрабатывают его как таковое, хотя, 
поскольку числа не являются целыми числами, в вычислениях используются точные 
рациональные дроби. Поскольку арифметика для дробей может выполняться намного медленнее, 
чем для арифметики для неточных чисел, приведенный выше вызов функции занимает значительное 
время в DrRacket. В зависимости от вашего компьютера это может занять от нескольких секунд 
до минуты или больше. Если вы случайно выберете другие числа, запускающие эту форму 
вычислений, может показаться, что вызов <span class="RktSym">newton</span> вообще не 
завершается.
</div>

<p></p>

<p></p>

<div class="SIntrapara">Вторая проблема касается не завершаемости. Вот пример:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">newton</span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">#i3.0</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Она использует неточное число <span class="RktVal">#i3.0</span><span class="RktMeta"></span>
в качестве начального предположения, которое, в отличие от <span class="RktVal">3</span>,
вызывает другие проблемы. В частности, функция <span class="RktSym">slope</span>  теперь 
выдает неточный <span class="RktVal">0</span> для poly, в то время как 
<span class="RktSym">root-of-tangent</span> уходит в бесконечность: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">slope</span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">#i3.0</span><span class="RktPn">)</span></td></tr><tr><td>

<p><span class="RktRes">#i0.0</span></p>

</td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">root-of-tangent</span><span class="hspace">&nbsp;</span><span class="RktSym">poly</span><span class="hspace">&nbsp;</span><span class="RktVal">#i3.0</span><span class="RktPn">)</span></td></tr><tr><td>

<p><span class="RktRes">#i+inf.0</span></p>

</td></tr></tbody></table></blockquote></div><div class="SIntrapara">В результате 
вычисление сразу попадает в бесконечный цикл.
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Вычисление в <span class="RktSym">newton</span> превращает
<span class="RktVal">#i+inf.0</span><span class="RktMeta"></span> в <span class="RktVal">+nan.0</span>, фрагмент данных, в котором написано «не число». Большинство арифметических операций 
передают это значение, что объясняет поведение 
<span class="RktSym">newton</span>.</span></span></span></div>

<p></p>

<p>Короче говоря, <span class="RktSym">newton</span> демонстрирует полный спектр проблем, 
когда дело доходит до сложного поведения завершения. Для некоторых входных данных функция 
дает правильный результат. Для некоторых она сигнализирует об ошибках. А для других она 
заходит в бесконечный цикл или кажется, что она входит в один. Заголовок для 
<span class="RktSym">newton</span> - или какой-то другой текст - должен предупреждать других, 
кто хочет использовать функцию и будущих читателей, об этих сложностях, и хорошие 
математические библиотеки в распространенных языках программирования делают это. </p>

<p><a name="(counter._(exercise._ex~3adouble-amount))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;457. Разработайте функцию
<span class="RktSym">double-amount</span>,
<span class="refelem"><span class="refcolumn"><span class="refcontent">Это упражнение предложил Адриан Герман. </span></span></span> 
которая вычисляет, сколько месяцев требуется, чтобы удвоить заданную сумму денег, 
когда сберегательный счет ежемесячно выплачивает проценты по фиксированной ставке.</p>

<p><span style="font-weight: bold">Знания предметной области</span> С помощью незначительных
алгебраических манипуляций вы можете показать, что данная сумма не имеет значения.
Только процентная ставка имеет значение. Также эксперты в предметной области знают, что удвоение происходит примерно через <span style="font-style: italic"></span>7<span style="font-style: italic"></span>2<span style="font-style: italic">/r</span> месяца, если процентная ставка 
<span style="font-style: italic">r</span> «мала». 
<a href="#%28counter._%28exercise._ex~3adouble-amount%29%29" class="ex-end" data-pltdoc="x"></a></p>

<h4>28.2<tt>&nbsp;</tt><a name="(part._sec~3aintegrate)"></a>Числовая интеграция</h4>

<p></p>

<div class="SIntrapara">Многие физические задачи сводятся к определению площади под кривой:
</div><div class="SIntrapara"><blockquote>

<p><span style="font-weight: bold">Пример Задачи</span> Автомобиль движется с постоянной 
скоростью <span style="font-style: italic">v</span> метров в секунду. Как далеко он проходит 
за  <span class="RktVal">5</span>, <span class="RktVal">10</span>, 
<span class="RktVal">15</span> секунд?</p>

<p>Ракета взлетает с постоянной скоростью ускорения <img src="part_five_files/pict_194.png" alt="image" width="43" height="13">. Какой высоты онf достигает через 
<span class="RktVal">5</span>, <span class="RktVal">10</span>,
<span class="RktVal">15</span> секунд?</p>

</blockquote></div><div class="SIntrapara">Физика говорит нам, что транспортное средство 
пролетает <img src="part_five_files/pict_195.png" alt="image" width="75" height="12"> метров, 
если оно движется с постоянной скоростью  <span style="font-style: italic">v</span> в течение 
<span style="font-style: italic">t</span> секунд. Для транспортных средств, которые ускоряются,
пройденное расстояние зависит от квадрата прошедшего времени 
<span style="font-style: italic">t</span>: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_196.png" alt="image" width="96" height="15"></p>

</blockquote></div><div class="SIntrapara">В общем, закон говорит нам, что расстояние 
соответствует площади под графиком скорости<span style="font-style: italic">v</span>(<span style="font-style: italic">t</span>)<span style="font-style: italic"></span> в зависимости 
от времени  <span style="font-style: italic">t</span>.</div>

<p></p>

<blockquote class="Figure"><a name="(counter._(figure._fig~3adistance))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered">

<p><img src="part_five_files/pict_197.png" alt="image" width="250" height="200">
<span class="hspace">&nbsp;&nbsp;</span>
<img src="part_five_files/pict_198.png" alt="image" width="250" height="200"></p>

</blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;163: </span>Пройденное расстояние с постоянной скоростью 
в зависимости от скорости разгона</span></p>

</blockquote>

<p><a href="#%28counter._%28figure._fig~3adistance%29%29" data-pltdoc="x">Рисунок&nbsp;<span class="FigureRef">163</span></a> графически иллюстрирует эту идею. Слева мы видим 
наложение двух графиков: сплошная плоская линия - это скорость автомобиля, а восходящая
пунктирная линия - это пройденное расстояние. Быстрая проверка показывает, что последнее
действительно является областью, определяемой первым и осью абсцисс 
<span style="font-weight: bold">в каждый момент времени</span>.
Точно так же графики справа показывают взаимосвязь между ракетой, движущейся с постоянно
увеличивающейся скоростью, и высотой, которую она достигает. Определение этой области
под графиком функции для некоторого определенного интервала называется (функцией)
интегрирования - <span style="font-style: italic">integration</span>.</p>

<p>Хотя математикам известны формулы для двух примеров задач, дающих точные ответы, 
общая проблема требует вычислительных решений. Проблема в том, что кривые часто имеют 
сложную форму, больше похожую на те, что показаны на <a href="#%28counter._%28figure._fig~3afunc-int%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">164</span></a>, которая
 предполагает, что кому-то нужно знать область между осью x, вертикальными линиями, 
обозначенными <span style="font-style: italic">a</span> и 
<span style="font-style: italic">b</span>, и графиком <span style="font-style: italic">f</span>.
Прикладные математики определяют такие области приблизительно, суммируя площади 
множества небольших геометрических фигур. Поэтому естественно разработать алгоритмы, 
которые имеют дело с этими вычислениями. </p>

<blockquote class="Figure"><a name="(counter._(figure._fig~3afunc-int))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside">

<p><img src="part_five_files/pict_199.png" alt="image" width="400" height="400"></p>

</blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;164: </span>Функция интеграции <span style="font-style: italic">f</span> между <span style="font-style: italic">a</span> и <span style="font-style: italic">b</span></span></p>

</blockquote>

<p></p>

<div class="SIntrapara">Алгоритм интегрирования использует три входа: функцию 
<span class="RktSym">f</span> и две границы, <span class="RktSym">a</span> и
<span class="RktSym">b</span>. Четвертая часть, ось x, подразумевается. Это 
предполагает следующую сигнатуру: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a></p>

</blockquote></div><div class="SIntrapara">Чтобы понять идею интегрирования, лучше 
всего изучить простые примеры, такие как постоянная функция или линейная функция. 
Итак, рассмотрим  
<a name="(idx._(gentag._659))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">constant</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">Передача <span class="RktSym">constant</span>(константы)
в <span class="RktSym">integrate</span> вместе с <span class="RktVal">12</span> и
<span class="RktVal">22</span> описывает прямоугольник шириной <span class="RktVal">10</span> 
и высотой <span class="RktVal">20</span>. Площадь этого прямоугольника равна 
<span class="RktVal">200</span>, что означает, что мы получаем следующий тест: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">integrate</span><span class="hspace">&nbsp;</span><span class="RktSym">constant</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">200</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">Точно так же давайте использовать 
<span class="RktSym">linear</span> для создания второго теста:  
<a name="(idx._(gentag._660))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">Если мы используем <span class="RktSym">linear</span>,
<span class="RktVal">0</span> и <span class="RktVal">10</span> с 
<span class="RktSym">integrate</span>, область представляет собой треугольник с шириной основания
<span class="RktVal">10</span> и высотой span class="RktVal">20</span>. Вот пример в качестве
теста: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">integrate</span><span class="hspace">&nbsp;</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">В конце концов, площадь треугольника равна половине
произведения его ширины в основании и высоты .</div>

<p></p>

<p></p>

<div class="SIntrapara">В качестве третьего примера мы воспользуемся некоторыми  знаниями
предметной области. Как уже упоминалось, математики знают, как точно определить площадь 
некоторых функций. Например, область под функцией 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_200.png" alt="image" width="93" height="14"></p>

</blockquote></div><div class="SIntrapara">на интервале <span style="font-style: italic"></span>[<span style="font-style: italic">a,b</span>]<span style="font-style: italic"></span>
можно вычислить по следующей формуле 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_201.png" alt="image" width="44" height="11"></p>

</blockquote></div><div class="SIntrapara">Вот как превратить эту идею в конкретный тест:  
<a name="(idx._(gentag._661))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29" class="RktValLink" data-pltdoc="x">square</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sqr%29%29" class="RktValLink" data-pltdoc="x">sqr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">integrate</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/teachpack/2htdpimage.html#%28def._%28%28lib._2htdp%2Fimage..rkt%29._square%29%29" class="RktValLink" data-pltdoc="x">square</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._expt%29%29" class="RktValLink" data-pltdoc="x">expt</a></span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._expt%29%29" class="RktValLink" data-pltdoc="x">expt</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._662))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._(figure._fig~3aintegrate-test))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">ε</span><span class="hspace">&nbsp;</span><span class="RktVal">0.1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">] </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">computes the area under the graph of </span><span class="RktSym">f</span><span class="RktCmt"> between </span><span class="RktSym">a</span><span class="RktCmt"> and </span><span class="RktSym">b</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">assume</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._~3c%29%29" class="RktValLink" data-pltdoc="x">&lt;</a></span><span class="stt"> </span><span class="RktSym">a</span><span class="stt"> </span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktCmt"> holds </span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29" class="RktStxLink" data-pltdoc="x">check-within</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">integrate</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">20</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="hspace">&nbsp;</span><span class="RktVal">22</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">200</span><span class="hspace">&nbsp;</span><span class="RktSym">ε</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29" class="RktStxLink" data-pltdoc="x">check-within</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">integrate</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktSym">ε</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29" class="RktStxLink" data-pltdoc="x">check-within</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">integrate</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._sqr%29%29" class="RktValLink" data-pltdoc="x">sqr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1000</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">ε</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">integrate</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#i0.0</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;165: </span>Обобщенная функция интеграции</span></p>

</blockquote></div>

<p></p>

<p>На  <a href="#%28counter._%28figure._fig~3aintegrate-test%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">165</span></a> собраны результаты первых трех шагов 
рецепта проектирования. Рисунок добавляет предназначение и очевидное 
предположение относительно двух границ интервала. Вместо 
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span> он использует <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-within%29%29" class="RktStxLink" data-pltdoc="x">check-within</a></span>, которая предвосхищает числовые
неточности, которые приходят с вычислительными приближениями в таких вычислениях. 
Аналогично, заголовок <span class="RktSym">integrate</span> указывает 
<span class="RktVal">#i0.0</span><span class="RktMeta"></span> в качестве возвращаемого
результата, сигнализируя о том, что функция, как ожидается, вернет неточное число. 
</p>

<p>Следующие два упражнения показывают, как превратить знания предметной области 
в функции интеграции. Обе функции вычисляют довольно грубые приближения. В то время 
как в конструкции первой используются только математические формулы, во второй также 
используются некоторые идеи структурной разработки. Выполнение этих упражнений дает 
необходимое понимание сути этого раздела, который представляет собой генеративно-рекурсивный
алгоритм интеграции.</p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3aintegral-kepler))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;458. Кеплер предложил простой метод интегрирования. 
Для вычисления оценки(прикидки) 
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Метод известен как <span style="font-style: italic">правило Кеплера</span>.
</span></span></span> 
площади под <span style="font-style: italic">f</span> между 
<span style="font-style: italic">a</span> и <span style="font-style: italic">b</span> 
действуйте следующим образом: 
</div><div class="SIntrapara"><ol><li>

<p>разделить интервал пополам на <span style="font-style: italic">mid = </span>(<span style="font-style: italic">a + b</span>)<span style="font-style: italic"> / </span>2<span style="font-style: italic"></span>;</p>

</li><li>

<p></p>

<div class="SIntrapara">вычислить площади этих двух  <span style="font-style: italic">трапеций</span>:
</div><div class="SIntrapara"><ul><li>

<p><span style="font-style: italic"></span>[<span style="font-style: italic"></span>(<span style="font-style: italic">a,</span>0<span style="font-style: italic"></span>)<span style="font-style: italic">,</span>(<span style="font-style: italic">a,f</span>(<span style="font-style: italic">a</span>)<span style="font-style: italic"></span>)<span style="font-style: italic">,</span>(<span style="font-style: italic">mid,</span>0<span style="font-style: italic"></span>)<span style="font-style: italic">,</span>(<span style="font-style: italic">mid,f</span>(<span style="font-style: italic">mid</span>)<span style="font-style: italic"></span>)<span style="font-style: italic"></span>]<span style="font-style: italic"></span></p>

</li><li>

<p><span style="font-style: italic"></span>[<span style="font-style: italic"></span>(<span style="font-style: italic">mid,</span>0<span style="font-style: italic"></span>)<span style="font-style: italic">,</span>(<span style="font-style: italic">mid,f</span>(<span style="font-style: italic">mid</span>)<span style="font-style: italic"></span>)<span style="font-style: italic">,</span>(<span style="font-style: italic">b,</span>0<span style="font-style: italic"></span>)<span style="font-style: italic">,</span>(<span style="font-style: italic">b,f</span>(<span style="font-style: italic">b</span>)<span style="font-style: italic"></span>)<span style="font-style: italic"></span>]<span style="font-style: italic"></span>;</p>

</li></ul></div>

<p></p>

</li><li>

<p>затем сложите обе области.</p>

</li></ol></div>

<p></p>

<p></p>

<div class="SIntrapara"><span style="font-weight: bold">Знания предметной области</span> 
Давайте взглянем на эти трапеции. Вот две возможные формы с минимальными аннотациями для 
уменьшения беспорядка: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_202.png" alt="image" width="257.0" height="256.0">
<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span>
<img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_203.png" alt="image" width="257.0" height="256.0"></p>

</blockquote></div><div class="SIntrapara">Левая форма предполагает, что 
<span style="font-style: italic">f</span>(<span style="font-style: italic">L</span>)<span style="font-style: italic"> &gt; f</span>(<span style="font-style: italic">R</span>)<span style="font-style: italic"></span>, а правая показывает случай, когда <span style="font-style: italic">f</span>(<span style="font-style: italic">L</span>)<span style="font-style: italic"> &lt; f </span>(<span style="font-style: italic">R</span>)<span style="font-style: italic"></span>. Несмотря на асимметрию, все же можно рассчитать площадь этих трапеций по единой формуле: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_204.png" alt="image" width="251" height="15"></p>

</blockquote></div><div class="SIntrapara">Стоп! Убедитесь, что эта формула 
<span style="font-weight: bold">добавляет</span> площадь треугольника к площади нижнего
прямоугольника для левой трапеции, в то время как она 
<span style="font-weight: bold">вычитает</span>  треугольник из площади большого прямоугольника 
для правой.
</div>

<p></p>

<p></p>

<div class="SIntrapara">Также покажите, что приведенная выше формула равна 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_205.png" alt="image" width="144" height="15"></p>

</blockquote></div><div class="SIntrapara">Это математическое подтверждение асимметрии формулы.
</div>

<p></p>

<p>Разработайте функцию <span class="RktSym">integrate-kepler</span>. То есть превратите
математические знания в функцию ISL+. Адаптируйте тестовые примеры из  
<a href="#%28counter._%28figure._fig~3aintegrate-test%29%29" data-pltdoc="x">рисунка&nbsp;<span class="FigureRef">165</span></a> для этого использования. Какой из трех тестов не проходит 
и на сколько?  <a href="#%28counter._%28exercise._ex~3aintegral-kepler%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3aintegral-rectangle))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;459. Другой простой метод интеграции делит область на 
множество маленьких прямоугольников. Каждый прямоугольник имеет фиксированную ширину и 
такой же высокий, как график функции в середине прямоугольника. Сложение площадей 
прямоугольников дает оценку площади под графиком функции.</p>

<p></p>

<div class="SIntrapara">Давайте использовать 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><span style="font-style: italic">R = </span>1<span style="font-style: italic"></span>0<span style="font-style: italic"></span></p>

</blockquote></div><div class="SIntrapara">обозначает количество рассматриваемых 
прямоугольников. Следовательно, ширина каждого прямоугольника равна
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_206.png" alt="image" width="89" height="12"></p>

</blockquote></div><div class="SIntrapara">Высота одного из этих прямоугольников - это 
значение <span style="font-style: italic">f</span> в его средней точке. Первая средняя 
точка явно равна <span style="font-style: italic">a</span> плюс половина ширины прямоугольника, 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_207.png" alt="image" width="56" height="12"></p>

</blockquote></div><div class="SIntrapara">что означает, что его площадь
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_208.png" alt="image" width="76" height="12"></p>

</blockquote></div><div class="SIntrapara">Чтобы вычислить площадь второго прямоугольника, 
мы должны добавить ширину одного прямоугольника к первой средней точке: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_209.png" alt="image" width="105" height="12"></p>

</blockquote></div><div class="SIntrapara">Для третьего получаем
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_210.png" alt="image" width="120" height="12"></p>

</blockquote></div><div class="SIntrapara">В общем, мы можем использовать следующую формулу 
для <span style="font-style: italic">i</span>-го прямоугольника: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_211.png" alt="image" width="118" height="12"></p>

</blockquote></div><div class="SIntrapara">Первый прямоугольник имеет индекс 
<span style="font-style: italic"></span>0<span style="font-style: italic"></span>, последний - 
<span style="font-style: italic">R - </span>1<span style="font-style: italic"></span>.</div>

<p></p>

<p></p>

<div class="SIntrapara">Используя эти прямоугольники, мы теперь можем определить площадь 
под графиком: 
</div><div class="SIntrapara"><blockquote>

<p><img src="part_five_files/pict_212.png" alt="image" width="348" height="90"></p>

</blockquote></div>

<p></p>

<p>Превратите описание процесса в функцию ISL+. Адаптируйте контрольные примеры с 
<a href="#%28counter._%28figure._fig~3aintegrate-test%29%29" data-pltdoc="x">рисунка&nbsp;<span class="FigureRef">165</span></a> к этому случаю.</p>

<p>Чем больше прямоугольников использует алгоритм, тем ближе его оценка к реальной площади.
Сделайте <span class="RktSym">R</span> константой верхнего уровня и увеличивайте ее в 
<span class="RktVal">10</span> раз, пока точность алгоритма не устранит проблемы со 
значением <span class="RktSym">ε</span>, равным  <span class="RktVal">0.1</span>.</p>

<p>Уменьшите <span class="RktSym">ε</span> до <span class="RktVal">0.01</span> и увеличьте 
<span class="RktSym">R</span> настолько, чтобы снова исключить все неудачные тестовые примеры.
Сравните результат с <a href="#%28counter._%28exercise._ex~3aintegral-kepler%29%29" data-pltdoc="x">упражнением&nbsp;458</a>. 
<a href="#%28counter._%28exercise._ex~3aintegral-rectangle%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p>Метод Кеплера в <a href="#%28counter._%28exercise._ex~3aintegral-kepler%29%29" data-pltdoc="x">упражнении&nbsp;458</a> сразу предлагает стратегию «разделяй и властвуй», 
подобную бинарному поиску, введенному в <a href="#%28part._sec~3abinary-search%29" data-pltdoc="x">Бинарном поиске</a>. Грубо говоря, алгоритм разделит интервал на две части, 
рекурсивно вычислит площадь каждой части и сложит два результата.</p>

<p><a name="(counter._(exercise._ex~3aintegral-dc))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;460. Разработайте алгоритм <span class="RktSym">integrate-dc</span>,
который интегрирует функцию <span class="RktSym">f</span> между границами 
<span class="RktSym">a</span> и <span class="RktSym">b</span>, используя стратегию 
«разделяй и властвуй». Используйте метод Кеплера, когда интервал достаточно мал.  
<a href="#%28counter._%28exercise._ex~3aintegral-dc%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p>Подход «разделяй и властвуй» в  <a href="#%28counter._%28exercise._ex~3aintegral-dc%29%29" data-pltdoc="x">упражнении&nbsp;460</a> расточителен. Рассмотрим функцию, график которой в 
одной части ровный, а в другой быстро меняется; см. <a href="#%28counter._%28figure._fig~3awave-y-function%29%29" data-pltdoc="x">рисунок&nbsp;<span class="FigureRef">166</span></a> 
для конкретного примера. Что касается уровня на графике, то разбивать интервал бессмысленно.
Вычислить трапецию для всего интервала так же легко, как и для двух половин. 
Однако для «волнистой» части алгоритм должен продолжать делить интервал до тех пор, 
пока неровности графика не станут достаточно маленькими.
</p>

<blockquote class="Figure"><a name="(counter._(figure._fig~3awave-y-function))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered">

<p><img src="part_five_files/pict_213.png" alt="image" width="400" height="400"></p>

</blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;166: </span>Кандидат на адаптивное интегрирование </span></p>

</blockquote>

<p></p>

<div class="SIntrapara">Чтобы определить, когда <span style="font-style: italic">f</span> 
находится на уровне, мы можем изменить алгоритм следующим образом. Вместо того, чтобы 
просто проверять, насколько велик интервал, новый алгоритм вычисляет площадь трех трапеций:
заданной одной и двух половин. Если разница между ними меньше площади небольшого 
прямоугольника высотой <span style="font-style: italic">ε</span> и шириной   
<img src="part_five_files/pict_214.png" alt="image" width="27" height="10">,
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_215.png" alt="image" width="51" height="12"></p>

</blockquote></div><div class="SIntrapara">можно с уверенностью предположить, что общая 
площадь является хорошим приближением. Другими словами, алгоритм определяет, настолько ли
изменяется <span style="font-style: italic">f</span>, что это влияет на допустимую погрешность.
Если так, то она продолжает придерживаться подхода «разделяй и властвуй»; в противном случае она
останавливается и использует приближение Кеплера. </div>

<p></p>

<p><a name="(counter._(exercise._ex~3aadaptive-integral))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;461. Разработайте <span class="RktSym">integrate-adaptive</span>. 
То есть превратить описание рекурсивного процесса в алгоритм ISL+. Обязательно адаптируйте 
тестовые примеры с <a href="#%28counter._%28figure._fig~3aintegrate-test%29%29" data-pltdoc="x">рисунка&nbsp;<span class="FigureRef">165</span></a> к этому использованию.</p>

<p>Не обсуждайте прекращение  <span class="RktSym">integrate-adaptive</span>.</p>

<p>Всегда ли <span class="RktSym">integrate-adaptive</span> вычисляет лучший ответ, 
чем <span class="RktSym">integrate-kepler</span> или 
<span class="RktSym">integrate-rectangles</span>? Какой аспект 
<span class="RktSym">integrate-adaptive</span> гарантированно улучшится?  
<a href="#%28counter._%28exercise._ex~3aadaptive-integral%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><span style="font-weight: bold">Терминология</span> Алгоритм называется 
<span style="font-style: italic">адаптивной интеграцией</span>, потому что он автоматически
выделяет время тем частям графа, которые в нем нуждаются, и тратит мало времени на другие. 
В частности, для тех частей <span style="font-style: italic">f</span>, которые являются 
уровнями, он выполняет всего несколько вычислений; для других частей он проверяет небольшие
интервалы, чтобы уменьшить допустимую погрешность. Информатика знает множество адаптивных
алгоритмов, и <span class="RktSym">integrate-adaptive</span> - лишь один из них. </p>

<h4>28.3<tt>&nbsp;</tt><a name="(part._sec~3aproj-gauss)"></a>Проект: Устранение(исключение) Гаусса</h4>

<p></p>

<div class="SIntrapara">Математики не только ищут решения уравнений с одной переменной; 
они также изучают целые системы линейных уравнений:
</div><div class="SIntrapara"><blockquote>

<p></p>

<div class="SIntrapara"><span style="font-weight: bold">Пример задачи</span> В мире бартера
значения угля/coal (<span style="font-style: italic">x</span>), нефти/oil
(<span style="font-style: italic">y</span>) и газа/gas (<span style="font-style: italic">z</span>)
определяются следующими уравнениями обмена: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_216.png" alt="image" width="240" height="42"></p>

</blockquote></div>

<p></p>

</blockquote></div><div class="SIntrapara">Решение такой системы уравнений состоит из 
набора чисел, по одному на каждую переменную, так что если мы заменим переменную 
соответствующим ей номером, две стороны каждого уравнения вычисляют одно и то же число. 
В нашем текущем примере решение это
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><span style="font-style: italic">x = </span>1<span style="font-style: italic"></span>, <span style="font-style: italic">y = </span>1<span style="font-style: italic"></span>, and <span style="font-style: italic">z = </span>2<span style="font-style: italic"></span>.</p>

</blockquote></div><div class="SIntrapara">Мы можем легко проверить это утверждение: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_217.png" alt="image" width="187" height="40"></p>

</blockquote></div><div class="SIntrapara">Три уравнения сводятся к
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><span style="font-style: italic"></span>1<span style="font-style: italic"></span>0<span style="font-style: italic"> = </span>1<span style="font-style: italic"></span>0<span style="font-style: italic"></span>, <span style="font-style: italic"></span>3<span style="font-style: italic"></span>1<span style="font-style: italic"> = </span>3<span style="font-style: italic"></span>1<span style="font-style: italic"></span> и <span style="font-style: italic"></span>1<span style="font-style: italic"> =</span>1<span style="font-style: italic"></span>.</p>

</blockquote></div>

<p></p>

<blockquote class="Figure"><a name="(counter._(figure._fig~3amatrix))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">An </span><a name="(tech._soe)"></a><span style="font-style: italic">SOE</span><span class="RktCmt"> is a non-empty </span><a href="part_two.html#%28tech._matrix%29" class="techoutside" data-pltdoc="x"><span class="techinside">Matrix</span></a><span class="RktCmt">.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">constraint</span><span class="RktCmt"> for </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"></span><span class="stt"> </span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic">n</span></span><span style="font-style: italic"></span><span class="RktPn">)</span><span class="RktCmt">, </span><span class="RktPn">(</span><span class="RktSym">length</span><span class="stt"> </span><span style="font-style: italic">r</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic">i</span></span><span style="font-style: italic"></span><span class="RktPn">)</span><span class="RktCmt"> is </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="stt"> </span><span class="RktSym">n</span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">interpretation</span><span class="RktCmt"> represents a system of linear equations</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">An </span><a name="(tech._equation)"></a><span style="font-style: italic">Equation</span><span class="RktCmt"> is a [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">].</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">constraint</span><span class="RktCmt"> an </span><a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a><span class="RktCmt"> contains at least two numbers. </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">interpretation</span><span class="RktCmt"> if </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span style="font-style: italic">a</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"></span><span class="stt"> </span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span style="font-style: italic">a</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic">n</span></span><span style="font-style: italic"></span><span class="stt"> </span><span style="font-style: italic">b</span><span class="RktPn">)</span><span class="RktCmt"> is an </span><a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a><span class="RktCmt">, </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-style: italic">a</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"></span><span class="RktCmt">, </span>...<span class="RktCmt">, </span><span style="font-style: italic">a</span><span style="vertical-align: sub; font-size: 80%"><span style="font-style: italic">n</span></span><span style="font-style: italic"></span><span class="RktCmt"> are the left-hand-side variable coefficients </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and </span><span style="font-style: italic">b</span><span class="RktCmt"> is the right-hand side</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._solution)"></a><span style="font-style: italic">Solution</span><span class="RktCmt"> is a [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">M</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">an </span><a href="#%28tech._soe%29" class="techoutside" data-pltdoc="x"><span class="techinside">SOE</span></a><span class="RktCmt"> </span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">an </span><a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a><span class="RktCmt"> </span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="hspace">&nbsp;</span><span class="RktVal">31</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-2</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">S</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">a </span><a href="#%28tech._solution%29" class="techoutside" data-pltdoc="x"><span class="techinside">Solution</span></a></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;167: </span>Представление данных для систем уравнений</span></p>

</blockquote>

<p>На <a href="#%28counter._%28figure._fig~3amatrix%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">167</span></a> представлено представление данных для нашей проблемной области. 
Оно включает в себя пример системы уравнений и ее решение. Это представление отражает суть 
системы уравнений, а именно числовые коэффициенты переменных в левой и правой частях значений.
Имена переменных не играют никакой роли, потому что они подобны параметрам функций; это означает,
что до тех пор, пока они последовательно переименовываются, уравнения имеют одни и те же решения.
</p>

<p></p>

<div class="SIntrapara">В оставшейся части этого раздела удобно использовать следующие функции: 
<a name="(idx._(gentag._663))"></a><a name="(idx._(gentag._664))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">extracts the left-hand side from a row in a matrix</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lhs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">M</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29" class="RktValLink" data-pltdoc="x">reverse</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29" class="RktValLink" data-pltdoc="x">reverse</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._number%29" class="techoutside" data-pltdoc="x"><span class="techinside">Number</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">extracts the right-hand side from a row in a matrix</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rhs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">M</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rhs</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._reverse%29%29" class="RktValLink" data-pltdoc="x">reverse</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div>

<p></p>

<p><a name="(counter._(exercise._ex~3agauss-data))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;462. Разработайте функцию <span class="RktSym">check-solution</span>.
Она потребляет <a href="#%28tech._soe%29" class="techoutside" data-pltdoc="x"><span class="techinside">SOE</span></a> и <a href="#%28tech._solution%29" class="techoutside" data-pltdoc="x"><span class="techinside">Solution</span></a>. Результатом будет 
<span class="RktVal">#true</span>, если вставка чисел из <a href="#%28tech._solution%29" class="techoutside" data-pltdoc="x"><span class="techinside">Solution</span></a> для 
переменных в Уравнениях(<a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a>) <a href="#%28tech._soe%29" class="techoutside" data-pltdoc="x"><span class="techinside">SOE</span></a> дает равные значения в левой и правой частях;
в противном случае функция выдаст <span class="RktVal">#false</span>. Используйте 
<span class="RktSym">check-solution</span>, чтобы сформулировать тесты с  <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29" class="RktStxLink" data-pltdoc="x">check-satisfied</a></span>.
 <a name="(idx._(gentag._665))"></a></p>

<p><span style="font-weight: bold">Подсказка</span> Первой разработайте функцию
<span class="RktSym">plug-in</span>. Она использует левую часть уравнения
(<a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a>) и <a href="#%28tech._solution%29" class="techoutside" data-pltdoc="x"><span class="techinside">Solution</span></a> и вычисляет значение левой части, 
когда числа из решения подставляются для переменных.  
<a href="#%28counter._%28exercise._ex~3agauss-data%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><span style="font-style: italic">Метод Исключения Гаусса</span> - стандартный метод 
поиска решений систем линейных уравнений. Он состоит из двух шагов. 
Первый шаг - преобразовать систему уравнений в систему разной формы, 
но с тем же решением. Второй шаг - найти решения одного уравнения за раз. 
Здесь мы сосредоточимся на первом шаге, потому что это еще один интересный 
пример генеративной рекурсии.</p>

<p></p>

<div class="SIntrapara">Первый шаг алгоритма исключения Гаусса называется «триангуляцией», 
потому что в результате получается система уравнений в форме треугольника. 
Напротив, исходная система представляет собой прямоугольник. Чтобы понять эту 
терминологию, взгляните на этот список, который представляет исходную систему: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="hspace">&nbsp;</span><span class="RktVal">31</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-2</span></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Триангуляция преобразует эту матрицу в следующую: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">9</span><span class="hspace">&nbsp;</span><span class="RktVal">21</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Как и было обещано, форма этой системы уравнений представляет собой (примерно) 
треугольник.</div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3agauss-equiv2))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;463. Убедитесь, что следующая система уравнений 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_218.png" alt="image" width="235" height="40"></p>

</blockquote></div><div class="SIntrapara">имеет то же решение, что и система, 
помеченная (<img src="part_five_files/pict_219.png" alt="image" width="5" height="11">). 
Сделайте это вручную и с помощью <span class="RktSym">check-solution</span> из
<a href="#%28counter._%28exercise._ex~3agauss-data%29%29" data-pltdoc="x">упражнения&nbsp;462</a>. 
<a href="#%28counter._%28exercise._ex~3agauss-equiv2%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p></p>

<div class="SIntrapara">Ключевая идея триангуляции - вычесть первое уравнение
(<a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a>) из оставшихся. Вычесть одно уравнение
(<a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a>) из другого означает вычесть соответствующие 
коэффициенты в двух уравнениях(<a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a>). В нашем текущем примере 
вычитание первого уравнения из второго дает следующую матрицу: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">9</span><span class="hspace">&nbsp;</span><span class="RktVal">21</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-2</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Цель этих вычитаний - поставить <span class="RktVal">0</span> в первый столбец всех уравнений,
кроме первого. Для третьего уравнения получение <span class="RktVal">0</span> в первой позиции
означает вычитание первого уравнения <span style="font-weight: bold">дважды</span> 
из третьего: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">9</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">21</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-3</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-8</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span>9</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Следуя соглашению, мы отбрасываем ведущие <span class="RktVal">0</span> в последних 
двух уравнениях: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">9</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">21</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-3</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-8</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span>9</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
То есть мы сначала умножаем каждый элемент в первой строке на <span class="RktVal">2</span>, 
а затем вычитаем результат из последней строки.
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Математика учит доказывать такие факты. Мы используем их.</span></span></span> 
Как уже упоминалось, эти вычитания не меняют решения; то есть решение исходной системы 
также является решением преобразованной. </div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3agauss-equiv))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;464. Убедитесь, что следующая система уравнений 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_220.png" alt="image" width="244" height="42"></p>

</blockquote></div><div class="SIntrapara">имеет то же решение, что и помеченное 
(<img src="part_five_files/pict_221.png" alt="image" width="5" height="11">). Снова сделайте 
это вручную и с <span class="RktSym">check-solution</span> из 
<a href="#%28counter._%28exercise._ex~3agauss-data%29%29" data-pltdoc="x">упражнения&nbsp;462</a>. <a href="#%28counter._%28exercise._ex~3agauss-equiv%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p><a name="(counter._(exercise._ex~3agauss-subtract))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;465. Разработайте <span class="RktSym">subtract</span>. Функция
использует два уравнения(<a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a>) одинаковой длины. Она “subtracts”(вычитает) число,
кратное второму уравнению, из первого, элемент за элементом, так что полученное уравнение
(<a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a>) имеет <span class="RktVal">0</span> в первой позиции.
Поскольку известно, что <span class="RktVal">0</span> ,  <span class="RktSym">subtract</span>
возвращает оставшуюся часть списка, полученного в результате вычитаний.
 <a href="#%28counter._%28exercise._ex~3agauss-subtract%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara">Теперь рассмотрим остальную часть <a href="#%28tech._soe%29" class="techoutside" data-pltdoc="x"><span class="techinside">SOE</span></a>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">9</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">21</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-3</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-8</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span>9</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Это тоже <a href="#%28tech._soe%29" class="techoutside" data-pltdoc="x"><span class="techinside">SOE</span></a>, поэтому мы можем снова применить тот же алгоритм. 
В нашем текущем примере следующий шаг вычитания требует вычитания первого уравнения
(<a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a>) <span class="RktVal"><span class="nobreak">-1</span></span> раз из второго. Это дает 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">9</span><span class="hspace">&nbsp;</span><span class="RktVal">21</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Остальная часть этого SOE представляет собой единое уравнение и не может быть упрощена.</div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3atriangulate1))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;466. Вот представление треугольных SOEs: 
<a name="(idx._(gentag._666))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._tm)"></a><span style="font-style: italic">TM</span><span class="RktCmt"> is an [</span><a href="part_three.html#%28tech._sim-dd._nelist._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">NEList-of</span></a><span class="RktCmt"> </span><a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">such that the </span><a href="#%28tech._equation%29" class="techoutside" data-pltdoc="x"><span class="techinside">Equation</span></a><span class="RktCmt">s are of decreasing length: </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span style="font-style: italic">n + </span>1<span style="font-style: italic"></span><span class="RktCmt">, </span><span style="font-style: italic">n</span><span class="RktCmt">, </span><span style="font-style: italic">n - </span>1<span style="font-style: italic"></span><span class="RktCmt">, </span>...<span class="RktCmt">, </span><span style="font-style: italic"></span>2<span style="font-style: italic"></span><span class="RktCmt">. </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">interpretation</span><span class="RktCmt"> represents a triangular matrix</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Разработайте алгоритм триангуляции - <span class="RktSym">triangulate</span>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._soe%29" class="techoutside" data-pltdoc="x"><span class="techinside">SOE</span></a><span class="RktCmt"> -&gt; </span><a href="#%28tech._tm%29" class="techoutside" data-pltdoc="x"><span class="techinside">TM</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">triangulates the given system of equations </span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">triangulate</span><span class="hspace">&nbsp;</span><span class="RktSym">M</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Превратите приведенный выше пример в тест и дайте точные ответы на четыре вопроса 
на основе нашего подробного описания.</div>

<p></p>

<p>Не занимайтесь пока завершающим этапом рецепта дизайна. 
<a href="#%28counter._%28exercise._ex~3atriangulate1%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara">К сожалению, решение 
<a href="#%28counter._%28exercise._ex~3atriangulate1%29%29" data-pltdoc="x">упражнения&nbsp;466</a> иногда не дает желаемой треугольной системы. Рассмотрим следующее представление системы
уравнений: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-2</span></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-2</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Его решение:  <span style="font-style: italic">x = </span>1<span style="font-style: italic"></span>, <span style="font-style: italic">y = </span>1<span style="font-style: italic"></span>, and <span style="font-style: italic">z = </span>1<span style="font-style: italic"></span>.</div>

<p></p>

<p></p>

<div class="SIntrapara">Первый шаг - вычесть первую строку из второй и дважды вычесть ее 
из последней, что дает следующую матрицу: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-5</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-5</span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-8</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-4</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span>2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Затем триангуляция сосредоточится на остальной части матрицы: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-5</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-5</span></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-8</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-4</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span>2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
но первый элемент этой матрицы равен <span class="RktVal">0</span>. Поскольку невозможно
разделить на <span class="RktVal">0</span>, алгоритм сигнализирует об ошибке через 
 <span class="RktSym">subtract</span>.</div>

<p></p>

<p></p>

<div class="SIntrapara">Чтобы преодолеть эту проблему, нам нужно использовать еще одну 
часть знаний из нашей проблемной области. Математика говорит нам, что переключение уравнений 
в системе уравнений не влияет на решение. Конечно, когда мы меняем уравнения, мы должны 
в конечном итоге найти уравнение, старший коэффициент которого не равен 0. Здесь мы можем 
просто поменять местами первые два: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-8</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-4</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span>2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-5</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-5</span></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Отсюда мы можем продолжить, как и раньше, вычитая первое уравнение из оставшегося 
<span class="RktVal">0</span> раз. Итоговая треугольная матрица: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-8</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-4</span></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span>2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-5</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-5</span></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Стоп! Покажите, что <span style="font-style: italic">x = </span>1<span style="font-style: italic"></span>, <span style="font-style: italic">y = </span>1<span style="font-style: italic"></span> и <span style="font-style: italic">z = </span>1<span style="font-style: italic"></span> 
все еще является решением этих уравнений.</div>

<p></p>

<p><a name="(counter._(exercise._ex~3atriangulate2))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;467. Измените алгоритм <span class="RktSym">triangulate</span>
из <a href="#%28counter._%28exercise._ex~3atriangulate1%29%29" data-pltdoc="x">упражнения&nbsp;466</a> так, чтобы он сначала вращал уравнения, чтобы найти уравнение с ведущим коэффициентом, 
отличным от <span class="RktVal">0</span>, прежде чем вычтет первое уравнение из оставшихся.</p>

<p>Завершается ли этот алгоритм для всех возможных систем уравнений?</p>

<p></p>

<div class="SIntrapara"><span style="font-weight: bold">Подсказка</span>  Следующее выражение
вращает непустой список <span class="RktSym">L</span>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p>

</blockquote></div><div class="SIntrapara">Объяснить, почему. <a href="#%28counter._%28exercise._ex~3atriangulate2%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p></p>

<div class="SIntrapara">У некоторых <a href="#%28tech._soe%29" class="techoutside" data-pltdoc="x"><span class="techinside">SOE</span></a>s нет решения. Взгляните на это: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_222.png" alt="image" width="176" height="42"></p>

</blockquote></div><div class="SIntrapara">Если вы попытаетесь триангулировать эту SOE - 
вручную или с помощью решения из 
<a href="#%28counter._%28exercise._ex~3atriangulate2%29%29" data-pltdoc="x">упражнения&nbsp;467</a>
- вы получите промежуточную матрицу, все уравнения которой начинаются с 
<span class="RktVal">0</span>:
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_223.png" alt="image" width="176" height="27"></p>

</blockquote></div>

<p></p>

<p><a name="(counter._(exercise._ex~3atriangulate3))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;468. Измените <span class="RktSym">triangulate</span> из 
<a href="#%28counter._%28exercise._ex~3atriangulate2%29%29" data-pltdoc="x">упражнения&nbsp;467</a>
так, чтобы она сигнализировала об ошибке при обнаружении <a href="#%28tech._soe%29" class="techoutside" data-pltdoc="x"><span class="techinside">SOE</span></a>, 
все ведущие коэффициенты которой равны  <span class="RktVal">0</span>. 
<a href="#%28counter._%28exercise._ex~3atriangulate3%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara">После получения треугольной системы уравнений, такой как 
<span style="font-style: italic"></span>(<span style="font-style: italic">*</span>)<span style="font-style: italic"></span> в <a href="#%28counter._%28exercise._ex~3agauss-equiv2%29%29" data-pltdoc="x">exercise&nbsp;463</a>, мы можем решать уравнения по одному. В нашем конкретном
примере последнее уравнение говорит, что <span style="font-style: italic">z</span> равно 
<span style="font-style: italic"></span>2<span style="font-style: italic"></span>. 
Обладая этими знаниями, мы можем исключить <span style="font-style: italic">z</span> из 
второго уравнения с помощью замены(подстановки значения вместо переменной): 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_224.png" alt="image" width="94" height="10"></p>

</blockquote></div><div class="SIntrapara">Это, в свою очередь, определяет значение 
<span style="font-style: italic">y</span>:
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_225.png" alt="image" width="101" height="12"></p>

</blockquote></div><div class="SIntrapara">Теперь, когда у нас есть 
<span style="font-style: italic">z = </span>2<span style="font-style: italic"></span> и 
<span style="font-style: italic">y = </span>1<span style="font-style: italic"></span>, 
мы можем подставить эти значения в первое уравнение: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_226.png" alt="image" width="131" height="9"></p>

</blockquote></div><div class="SIntrapara">Это дает еще одно уравнение с одной переменной, 
которое мы решаем следующим образом: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img src="part_five_files/pict_227.png" alt="image" width="147" height="12"></p>

</blockquote></div><div class="SIntrapara">Это, наконец, дает значение для 
<span style="font-style: italic">x</span> и, таким образом, полное решение для всей
<a href="#%28tech._soe%29" class="techoutside" data-pltdoc="x"><span class="techinside">SOE</span></a>.</div>

<p></p>

<p><a name="(counter._(exercise._ex~3agauss-solve))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;469. Разработайте функцию <span class="RktSym">solve</span> . 
Она потребляет <a href="#%28tech._soe%29" class="techoutside" data-pltdoc="x"><span class="techinside">SOE</span></a>s и дает решение. </p>

<p><span style="font-weight: bold">Hint</span> Используйте структурную рекурсию для 
разработки. Начните с разработки функции, которая решает одно линейное уравнение с 
 <span style="font-style: italic">n+</span>1<span style="font-style: italic"></span> переменными,
учитывая решение для последних <span style="font-style: italic">n</span> переменных. 
Как правило, эта функция подставляет значения для оставшейся части левой части, 
вычитает результат из правой части и делит на первый коэффициент. Поэкспериментируйте 
с этим предложением и приведенными выше примерами.
</p>

<p><span style="font-weight: bold">Задача</span>  Используйте существующую абстракцию и 
span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span> для разработки 
<span class="RktSym">solve</span>. <a href="#%28counter._%28exercise._ex~3agauss-solve%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3agauss-complete))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;470. Разработайте <span class="RktSym">gauss</span>,
которая объединяет функцию <span class="RktSym">triangulate</span> из 
<a href="#%28counter._%28exercise._ex~3atriangulate3%29%29" data-pltdoc="x">упражнения&nbsp;468</a>
и функцию <span class="RktSym">solve</span> из 
<a href="#%28counter._%28exercise._ex~3agauss-solve%29%29" data-pltdoc="x">упражнения&nbsp;469</a>. 
 <a href="#%28counter._%28exercise._ex~3agauss-complete%29%29" class="ex-end" data-pltdoc="x"></a></p>

<h3>29<tt>&nbsp;</tt><a name="(part._ch~3abacktrack)"></a>Алгоритмы, которые Backtrack(возвращаются/отступают назад)</h3>

<p>Решение проблем не всегда идет по прямой. Иногда мы можем следовать одному подходу 
и обнаруживать, что мы застряли из-за того, что ошиблись. Один из очевидных вариантов - 
вернуться к тому месту, где мы приняли судьбоносное решение, и сделать другой поворот. 
Некоторые алгоритмы работают именно так. В этой главе представлены два примера. 
Первый раздел посвящен алгоритму обхода графов. Второе - это расширенное упражнение, 
в котором используется возврат в контексте шахматной головоломки. </p>

<h4>29.1<tt>&nbsp;</tt><a name="(part._fsm._sec~3atraverse-graph1)"></a>Проход(путешествие) по Графам</h4>

<p>Графики вездесущи в нашем мире и мире вычислений. Представьте себе группу людей, 
скажем, учеников вашей школы. Запишите все имена и соедините имена тех людей, которые 
знают друг друга. Вы только что создали свой первый неориентированный граф.</p>

<p>Теперь взгляните на <a href="#%28counter._fsm._%28figure._fig~3agraph%29%29" data-pltdoc="x">рисунок&nbsp;<span class="FigureRef">168</span></a>, на котором изображен 
небольшой ориентированный граф. Он состоит из семи узлов - обведенных букв - 
и девяти ребер - стрелок. Граф может представлять собой уменьшенную версию сети 
электронной почты. Представьте себе компанию и все электронные письма, которые ходят 
туда-сюда. Запишите электронные адреса всех сотрудников. Затем, адрес за адресом, 
нарисуйте стрелку от адреса ко всем тем адресам, на которые владелец рассылает электронные 
письма в течение недели. Вот как вы создадите ориентированный граф на  
<a href="#%28counter._fsm._%28figure._fig~3agraph%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">168</span></a>, хотя он может в конечном итоге выглядеть намного более 
сложным, почти непонятным. </p>

<blockquote class="Herefigure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered">

<p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_228.png" alt="image" width="606" height="206"></p>

</blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._fsm._(figure._fig~3agraph))" x-target-lift="Figure"></a>Рисунок&nbsp;168: </span>Ориентированный граф</span></p>

</blockquote>

<p></p>

<div class="SIntrapara">В общем, <span style="font-style: italic">graph</span>(граф) состоит 
из набора <span style="font-style: italic">nodes</span>(узлов) и набора 
<span style="font-style: italic">edges</span>(ребер), которые соединяют узлы. В 
<span style="font-style: italic">directed graph</span>(ориентированном графе) ребра 
представляют собой односторонние связи между узлами; в 
<span style="font-style: italic">undirected graph</span>(неориентированном графе) ребра
представляют собой двусторонние связи между узлами. В этом контексте распространенным типом
проблемы является следующее: 
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Социологи используют такие алгоритмы для определения структуры власти в компании. 
Точно так же они используют такие графы для прогнозирования возможных действий людей, 
даже не зная о содержании своих электронных писем.
</span></span></span>
</div><div class="SIntrapara"><blockquote>

<p><span style="font-weight: bold">Пример задачи</span> Разработайте алгоритм, 
который предлагает способ познакомить одного человека с другим в ориентированном графе 
электронной почты для крупной компании. Программа использует ориентированный граф, 
представляющий установленные соединения электронной почты и два адреса электронной почты. 
Он возвращает последовательность адресов электронной почты, которые связывают первое письмо 
со вторым.
</p>

</blockquote></div><div class="SIntrapara">Ученые-математики называют желаемую последовательность
путем - <span style="font-style: italic">path</span>.</div>

<p></p>

<p></p>

<div class="SIntrapara"><a href="#%28counter._fsm._%28figure._fig~3agraph%29%29" data-pltdoc="x">Рисунок&nbsp;<span class="FigureRef">168</span></a> конкретизирует пример 
проблемы. Например, вы можете проверить, может ли программа найти путь от 
<span style="font-style: italic">C</span> к <span style="font-style: italic">D</span>. 
Этот конкретный путь состоит из исходного узла <span style="font-style: italic">C</span> 
и конечного узла <span style="font-style: italic">D</span>. Напротив, если вы хотите 
соединить <span style="font-style: italic">E</span> с 
<span style="font-style: italic">D</span>, есть два пути:
</div><div class="SIntrapara"><ul><li>

<p> отправьте электронное письмо от <span style="font-style: italic">E</span> к 
<span style="font-style: italic">F</span>, а затем к 
<span style="font-style: italic">D</span>.</p>

</li><li>

<p> отправьте его из <span style="font-style: italic">E</span> к 
<span style="font-style: italic">C</span>, а затем в 
<span style="font-style: italic">D</span>.</p>

</li></ul></div><div class="SIntrapara">Иногда невозможно соединить два узла путем. На графе 
<a href="#%28counter._fsm._%28figure._fig~3agraph%29%29" data-pltdoc="x">рисунка&nbsp;<span class="FigureRef">168</span></a> вы не можете перейти от 
<span style="font-style: italic">C</span> к <span style="font-style: italic">G</span>, 
следуя стрелкам. </div>

<p></p>

<p>Глядя на <a href="#%28counter._fsm._%28figure._fig~3agraph%29%29" data-pltdoc="x">рисунок&nbsp;<span class="FigureRef">168</span></a>, вы можете легко понять, 
как перейти от одного узла к другому, не задумываясь о том, как вы это сделали. Итак, 
представьте на мгновение, что граф на  <a href="#%28counter._fsm._%28figure._fig~3agraph%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">168</span></a> представляет собой большой 
парк. Также представьте, что кто-то говорит, что вы находитесь в точке 
<span style="font-style: italic">E</span> и вам нужно добраться до 
<span style="font-style: italic">G</span>. Вы можете ясно видеть два пути, один из которых ведет к точке <span style="font-style: italic">C</span>, а другой - к 
<span style="font-style: italic">F</span>. Следуйте по первому пути и обязательно помните, 
что также можно добраться от <span style="font-style: italic">E</span> до 
<span style="font-style: italic">F</span>. Теперь у вас есть новая проблема, а именно, как
добраться от <span style="font-style: italic">C</span> до 
<span style="font-style: italic">G</span>. Ключевое понимание состоит в том, что эта новая
проблема точно такая же, как и исходная проблема; она просит вас найти путь от одного узла 
к другому. Более того, если вы можете решить проблему, вы знаете, как перейти от 
<span style="font-style: italic">E</span> к <span style="font-style: italic">G</span> - 
просто добавьте шаг от <span style="font-style: italic">E</span> к 
<span style="font-style: italic">C</span>. Но нет пути от  
<span style="font-style: italic">C</span> к
<span style="font-style: italic">G</span>. К счастью, вы помните, что также можно перейти от 
<span style="font-style: italic">E</span> к <span style="font-style: italic">F</span>, 
что означает, что вы можете вернуться(<span style="font-style: italic">backtrack</span>) 
к некоторой точке, где у вас есть выбор, и начать поиск оттуда. </p>

<p></p>

<div class="SIntrapara">Теперь давайте систематически разработаем этот алгоритм. Следуя 
общему рецепту проектирования, мы начинаем с анализа данных. Вот два компактных представления
графа на  <a href="#%28counter._fsm._%28figure._fig~3agraph%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">168</span></a>  в виде списков:
</div><div class="SIntrapara"><blockquote class="SCentered"><table cellspacing="0" cellpadding="0"><tbody><tr><td><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sample-graph</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">A</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">B</span><span class="hspace">&nbsp;</span><span class="RktVal">E</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">B</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">E</span><span class="hspace">&nbsp;</span><span class="RktVal">F</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">D</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">E</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">F</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">F</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktVal">G</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">G</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></tbody></table></td><td>

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sample-graph</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">A</span><span class="hspace">&nbsp;</span><span class="RktVal">B</span><span class="hspace">&nbsp;</span><span class="RktVal">E</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">B</span><span class="hspace">&nbsp;</span><span class="RktVal">E</span><span class="hspace">&nbsp;</span><span class="RktVal">F</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">D</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">D</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">E</span><span class="hspace">&nbsp;</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">F</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">F</span><span class="hspace">&nbsp;</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktVal">G</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">G</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></tbody></table></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Оба содержат по одному списку на узел. Каждый из этих списков начинается с имени узла, 
за которым следуют его (непосредственные) соседи(<span style="font-style: italic">neighbors</span>), то есть узлы, достижимые по одной стрелке. Они отличаются тем, как они соединяют 
(имя) узла и его соседей: левый использует <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span>, а правый - <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span>.
Например, второй список представляет узел <span style="font-style: italic">B</span>  с двумя
выходящими из него ребрами к <span style="font-style: italic">E</span> и
<span style="font-style: italic">F</span> на 
<a href="#%28counter._fsm._%28figure._fig~3agraph%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">168</span></a>. Слева <span class="RktVal">'</span><span class="RktVal">B</span>
- это первое имя в двухэлементном списке; справа это первое имя в списке из трех элементов. 
</div>

<p></p>

<p><a name="(counter._fsm._(exercise._ex~3arepresent-graph))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;471. Переведите одно из приведенных выше определений в 
правильную форму списка, используя <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span> и соответствующие символы.</p>

<p></p>

<div class="SIntrapara">Представление данных для узлов простое: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._fsm._node)"></a><span style="font-style: italic">Node</span><span class="RktCmt"> is a </span><a href="i2-3.html#%28tech._symbol%29" class="techoutside" data-pltdoc="x"><span class="techinside">Symbol</span></a><span class="RktCmt">.</span></p>

</blockquote></div><div class="SIntrapara">Сформулируйте определение данных для описания 
класса всех представлений <a name="(tech._fsm._graph)"></a><span style="font-style: italic">Graph</span>, допускающих произвольное количество узлов и ребер. Только одно из представленных выше
представлений должно принадлежать <a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a>.</div>

<p></p>

<p>Создайте функцию <span class="RktSym">neighbors</span>(соседи). Она потребляет 
Узел(<a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a> <span class="RktSym">n</span>) и Граф
(<a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a> <span class="RktSym">g</span>) и создает список ближайших
соседей  <span class="RktSym">n</span> в графе <span class="RktSym">g</span>. 
<a href="#%28counter._fsm._%28exercise._ex~3arepresent-graph%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara">Используя ваши определения данных для <a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a> и 
<a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a> - независимо от того, какой из них вы выбрали, если вы 
также спроектировали <span class="RktSym">neighbors</span>, - теперь мы можем сформулировать
сигнатуру и предназначение для <span class="RktSym">find-path</span>, функции, которая ищет 
путь на графе: 
<a name="(idx._fsm._(gentag._667._fsm))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds a path from </span><span class="RktSym">origination</span><span class="RktCmt"> to </span><span class="RktSym">destination</span><span class="RktCmt"> in </span><span class="RktSym">G</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Этот заголовок оставляет открытой точную форму результата. Он подразумевает, что результатом
является список узлов, но не говорит, какие узлы он содержит.</div>

<p></p>

<p></p>

<div class="SIntrapara">Чтобы понять эту двусмысленность и ее значение, давайте изучим
приведенные выше примеры. В ISL+ теперь мы можем сформулировать их так: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">sample-graph</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">E</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">sample-graph</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">G</span><span class="hspace">&nbsp;</span><span class="RktSym">sample-graph</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Первый вызов <span class="RktSym">find-path</span> должен возвращать уникальный путь, 
второй должен выбирать один из двух, а третий должен сигнализировать, что нет пути от 
<span class="RktVal">'</span><span class="RktVal">C</span> к 
<span class="RktVal">'</span><span class="RktVal">G</span> в 
<span class="RktSym">sample-graph</span>. Итак, вот две возможности, как построить 
возвращаемое значение:
</div><div class="SIntrapara"><ul><li>

<p>Результат функции состоит из всех узлов, ведущих от 
<span class="RktSym">origination</span>(исходного) узла к 
<span class="RktSym">destination</span>(целевому) узлу, включая эти два. 
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Легко представить  себе другие, например пропуск любого из двух заданных узлов. 
</span></span></span>
В этом случае пустой путь может использоваться для обозначения отсутствия пути между 
двумя узлами. 
</p>

</li><li>

<p>В качестве альтернативы, поскольку в самом вызове уже перечислены два узла, 
в выходных данных могут упоминаться только “interior”(внутренние) узлы пути. 
Тогда ответ на первый вызов будет <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>, потому что <span class="RktVal">'</span><span class="RktVal">D</span>
является непосредственным соседом <span class="RktVal">'</span><span class="RktVal">C</span>.
Конечно, в этом случае <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span> больше не может сигнализировать об ошибке.</p>

</li></ul></div><div class="SIntrapara">Что касается проблемы отсутствия пути, мы должны 
выбрать отдельное значение для обозначения этого понятия. Поскольку <span class="RktVal">#false</span> отличается, имеет смысл и работает в любом случае, мы выбираем его. Что касается 
проблемы с несколькими путями, мы пока откладываем выбор и перечисляем обе возможности в 
разделе примеров: 
 <a name="(idx._fsm._(gentag._668._fsm))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._fsm._path)"></a><span style="font-style: italic">Path</span><span class="RktCmt"> is a [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt">].</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">interpretation</span><span class="RktCmt"> The list of nodes specifies a sequence</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of immediate neighbors that leads from the first </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt"> on the list to the last one. </span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._maybe%29" class="techoutside" data-pltdoc="x"><span class="techinside">Maybe</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._path%29" class="techoutside" data-pltdoc="x"><span class="techinside">Path</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds a path from </span><span class="RktSym">origination</span><span class="RktCmt"> to </span><span class="RktSym">destination</span><span class="RktCmt"> in </span><span class="RktSym">G</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">if there is no path, the function produces </span><span class="RktVal">#false</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">sample-graph</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">D</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-member-of%29%29" class="RktStxLink" data-pltdoc="x">check-member-of</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">E</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">sample-graph</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">E</span><span class="hspace">&nbsp;</span><span class="RktVal">F</span><span class="hspace">&nbsp;</span><span class="RktVal">D</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">E</span><span class="hspace">&nbsp;</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">D</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-expect%29%29" class="RktStxLink" data-pltdoc="x">check-expect</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">G</span><span class="hspace">&nbsp;</span><span class="RktSym">sample-graph</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#false</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">#false</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara">Наш следующий шаг проектирования - понять четыре основных 
части функции: условие «тривиальной проблемы», подходящее решение, создание новой 
проблемы и этап комбинирования. Вышеупомянутое обсуждение процесса поиска и анализ 
трех примеров предлагают ответы:
</div><div class="SIntrapara"><ol><li>

<p>Если два заданных узла напрямую соединены стрелкой в данном графе, путь состоит 
только из этих двух узлов. Но есть еще более простой случай, а именно, когда аргумент 
начала(<span class="RktSym">origination</span>) для <span class="RktSym">find-path</span> 
равен его месту назначения(<span class="RktSym">destination</span>).</p>

</li><li>

<p>Во втором случае проблема действительно тривиальна, и соответствующий ответ - 
<span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="stt"> </span><span class="RktSym">destination</span><span class="RktPn">)</span>.</p>

</li><li>

<p>Если аргументы различны, алгоритм должен проверить всех непосредственных соседей 
<span class="RktSym">origination</span>(источника) и определить, существует ли путь от 
любого из них к <span class="RktSym">destination</span>(месту назначения). Другими словами, 
выбор одного из этих соседей порождает новый экземпляр проблемы “find a
path”(найти путь).</p>

</li><li>

<p>Наконец, как только у алгоритма есть путь от соседа 
<span class="RktSym">origination</span>(источника) к 
<span class="RktSym">destination</span>(месту назначения), легко построить полный 
путь от первого ко второму - просто добавьте <span class="RktSym">origination</span>(исходный)
узел в список. </p>

</li></ol></div><div class="SIntrapara">С точки зрения программирования критически 
важен третий момент. Поскольку у узла может быть произвольное количество соседей, 
задача “inspect all neighbors”(проверить всех соседей) слишком сложна для одного примитива. 
Нам нужна вспомогательная функция, которая потребляет список узлов и генерирует 
новую задачу пути для каждого из них. Другими словами, функция представляет собой 
ориентированную на список версию <span class="RktSym">find-path</span>.</div>

<p></p>

<p></p>

<div class="SIntrapara">Назовем эту вспомогательную функцию 
<span class="RktSym">find-path/list</span> и сформулируем для нее пожелание:  
<a name="(idx._fsm._(gentag._669._fsm))"></a> <a name="(idx._fsm._(gentag._670._fsm))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt">] </span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._maybe%29" class="techoutside" data-pltdoc="x"><span class="techinside">Maybe</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._path%29" class="techoutside" data-pltdoc="x"><span class="techinside">Path</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds a path from some node on </span><span class="RktSym">lo-originations</span><span class="RktCmt"> to</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktSym">destination</span><span class="RktCmt">; otherwise, it produces </span><span class="RktVal">#false</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path/list</span><span class="hspace">&nbsp;</span><span class="RktSym">lo-originations</span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">#false</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Используя это пожелание, мы можем заполнить общий шаблон для генеративно-рекурсивных функций,
чтобы получить первый черновик  <span class="RktSym">find-path</span>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29" class="RktValLink" data-pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">(</span><span class="RktSym">find-path/list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">neighbors</span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">destination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Она использует <span class="RktSym">neighbors</span> из 
<a href="#%28counter._fsm._%28exercise._ex~3arepresent-graph%29%29" data-pltdoc="x">упражнения&nbsp;471</a> и функцию списка пожеланий 
<span class="RktSym">find-path/list</span>, а также ответы на четыре вопроса о 
генеративных рекурсивных функциях.</div>

<p></p>

<p></p>

<div class="SIntrapara">Остальная часть процесса проектирования касается деталей 
правильного составления этих функций. Рассмотрим сигнатуру 
<span class="RktSym">find-path/list</span>. Как и <span class="RktSym">find-path</span>, 
она производит [<a href="part_three.html#%28tech._sim-dd._maybe%29" class="techoutside" data-pltdoc="x"><span class="techinside">Maybe</span></a> <a href="#%28tech._fsm._path%29" class="techoutside" data-pltdoc="x"><span class="techinside">Path</span></a>]. То есть, 
если она находит путь от любого из соседей, она создает этот путь; в противном случае, если ни один из соседей не соединен с <span class="RktSym">destination</span>(местом назначения), 
функция выдает <span class="RktVal">#false</span>. Следовательно, ответ 
<span class="RktSym">find-path</span> зависит от типа результата, который выдает 
<span class="RktSym">find-path/list</span>, а это означает, что код должен различать 
два возможных ответа с помощью выражения <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span>:  
<a name="(idx._fsm._(gentag._671._fsm))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29" class="RktValLink" data-pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">next</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">neighbors</span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">candidate</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path/list</span><span class="hspace">&nbsp;</span><span class="RktSym">next</span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">candidate</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons~3f%29%29" class="RktValLink" data-pltdoc="x">cons?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">candidate</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Эти два случая отражают два типа ответов, которые мы можем получить: 
<a href="part_one.html#%28tech._boolean%29" class="techoutside" data-pltdoc="x"><span class="techinside">Boolean</span></a>(логическое значение) или список. В первом случае 
<span class="RktSym">find-path/list</span> не может найти путь от любого соседа к 
<span class="RktSym">destination</span>(месту назначения), что означает, что сам 
<span class="RktSym">find-path</span> также не может построить такой путь. 
Во втором случае вспомогательная функция нашла путь, но <span class="RktSym">find-path</span>
все равно должен добавлять <span class="RktSym">origination</span>(источник) в начало этого пути,
потому что <span class="RktSym">candidate</span>(кандидат) начинается с одного из соседей
<span class="RktSym">origination</span>(источника), а не с самого 
<span class="RktSym">origination</span>(источника), как принято выше. 
</div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(idx._fsm._(gentag._672._fsm))"></a>
<a name="(idx._fsm._(gentag._673._fsm))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._fsm._(figure._fig~3afind-path-code))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._maybe%29" class="techoutside" data-pltdoc="x"><span class="techinside">Maybe</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._path%29" class="techoutside" data-pltdoc="x"><span class="techinside">Path</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds a path from </span><span class="RktSym">origination</span><span class="RktCmt"> to </span><span class="RktSym">destination</span><span class="RktCmt"> in </span><span class="RktSym">G</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">if there is no path, the function produces </span><span class="RktVal">#false</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._symbol~3d~3f%29%29" class="RktValLink" data-pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">next</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">neighbors</span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">candidate</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path/list</span><span class="hspace">&nbsp;</span><span class="RktSym">next</span><span class="hspace">&nbsp;</span><span class="RktSym">destination</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">candidate</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#false</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktSym">origination</span><span class="hspace">&nbsp;</span><span class="RktSym">candidate</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt">] </span><a href="#%28tech._fsm._node%29" class="techoutside" data-pltdoc="x"><span class="techinside">Node</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._maybe%29" class="techoutside" data-pltdoc="x"><span class="techinside">Maybe</span></a><span class="RktCmt"> </span><a href="#%28tech._fsm._path%29" class="techoutside" data-pltdoc="x"><span class="techinside">Path</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds a path from some node on </span><span class="RktSym">lo-Os</span><span class="RktCmt"> to </span><span class="RktSym">D</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">if there is no path, the function produces </span><span class="RktVal">#false</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path/list</span><span class="hspace">&nbsp;</span><span class="RktSym">lo-Os</span><span class="hspace">&nbsp;</span><span class="RktSym">D</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lo-Os</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#false</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">candidate</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._first%29%29" class="RktValLink" data-pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lo-Os</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">D</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">candidate</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path/list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._rest%29%29" class="RktValLink" data-pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lo-Os</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">D</span><span class="hspace">&nbsp;</span><span class="RktSym">G</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktSym">candidate</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;169: </span>Поиск пути на графе</span></p>

</blockquote></div>

<p></p>

<p><a href="#%28counter._fsm._%28figure._fig~3afind-path-code%29%29" data-pltdoc="x">Рисунок&nbsp;<span class="FigureRef">169</span></a> содержит полное 
определение <span class="RktSym">find-path</span>. Он также содержит определение 
<span class="RktSym">find-path/list</span>, которая обрабатывает свой первый аргумент 
посредством <a name="(idx._fsm._(gentag._674._fsm))"></a>структурной рекурсии. Для каждого 
узла в списке <span class="RktSym">find-path/list</span> использует 
<span class="RktSym">find-path</span> для проверки пути. Если 
<span class="RktSym">find-path</span> действительно создает путь, этот путь является 
его ответом. В противном случае команда <span class="RktSym">find-path/list</span> 
выполняет возврат(backtracks).</p>

<p><span style="font-weight: bold">Примечание</span> 
<a href="part_four.html#%28part._sec~3abtrees%29" data-pltdoc="x">Trees/Деревья</a> обсуждает
возврат в структурном мире. Особенно хорошим примером является функция, которая ищет 
голубоглазых предков в генеалогическом древе. Когда функция встречает узел, она сначала 
проводит поиск по одной ветви семейного дерева, скажем, отцовской, а если этот поиск дает
<span class="RktVal">#false</span>, она ищет по другой половине. Поскольку графы обобщают 
деревья, сравнение этой функции с <span class="RktSym">find-path</span> является 
поучительным упражнением.  <span style="font-weight: bold">Конец</span></p>

<p>Наконец, нам нужно проверить, дает ли <span class="RktSym">find-path</span> ответ для 
всех возможных входных данных. Относительно легко проверить, что для графа на 
<a href="#%28counter._fsm._%28figure._fig~3agraph%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">168</span></a> и любых двух узлов в этом графе 
<span class="RktSym">find-path</span> всегда дает какой-то ответ. Стоп! Решите следующее
упражнение, прежде чем читать дальше. </p>

<p><a name="(counter._fsm._(exercise._ex~3afind-path2))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;472. Проверьте <span class="RktSym">find-path</span>. 
Используйте эту функцию, чтобы найти путь от 
<span class="RktVal">'</span><span class="RktVal">A</span> к 
<span class="RktVal">'</span><span class="RktVal">G</span> в <span class="RktSym">sample-graph</span>. Какой из них находит? Почему?
</p>

<p>Разработайте функцию <span class="RktSym">test-on-all-nodes</span>, которая использует граф
<span class="RktSym">g</span> и определяет, существует ли путь между любой парой узлов. 
<a href="#%28counter._fsm._%28exercise._ex~3afind-path2%29%29" class="ex-end" data-pltdoc="x"></a></p>

<blockquote class="Figure"><a name="(counter._fsm._(figure._fig~3acyclic-graph))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered">

<p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_229.png" alt="image" width="606" height="206"></p>

</blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;170: </span>Ориентированный граф с циклом </span></p>

</blockquote>

<p>Однако для других графов <span class="RktSym">find-path</span> может не завершаться 
для определенных пар узлов. Рассмотрим граф на 
<a href="#%28counter._fsm._%28figure._fig~3acyclic-graph%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">170</span></a>.</p>

<p>Стоп! Определите <span class="RktSym">cyclic-graph</span> для представления графа на 
этом рисунке.</p>

<p></p>

<div class="SIntrapara">По сравнению с <a href="#%28counter._fsm._%28figure._fig~3agraph%29%29" data-pltdoc="x">рисунком&nbsp;<span class="FigureRef">168</span></a>, этот новый граф 
содержит только одно дополнительное ребро, от <span style="font-style: italic">C</span> до
<span style="font-style: italic">B</span>. Это, казалось бы, небольшое дополнение, однако,
оно позволяет нам начать поиск в узле и вернуться к тому же узлу. В частности, можно перейти 
от <span style="font-style: italic">B</span> к <span style="font-style: italic">E</span> и к
<span style="font-style: italic">C</span> и обратно к <span style="font-style: italic">B</span>.
Действительно, когда <span class="RktSym">find-path</span> применяется к 
span class="RktVal">'</span><span class="RktVal">B</span>, <span class="RktVal">'</span><span class="RktVal">D</span> и этому графу, она не может остановиться, как подтверждает 
ручное (пошаговое) вычисление: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">B</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">cyclic-graph</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">B</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">cyclic-graph</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path/list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">E</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">F</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">cyclic-graph</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">E</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">cyclic-graph</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path/list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">F</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">cyclic-graph</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">C</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">cyclic-graph</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path/list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">B</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">cyclic-graph</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span></td></tr><tr><td><span class="RktSym">==</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-path</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">B</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">D</span><span class="hspace">&nbsp;</span><span class="RktSym">cyclic-graph</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._....%29%29" class="RktStxLink" data-pltdoc="x">..</a></span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Ручное вычисление показывает, что после семи применений <span class="RktSym">find-path</span> и
<span class="RktSym">find-path/list</span> ISL+ должен вычислить то же самое выражение, 
с которого он начал. 
<span class="refelem"><span class="refcolumn"><span class="refcontent">
Вы знаете только одно исключение из этого правила:  <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._random%29%29" class="RktValLink" data-pltdoc="x">random</a></span>.
</span></span></span>
Поскольку один и тот же вход вызывает одинаковое вычисление для любой функции, 
<span class="RktSym">find-path</span> не завершается для этих входов. </div>

<p></p>

<p>Таким образом, <a name="(idx._fsm._(gentag._675._fsm))"></a><span style="font-weight: bold">termination argument</span>(аргумент прекращения) звучит так. Если некоторый 
заданный граф свободен от циклов, <span class="RktSym">find-path</span> производит 
некоторый вывод для любых заданных входных данных. В конце концов, каждый путь может 
содержать только конечное число узлов, и число путей тоже конечно. Таким образом, 
функция либо полностью проверяет все решения, начиная с некоторого заданного узла, 
либо находит путь от источника к узлу назначения. Однако, если граф содержит цикл, 
то есть путь от некоторого узла обратно к самому себе, <span class="RktSym">find-path</span>
может не дать результата для некоторых входных данных.</p>

<p>В следующей части представлен метод разработки программ, который решает именно 
такие проблемы. В частности, он представляет вариант <span class="RktSym">find-path</span>, 
который может работать с циклами в графе. </p>

<p><a name="(counter._fsm._(exercise._ex~3afind-path4))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;473. Протестируйте <span class="RktSym">find-path</span> на 
<span class="RktVal">'</span><span class="RktVal">B</span>,
<span class="RktVal">'</span><span class="RktVal">C</span> и графике на 
<a href="#%28counter._fsm._%28figure._fig~3acyclic-graph%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">170</span></a>. Также используйте тест-на-всех-узлах из  
<a href="#%28counter._fsm._%28exercise._ex~3afind-path2%29%29" data-pltdoc="x">упражнения&nbsp;472</a> на этом графе. <a href="#%28counter._fsm._%28exercise._ex~3afind-path4%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._fsm._(exercise._ex~3afind-path5))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;474. Переделайте программу <span class="RktSym">find-path</span> 
как единую функцию.
 <a href="#%28counter._fsm._%28exercise._ex~3afind-path5%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._fsm._(exercise._ex~3afind-path6))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;475. Перепроектируйте <span class="RktSym">find-path/list</span> 
так, чтобы он использовал существующую абстракцию списка из 
<a href="part_three.html#%28counter._%28figure._fig~3aisl-ho-list%29%29" data-pltdoc="x">рисунков&nbsp;<span class="FigureRef">95</span></a> и 
<a href="part_three.html#%28counter._%28figure._fig~3aisl-ho-list2%29%29" data-pltdoc="x"><span class="FigureRef">96</span></a> вместо явной <a name="(idx._fsm._(gentag._676._fsm))"></a>структурной рекурсии. <span style="font-weight: bold">Подсказка</span> Прочтите 
документацию по <span class="RktSym"><a href="https://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Fmap..rkt%29._ormap%29%29" class="RktValLink" data-pltdoc="x">ormap</a></span> Racket. Чем она отличается от функции 
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate.html#%28def._htdp-intermediate._%28%28lib._lang%2Fhtdp-intermediate..rkt%29._ormap%29%29" class="RktValLink" data-pltdoc="x">ormap</a></span> в ISL+?
Будет ли здесь полезно первое? 
<a href="#%28counter._fsm._%28exercise._ex~3afind-path6%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><span style="font-weight: bold">Замечание об абстракции данных</span> Вы могли заметить, 
что функции <span class="RktSym">find-path</span> не нужно знать, как определяется 
<a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a>. Пока вы предоставляете правильную функцию 
<span class="RktSym">neighbors</span> для <a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a>, <span class="RktSym">find-path</span>
работает отлично. Короче говоря, программа <span class="RktSym">find-path</span> использует
<span style="font-weight: bold">data abstraction</span>(абстракцию данных).</p>

<p>Как говорится в <a href="part_three.html" data-pltdoc="x">Абстракции</a>, абстракция данных
 работает так же, как абстракция функций. Здесь вы могли бы создать функцию 
<span class="RktSym">abstract-find-path</span>, которая потребляла бы на один параметр больше, 
чем <span class="RktSym">find-path</span>: <span class="RktSym">neighbors</span>. Если вы 
всегда передаете <span class="RktSym">abstract-find-path</span> графу 
<span class="RktSym">G</span> из <a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a> и функции сопоставления соседей
(<span class="RktSym">neighbors</span>), она будет обрабатывать граф должным образом. 
В то время как дополнительный параметр предполагает абстракцию в обычном смысле, 
требуемая связь между двумя параметрами - <span class="RktSym">G</span> и 
<span class="RktSym">neighbors</span> - на самом деле означает, что 
<span class="RktSym">abstract-find-path</span> также абстрагируется по определению 
<a href="#%28tech._fsm._graph%29" class="techoutside" data-pltdoc="x"><span class="techinside">Graph</span></a>. Поскольку последнее является определением данных, 
идея получила название абстракции данных. </p>

<p>Когда программы становятся большими, абстракция данных становится критически 
важным инструментом для построения компонентов программы. В следующем томе серии 
<span class="emph">How to Design(как разрабатывать)</span> эта идея подробно 
рассматривается; следующий раздел иллюстрирует эту идею другим примером.  
<span style="font-weight: bold">Конец</span></p>

<p><a name="(counter._fsm._(exercise._ex~3afsm-match))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;476. <a href="part_two.html#%28part._sec~3asec-fsm-list%29" data-pltdoc="x">Конечные автоматы</a>  ставят проблему, касающуюся конечных автоматов и строк, 
но сразу переходят к этой главе, потому что решение требует генеративной рекурсии. 
Теперь вы приобрели знания о разработке, необходимые для решения этой проблемы. </p>

<p>Создайте функцию <span class="RktSym">fsm-match</span>. Она потребляет 
представление данных конечного автомата и строки. Он выдает <span class="RktVal">#true</span>, 
если последовательность символов в строке вызывает переход конечного автомата из начального состояния в конечное состояние.</p>

<p></p>

<div class="SIntrapara">Поскольку эта проблема связана с проектированием генеративных 
рекурсивных функций, мы предоставляем определение основных данных и пример данных: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">transition</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">current</span><span class="hspace">&nbsp;</span><span class="RktSym">key</span><span class="hspace">&nbsp;</span><span class="RktSym">next</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fsm</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">initial</span><span class="hspace">&nbsp;</span><span class="RktSym">transitions</span><span class="hspace">&nbsp;</span><span class="RktSym">final</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">An </span><a name="(tech._fsm._fsm)"></a><span style="font-style: italic">FSM</span><span class="RktCmt"> is a structure:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-fsm</span><span class="stt"> </span><a href="#%28tech._fsm._fsm._state%29" class="techoutside" data-pltdoc="x"><span class="techinside">FSM-State</span></a><span class="stt"> </span><span class="RktPn">[</span><span class="RktSym">List-of</span><span class="stt"> </span><a href="#%28tech._fsm._1transition%29" class="techoutside" data-pltdoc="x"><span class="techinside">1Transition</span></a><span class="RktPn">]</span><span class="stt"> </span><a href="#%28tech._fsm._fsm._state%29" class="techoutside" data-pltdoc="x"><span class="techinside">FSM-State</span></a><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._fsm._1transition)"></a><span style="font-style: italic">1Transition</span><span class="RktCmt"> is a structure:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-transition</span><span class="stt"> </span><a href="#%28tech._fsm._fsm._state%29" class="techoutside" data-pltdoc="x"><span class="techinside">FSM-State</span></a><span class="stt"> </span><a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a><span class="stt"> </span><a href="#%28tech._fsm._fsm._state%29" class="techoutside" data-pltdoc="x"><span class="techinside">FSM-State</span></a><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">An </span><a name="(tech._fsm._fsm._state)"></a><span style="font-style: italic">FSM-State</span><span class="RktCmt"> is </span><a href="part_one.html#%28tech._string%29" class="techoutside" data-pltdoc="x"><span class="techinside">String</span></a><span class="RktCmt">.</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">data example: see </span><a href="part_one.html#%28counter._%28exercise._ex~3afsm%29%29" data-pltdoc="x">exercise&nbsp;109</a></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fsm-a-bc*-d</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-fsm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"AA"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-transition</span><span class="hspace">&nbsp;</span><span class="RktVal">"AA"</span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"BC"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-transition</span><span class="hspace">&nbsp;</span><span class="RktVal">"BC"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"BC"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-transition</span><span class="hspace">&nbsp;</span><span class="RktVal">"BC"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="hspace">&nbsp;</span><span class="RktVal">"BC"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-transition</span><span class="hspace">&nbsp;</span><span class="RktVal">"BC"</span><span class="hspace">&nbsp;</span><span class="RktVal">"d"</span><span class="hspace">&nbsp;</span><span class="RktVal">"DD"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"DD"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Пример данных соответствует регулярному выражению <span class="stt">a (b|c)* d</span>. 
Как упоминалось в <a href="part_one.html#%28counter._%28exercise._ex~3afsm%29%29" data-pltdoc="x">упражнении&nbsp;109</a>, <span class="RktVal">"acbd"</span>, 
<span class="RktVal">"ad"</span> и <span class="RktVal">"abcd"</span> являются примерами
приемлемых строк; <span class="RktVal">"da"</span>, <span class="RktVal">"aa"</span> или
<span class="RktVal">"d"</span> не совпадают.
</div>

<p></p>

<p></p>

<div class="SIntrapara">В этом контексте вы разрабатываете следующую функцию:  
<a name="(idx._fsm._(gentag._677._fsm))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._fsm._fsm%29" class="techoutside" data-pltdoc="x"><span class="techinside">FSM</span></a><span class="RktCmt"> </span><a href="part_one.html#%28tech._string%29" class="techoutside" data-pltdoc="x"><span class="techinside">String</span></a><span class="RktCmt"> -&gt; </span><a href="part_one.html#%28tech._boolean%29" class="techoutside" data-pltdoc="x"><span class="techinside">Boolean</span></a><span class="RktCmt"> </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">does </span><span class="RktSym">an-fsm</span><span class="RktCmt"> recognize the given string</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fsm-match?</span><span class="hspace">&nbsp;</span><span class="RktSym">an-fsm</span><span class="hspace">&nbsp;</span><span class="RktSym">a-string</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">#false</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
<span style="font-weight: bold">Подсказка</span>  Разработайте необходимую вспомогательную
функцию локально для <span class="RktSym">fsm-match?</span> функция. В этом контексте 
представьте проблему как пару параметров: текущее состояние конечного автомата и 
оставшийся список <a href="part_one.html#%28tech._1string%29" class="techoutside" data-pltdoc="x"><span class="techinside">1String</span></a>s. 
<a href="#%28counter._fsm._%28exercise._ex~3afsm-match%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(idx._fsm._(gentag._678._fsm))"></a>
<a name="(idx._fsm._(gentag._679._fsm))"></a>
<a name="(idx._fsm._(gentag._680._fsm))"></a>
</div><div class="SIntrapara"><blockquote class="Figure"><a name="(counter._fsm._(figure._fig~3apermutation-gen))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> X] -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> X]]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">creates a list of all rearrangements of the items in w</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arrangements</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._empty~3f%29%29" class="RktValLink" data-pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._else%29%29" class="RktStxLink" data-pltdoc="x">else</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29" class="RktValLink" data-pltdoc="x">foldr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">item</span><span class="hspace">&nbsp;</span><span class="RktSym">others</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._local%29%29" class="RktStxLink" data-pltdoc="x">local</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">without-item</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arrangements</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._remove%29%29" class="RktValLink" data-pltdoc="x">remove</a></span><span class="hspace">&nbsp;</span><span class="RktSym">item</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">add-item-to-front</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29" class="RktValLink" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._cons%29%29" class="RktValLink" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktSym">item</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">without-item</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._append%29%29" class="RktValLink" data-pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="RktSym">add-item-to-front</span><span class="hspace">&nbsp;</span><span class="RktSym">others</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">all-words-from-rat?</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member%29%29" class="RktValLink" data-pltdoc="x">member</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29" class="RktValLink" data-pltdoc="x">explode</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"rat"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member%29%29" class="RktValLink" data-pltdoc="x">member</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29" class="RktValLink" data-pltdoc="x">explode</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"art"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._member%29%29" class="RktValLink" data-pltdoc="x">member</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._explode%29%29" class="RktValLink" data-pltdoc="x">explode</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"tar"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29" class="RktStxLink" data-pltdoc="x">check-satisfied</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arrangements</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"r"</span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"t"</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">all-words-from-rat?</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;171: </span>Определение <span class="RktSym">arrangements</span> с использованием генеративной рекурсии</span></p>

</blockquote></div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(counter._fsm._(exercise._ex~3apermutation-gen))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;477. Изучите определение функций 
<span class="RktSym">arrangements</span> на 
<a href="#%28counter._fsm._%28figure._fig~3apermutation-gen%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">171</span></a>. На рисунке показано 
генеративно-рекурсивное решение расширенной проблемы проектирования, охватываемой 
<a href="part_two.html#%28part._sec~3apermute%29" data-pltdoc="x">Word Games, the Heart of the Problem</a>, суть проблемы, а именно:
<span class="refelem"><span class="refcolumn"><span class="refcontent">
мы благодарим Марка Энгельберга за предложение этого упражнения.
</span></span></span>
</div><div class="SIntrapara"><blockquote>

<p> учитывая слово, создайте все возможные перестановки букв. </p>

</blockquote></div><div class="SIntrapara">Расширенное упражнение представляет 
собой прямое руководство по <a name="(idx._fsm._(gentag._681._fsm))"></a>
структурно-рекурсивному проектированию основной функции и двух вспомогательных 
функций, где проектирование последних требует создания еще двух вспомогательных функций. 
Напротив, <a href="#%28counter._fsm._%28figure._fig~3apermutation-gen%29%29" data-pltdoc="x">рисунок&nbsp;<span class="FigureRef">171</span></a> использует возможности 
генеративной рекурсии - плюс <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._foldr%29%29" class="RktValLink" data-pltdoc="x">foldr</a></span> и 
<span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._map%29%29" class="RktValLink" data-pltdoc="x">map</a></span> - для 
определения одной и той же программы в качестве определения одной функции.</div>

<p></p>

<p>Объясните устройство генеративно-рекурсивной версии <span class="RktSym">arrangements</span>.
Ответьте на все вопросы, которые задает дизайн-рецепт генеративной рекурсии, включая 
вопрос о завершении.
</p>

<p>Создают ли <span class="RktSym">arrangements</span> на 
<a href="#%28counter._fsm._%28figure._fig~3apermutation-gen%29%29" data-pltdoc="x">рис.&nbsp;<span class="FigureRef">171</span></a> те же списки, что и решение 
<a href="part_two.html#%28part._sec~3apermute%29" data-pltdoc="x">Игры в слова, суть проблемы</a>?
<a href="#%28counter._fsm._%28exercise._ex~3apermutation-gen%29%29" class="ex-end" data-pltdoc="x"></a></p>

<blockquote class="Figure"><a name="(counter._fsm._(figure._fig~3aqueens))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered">

<p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_230.png" alt="image" width="252.0" height="252.0"></p>

</blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;172: </span> Шахматная доска с единственным ферзем и позиции, которые она угрожает</span></p>

</blockquote><h4>29.2<tt>&nbsp;</tt><a name="(part._sec~3aproj-backtrack)"></a>Проект: Backtracking(перебор с возвратами)</h4>

<p>Головоломка с <span style="font-style: italic">n</span> ферзями - известная задача 
из мира шахмат, которая также естественным образом иллюстрирует применимость 
backtracking(перебора с возвратами). Для наших целей шахматная доска представляет собой 
сетку из <span style="font-style: italic">n</span> на <span style="font-style: italic">n</span>
квадратов. Ферзь(queen) - это игровая фигура, которая может перемещаться произвольно далеко 
в горизонтальном, вертикальном 
<span class="refelem"><span class="refcolumn"><span class="refcontent">Мы благодарим 
Марка Энгельберга за переформулировку этого раздела. </span></span></span>
или диагональном направлении, не «перепрыгивая» через другую фигуру. Мы говорим, что ферзь
<span style="font-style: italic">threatens</span>(угрожает) квадрату, если он находится 
на нем или может перейти на него. <a href="#%28counter._fsm._%28figure._fig~3aqueens%29%29" data-pltdoc="x">Рисунок&nbsp;<span class="FigureRef">172</span></a> иллюстрирует это понятие
графическим образом. Ферзь находится во втором столбце и шестом ряду. Сплошные линии, 
исходящие от ферзя, проходят через все поля, которым угрожает ферзь.</p>

<p>Классическая задача о ферзях состоит в том, чтобы разместить <span style="font-style: italic"></span>8<span style="font-style: italic"></span> ферзей на шахматной доске 
<span style="font-style: italic"></span>8<span style="font-style: italic"></span> на 
<span style="font-style: italic"></span>8<span style="font-style: italic"></span> так, чтобы 
ферзи на доске не угрожали друг другу. Ученые-компьютерщики обобщают проблему и спрашивают, 
можно ли поставить <span style="font-style: italic">n</span> ферзей на шахматную доску 
<span style="font-style: italic">n</span> x <span style="font-style: italic">n</span> так, 
чтобы ферзи не представляли угрозы друг для друга.
</p>

<p>Очевидно, что при <span style="font-style: italic">n = </span>2<span style="font-style: italic"></span> полная головоломка не имеет решения. Ферзь, размещенный на любом из 
четырех квадратов, угрожает всем оставшимся квадратам. </p>

<blockquote class="Herefigure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><blockquote class="SCentered">

<p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_231.png" alt="image" width="99.5" height="99.5">
<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_232.png" alt="image" width="99.5" height="99.5">
<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_233.png" alt="image" width="99.5" height="99.5"></p>

</blockquote></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3aqueens-non-solutions))" x-target-lift="Figure"></a>Рисунок&nbsp;173: </span>Три конфигурации ферзя для шахматной доски 3 на 3</span></p>

</blockquote>

<p>Также нет решения для <span style="font-style: italic">n = </span>3<span style="font-style: italic"></span>. На <a href="#%28counter._%28figure._fig~3aqueens-non-solutions%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">173</span></a> представлены все различные
расстановки двух ферзей, то есть решения для <span style="font-style: italic">k = </span>3<span style="font-style: italic"></span> и <span style="font-style: italic">n = </span>2<span style="font-style: italic"></span>. В каждом случае левый ферзь занимает квадрат в левом столбце, 
а второй ферзь размещается в одном из двух квадратов, которому не угрожает первое. 
Размещение второго ферзя угрожает всем оставшимся незанятым клеткам, а это означает, что разместить третьего ферзя невозможно. </p>

<p><a name="(counter._(exercise._ex~3a3queens))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;478. Вы также можете разместить первого ферзя во всех квадратах самого 
верхнего ряда, самого правого столбца и самого нижнего ряда. Объясните, почему все 
эти решения аналогичны трем сценариям, изображенным на  
<a href="#%28counter._%28figure._fig~3aqueens-non-solutions%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">173</span></a>.</p>

<p>Остается центральный квадрат. Возможно ли разместить даже второго ферзя после того, 
как вы поместили его на центральное поле доски <span style="font-style: italic"></span>3<span style="font-style: italic"></span> на <span style="font-style: italic"></span>3<span style="font-style: italic"></span>? 
<a href="#%28counter._%28exercise._ex~3a3queens%29%29" class="ex-end" data-pltdoc="x"></a></p>

<blockquote class="Figure"><a name="(counter._(figure._fig~3aqueens-solutions))" x-target-lift="Figure"></a><blockquote class="Centerfigure"><blockquote class="FigureInside"><table cellspacing="0" cellpadding="0"><tbody><tr><td valign="top">

<p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_234.png" alt="image" width="128.0" height="128.0"></p>

</td><td valign="top">

<p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

</td><td valign="top">

<p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_235.png" alt="image" width="160.5" height="160.5"></p>

</td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget">Рисунок&nbsp;174: </span>Решения головоломки 
<span style="font-style: italic">n</span> ферзей для досок 4 на 4 и 5 на 5</span></p>

</blockquote>

<p>На <a href="#%28counter._%28figure._fig~3aqueens-solutions%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">174</span></a> показаны два решения загадки
<span style="font-style: italic">n</span> ферзей: левое - для <span style="font-style: italic">n = </span>4<span style="font-style: italic"></span>, правое - для <span style="font-style: italic">n</span><span style="font-style: italic"> </span><span style="font-style: italic">= 
</span>5<span style="font-style: italic"></span>. На рисунке показано, как в каждом случае 
решение имеет по одному ферзю в каждой строке и столбце, что имеет смысл, потому что ферзь 
угрожает всему ряду и столбцу, исходящим из его квадрата.</p>

<p>Теперь, когда мы провели достаточно подробный анализ, можно переходить к этапу решения. 
Анализ предлагает несколько идей: </p>

<p></p>

<div class="SIntrapara"><ol><li>

<p>Проблема заключается в размещении одной ферзя за раз. Когда мы помещаем ферзя на доску, 
мы можем пометить соответствующие строки, столбцы и диагонали как непригодные для 
использования другими ферзями.</p>

</li><li>

<p>Для другого ферзя мы рассматриваем только те места, которые не находятся под угрозой.
</p>

</li><li>

<p>На тот случай, если этот первый выбор места приведет к проблемам позже, 
мы запоминаем, какие другие поля подходят для размещения этого ферзя. </p>

</li><li>

<p>Если мы должны поставить ферзя на доску, но не осталось безопасных клеток, 
мы возвращаемся(backtrack) к предыдущему моменту в процессе, когда мы выбирали 
одно поле вместо другого, и пробуем один из оставшихся квадратов.
</p>

</li></ol></div><div class="SIntrapara">Короче говоря, этот процесс решения похож на алгоритм “find a path”(найти путь).</div>

<p></p>

<p></p>

<div class="SIntrapara">Переход от описания процесса к разработанному алгоритму явно 
требует двух представлений данных: одного для шахматных досок и одного для позиций на доске.
Начнем с последнего: 
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">QUEENS</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._qp)"></a><span style="font-style: italic">QP</span><span class="RktCmt"> is a structure:</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="stt"> </span><a href="#%28tech._ci%29" class="techoutside" data-pltdoc="x"><span class="techinside">CI</span></a><span class="stt"> </span><a href="#%28tech._ci%29" class="techoutside" data-pltdoc="x"><span class="techinside">CI</span></a><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A </span><a name="(tech._ci)"></a><span style="font-style: italic">CI</span><span class="RktCmt"> is an </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> in [</span><span class="RktVal">0</span><span class="RktCmt">,</span><span class="RktSym">QUEENS</span><span class="RktCmt">).</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span style="font-weight: bold">interpretation</span><span class="RktCmt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="stt"> </span><span class="RktSym">r</span><span class="stt"> </span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktCmt"> denotes the square at </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">the </span><span class="RktSym">r</span><span class="RktCmt">-th row and </span><span class="RktSym">c</span><span class="RktCmt">-th column</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Ведь шахматная доска в основном диктует выбор.</div>

<p></p>

<p>В определении <a href="#%28tech._ci%29" class="techoutside" data-pltdoc="x"><span class="techinside">CI</span></a> можно было бы использовать 
[<span class="RktVal">1</span>,<span class="RktSym">QUEENS</span>] вместо 
[<span class="RktVal">0</span>, <span class="RktSym">QUEENS</span>), но эти два определения 
в основном эквивалентны, и программисты делают отсчет от <span class="RktVal">0</span>. 
Точно так же так называемая алгебраическая запись для шахматных позиций использует буквы от 
<span class="RktVal">'</span><span class="RktVal">a</span> до 
<span class="RktVal">'</span><span class="RktVal">h</span> для обозначения одного из 
размеров доски, что означает, что <a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a> могла бы использовать 
<a href="#%28tech._ci%29" class="techoutside" data-pltdoc="x"><span class="techinside">CI</span></a> и подобные буквы. Опять же, эти два примерно эквивалентны, и с натуральными числами в ISL+
легче создать много позиций, чем с буквами. </p>

<p><a name="(counter._(exercise._ex~3aqueens-threatened))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;479. Создайте функцию <span class="RktSym">threatening?</span>. 
Она потребляет два <a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a> и определяет, будут ли ферзи, размещенные на двух 
соответствующих полях, угрожать друг другу.</p>

<p><span style="font-weight: bold">Знание предметной области</span> (1) Изучите  
<a href="#%28counter._fsm._%28figure._fig~3aqueens%29%29" data-pltdoc="x">рисунок&nbsp;<span class="FigureRef">172</span></a>. Ферзь на этом рисунке угрожает всем квадратам на 
горизонтальной, вертикальной и диагональной линиях. И наоборот, ферзь на любом поле этих 
линий угрожает ферзю.</p>

<p>(2)  Преобразуйте свои мысли в математические условия, которые связывают 
координаты клеток друг с другом. Например, все клетки по горизонтали имеют одинаковую 
координату y. Точно так же все клетки на одной диагонали имеют координаты, суммы которых 
одинаковы. Какая это диагональ? Для другой диагонали разница между двумя координатами 
остается неизменной. Какую диагональ описывает эта идея? </p>

<p><span style="font-weight: bold">Подсказка</span> После того, как вы определились со 
знаниями предметной области, сформулируйте набор <a name="(idx._(gentag._682))"></a>тестов,
охватывающий горизонтали, вертикали и диагонали. Не забудьте указать аргументы в пользу какой <span class="RktSym">threatening?</span>(угроза) должен выдавать <span class="RktVal">#false</span>.
<a href="#%28counter._%28exercise._ex~3aqueens-threatened%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p><a name="(counter._(exercise._ex~3aqueen-render))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;480. Разработайте <span class="RktSym">render-queens</span>. 
Функция использует натуральное число <span class="RktSym">n</span>, список 
<a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a> и <a href="part_one.html#%28tech._image%29" class="techoutside" data-pltdoc="x"><span class="techinside">Image</span></a>. Она создает изображение шахматной доски 
<span class="RktSym">n</span> на <span class="RktSym">n</span> с данным изображением, 
размещенным в соответствии с заданными <a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a>.
 <a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a>s.</p>

<p>Вы можете найти изображение шахматной королевы в Интернете или создать упрощенное 
изображение с помощью доступных функций изображения.  
<a href="#%28counter._%28exercise._ex~3aqueen-render%29%29" class="ex-end" data-pltdoc="x"></a></p>

<p></p>

<div class="SIntrapara">Что касается представления данных для досок
(<a name="(tech._board)"></a><span style="font-style: italic">Board</span>), мы 
откладываем этот шаг до тех пор, пока не узнаем, как алгоритм реализует процесс. 
Это еще одно упражнение в абстракции данных. В самом деле, определение данных для 
<a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a> даже не требуется, чтобы указывать сигнатуру для самого алгоритма: 
<a name="(idx._(gentag._683))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._maybe%29" class="techoutside" data-pltdoc="x"><span class="techinside">Maybe</span></a><span class="RktCmt"> [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a><span class="RktCmt">]]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds a solution to the </span><span class="RktSym">n</span><span class="RktCmt"> queens problem </span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">data example: [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">4QUEEN-SOLUTION-2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n-queens</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">#false</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Полная головоломка состоит в том, чтобы найти место для <span style="font-style: italic">n</span>
ферзей на шахматной доске <span style="font-style: italic">n</span> на 
<span style="font-style: italic">n</span>. Итак, ясно, что алгоритм не использует ничего, 
кроме натурального числа, и дает представление для размещений 
<span style="font-style: italic">n</span> ферзей - если решение существует. Последнее может 
быть представлен списком <a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a>(queen placement), поэтому мы выбираем 
</div><div class="SIntrapara"><blockquote class="SCodeFlow">

<p><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a><span class="RktCmt">] or </span><span class="RktVal">#false</span></p>

</blockquote></div><div class="SIntrapara">как результат. Естественно, 
<span class="RktVal">#false</span> означает  неспособность найти решение.</div>

<p></p>

<p></p>

<div class="SIntrapara">Следующий шаг - разработать примеры и сформулировать их в виде тестов. 
Мы знаем, что <span class="RktSym">n-ферзей</span> должны потерпеть неудачу, если даны 
<span class="RktVal">2</span> или <span class="RktVal">3</span>. Для <span class="RktVal">4</span>
есть два решения с реальными досками и четыре идентичных ферзя. На 
<a href="#%28counter._%28figure._fig~3aqueens-solutions%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">174</span></a> один из них показан слева, а другой - вот такой: 
</div><div class="SIntrapara"><blockquote class="SCentered">

<p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="part_five_files/pict_236.png" alt="image" width="130.0" height="130.0"></p>

</blockquote></div><div class="SIntrapara">Однако с точки зрения представления данных 
существует много разных способов представления этих двух изображений. На  
<a href="#%28counter._%28figure._fig~3asolutions-for-4%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">175</span></a> показаны некоторые наброски. Заполните остальное. 
</div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(idx._(gentag._684))"></a>
</div><div class="SIntrapara"><blockquote class="Herefigure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._maybe%29" class="techoutside" data-pltdoc="x"><span class="techinside">Maybe</span></a><span class="RktCmt"> [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a><span class="RktCmt">]]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds a solution to the </span><span class="RktSym">n</span><span class="RktCmt"> queens problem </span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">0-1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">1-3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">2-0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">3-2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._make-posn%29%29" class="RktValLink" data-pltdoc="x">make-posn</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-member-of%29%29" class="RktStxLink" data-pltdoc="x">check-member-of</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n-queens</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">0-1</span><span class="hspace">&nbsp;</span><span class="RktSym">1-3</span><span class="hspace">&nbsp;</span><span class="RktSym">2-0</span><span class="hspace">&nbsp;</span><span class="RktSym">3-2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">0-1</span><span class="hspace">&nbsp;</span><span class="RktSym">1-3</span><span class="hspace">&nbsp;</span><span class="RktSym">3-2</span><span class="hspace">&nbsp;</span><span class="RktSym">2-0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">0-1</span><span class="hspace">&nbsp;</span><span class="RktSym">2-0</span><span class="hspace">&nbsp;</span><span class="RktSym">1-3</span><span class="hspace">&nbsp;</span><span class="RktSym">3-2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">0-1</span><span class="hspace">&nbsp;</span><span class="RktSym">2-0</span><span class="hspace">&nbsp;</span><span class="RktSym">3-2</span><span class="hspace">&nbsp;</span><span class="RktSym">1-3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">0-1</span><span class="hspace">&nbsp;</span><span class="RktSym">3-2</span><span class="hspace">&nbsp;</span><span class="RktSym">1-3</span><span class="hspace">&nbsp;</span><span class="RktSym">2-0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">0-1</span><span class="hspace">&nbsp;</span><span class="RktSym">3-2</span><span class="hspace">&nbsp;</span><span class="RktSym">2-0</span><span class="hspace">&nbsp;</span><span class="RktSym">1-3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28def._htdp-intermediate-lambda._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">3-2</span><span class="hspace">&nbsp;</span><span class="RktSym">2-0</span><span class="hspace">&nbsp;</span><span class="RktSym">1-3</span><span class="hspace">&nbsp;</span><span class="RktSym">0-1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n-queens</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-queens</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">board0</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3asolutions-for-4))" x-target-lift="Figure"></a>Рисунок&nbsp;175: </span>Решения головоломки 4 королевы</span></p>

</blockquote></div>

<p></p>

<p><a name="(counter._(exercise._ex~3aqueen-property-testing))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;481. Тесты на <a href="#%28counter._%28figure._fig~3asolutions-for-4%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">175</span></a> ужасны. 
Ни один настоящий программист никогда не объясняет все эти возможные результаты.</p>

<p></p>

<div class="SIntrapara">Одно из решений - снова использовать тестирование свойств. 
Разработать функцию <span class="RktSym">n-queens-solution?</span>, которая потребляет 
натуральное число <span class="RktSym">n</span> и создает предикат для размещения ферзя, 
который определяет, является ли данное размещение решением головоломки 
<span class="RktSym">n</span> ферзей: 
</div><div class="SIntrapara"><ul><li>

<p>Решение головоломки с <span class="RktSym">n</span> ферзями должно иметь длину 
<span class="RktSym">n</span><span class="RktMeta"></span>.</p>

</li><li>

<p><a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a> в таком списке не может угрожать другому, отличному <a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a>.</p>

</li></ul></div><div class="SIntrapara">После того, как вы проверили этот предикат, 
используйте его и <span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._check-satisfied%29%29" class="RktStxLink" data-pltdoc="x">check-satisfied</a></span>, чтобы
сформулировать тесты для <span class="RktSym">n-ферзей</span>.   
<a name="(idx._(gentag._685))"></a></div>

<p></p>

<p></p>

<div class="SIntrapara">Альтернативным решением является понимание списков 
<a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a> как наборов(множеств). Если два списка содержат одинаковые <a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a> в разном порядке, 
они эквивалентны, как показано на рисунке. Следовательно, вы можете сформулировать тест на 
<span class="RktSym">n-ферзей</span> как   
<a name="(idx._(gentag._686))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">[</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a><span class="RktCmt">] -&gt; </span><a href="part_one.html#%28tech._boolean%29" class="techoutside" data-pltdoc="x"><span class="techinside">Boolean</span></a></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">is the result equal [as a set] to one of two lists</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">is-queens-result?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._or%29%29" class="RktStxLink" data-pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set=?</span><span class="hspace">&nbsp;</span><span class="RktSym">4QUEEN-SOLUTION-1</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">set=?</span><span class="hspace">&nbsp;</span><span class="RktSym">4QUEEN-SOLUTION-2</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Разработайте функцию <span class="RktSym">set=?</span>. Она использует два списка и определяет,
содержат ли они одни и те же элементы, независимо от порядка.
<a href="#%28counter._%28exercise._ex~3aqueen-property-testing%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3aqueens-solve))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;482. Ключевая идея состоит в том, чтобы разработать 
функцию, которая размещает <span style="font-style: italic">n</span> ферзей на шахматной доске,
которая может уже содержать несколько ферзей:  
<a name="(idx._(gentag._687))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a><span class="RktCmt"> </span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._maybe%29" class="techoutside" data-pltdoc="x"><span class="techinside">Maybe</span></a><span class="RktCmt"> [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a><span class="RktCmt">]]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">places </span><span class="RktSym">n</span><span class="RktCmt"> queens on board; otherwise, returns </span><span class="RktVal">#false</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-queens</span><span class="hspace">&nbsp;</span><span class="RktSym">a-board</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">#false</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
<a href="#%28counter._%28figure._fig~3asolutions-for-4%29%29" data-pltdoc="x">Рисунок&nbsp;<span class="FigureRef">175</span></a> уже ссылается на эту функцию в определении 
<span class="RktSym">n-ферзей</span>.</div>

<p></p>

<p></p>

<div class="SIntrapara">Разработайте алгоритм <span class="RktSym">place-queens</span>
(размещения королев). Предположим, у вас есть следующие функции для работы с 
<a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a>(досками): <a name="(idx._(gentag._688))"></a> <a name="(idx._(gentag._689))"></a><a name="(idx._(gentag._690))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table class="RktBlk" cellspacing="0" cellpadding="0"><tbody><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="part_two.html#%28tech._n%29" class="techoutside" data-pltdoc="x"><span class="techinside">N</span></a><span class="RktCmt"> -&gt; </span><a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a><span class="RktCmt"> </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">creates the initial </span><span class="RktSym">n</span><span class="RktCmt"> by </span><span class="RktSym">n</span><span class="RktCmt"> board</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">board0</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a><span class="RktCmt"> </span><a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a><span class="RktCmt"> -&gt; </span><a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a><span class="RktCmt"> </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">places a queen at </span><span class="RktSym">qp</span><span class="RktCmt"> on </span><span class="RktSym">a-board</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add-queen</span><span class="hspace">&nbsp;</span><span class="RktSym">a-board</span><span class="hspace">&nbsp;</span><span class="RktSym">qp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">a-board</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a><span class="RktCmt"> -&gt; [</span><a href="part_three.html#%28tech._sim-dd._list._of%29" class="techoutside" data-pltdoc="x"><span class="techinside">List-of</span></a><span class="RktCmt"> </span><a href="#%28tech._qp%29" class="techoutside" data-pltdoc="x"><span class="techinside">QP</span></a><span class="RktCmt">]</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">finds spots where it is still safe to place a queen</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://docs.racket-lang.org/htdp-langs/intermediate-lam.html#%28form._%28%28lib._lang%2Fhtdp-intermediate-lambda..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-open-spots</span><span class="hspace">&nbsp;</span><span class="RktSym">a-board</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr></tbody></table></blockquote></div><div class="SIntrapara">
Первая функция используется на <a href="#%28counter._%28figure._fig~3asolutions-for-4%29%29" data-pltdoc="x">рисунке&nbsp;<span class="FigureRef">175</span></a>, чтобы создать начальное
представление доски для ферзей места. Два других вам понадобятся, чтобы описать 
генеративные шаги алгоритма. 
<a href="#%28counter._%28exercise._ex~3aqueens-solve%29%29" class="ex-end" data-pltdoc="x"></a></div>

<p></p>

<p>Вы пока не можете подтвердить, что ваше решение предыдущего упражнения работает, 
потому что оно основано на обширном списке пожеланий. Оно требует представления данных 
<a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a>(досок), которое поддерживает три функции из списка пожеланий. Это ваша 
оставшаяся проблема. </p>

<p></p>

<div class="SIntrapara"><a name="(counter._(exercise._ex~3aqueens-board))"></a><span style="font-weight: bold">Упражнение</span>&nbsp;483. Разработайте определение данных для 
<a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a> и спроектируйте три функции, указанные в <a href="#%28counter._%28exercise._ex~3aqueens-solve%29%29" data-pltdoc="x">упражнении&nbsp;482</a>. Рассмотрите следующие идеи:
</div><div class="SIntrapara"><ul><li>

<p><a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a> собирает(хранит) те позиции, где еще можно разместить ферзя;</p>

</li><li>

<p><a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a> содержит список позиций, на которых был размещен ферзь</p>

</li><li>

<p><a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a> представляет собой сетку из  <span class="RktSym">n</span> на 
<span class="RktSym">n</span> клеток, каждая из которых может быть занята ферзем. 
Используйте структуру с тремя полями для представления клеток: одно для 
<span class="RktSym">x</span>, одно для <span class="RktSym">y</span> и третье, 
указывающее, находится ли клетка под угрозой.</p>

</li></ul></div><div class="SIntrapara">Используйте одну из приведенных выше идей 
для решения этого упражнения.</div>

<p></p>

<p><span style="font-weight: bold">Задача</span> Используйте все три идеи, чтобы придумать 
три различных представления данных <a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a>. Абстрагируйте свое решение к 
<a href="#%28counter._%28exercise._ex~3aqueens-solve%29%29" data-pltdoc="x">упражнению&nbsp;482</a> и убедитесь, что оно работает с любым из ваших представлений данных <a href="#%28tech._board%29" class="techoutside" data-pltdoc="x"><span class="techinside">Board</span></a>. 
<a href="#%28counter._%28exercise._ex~3aqueens-board%29%29" class="ex-end" data-pltdoc="x"></a></p>

<h3>30<tt>&nbsp;</tt><a name="(part._ch~3asummary5)"></a>Резюме</h3>

<p>Эта пятая часть книги знакомит с идеей <span style="font-style: italic">эврики!</span> 
в разработке программы. В отличие от <a name="(idx._(gentag._691))"></a>структурной
разработки первых четырех частей, <span style="font-style: italic">эврика!</span> 
разработки начинается с представления о том, как программа должна решать проблему или 
обрабатывать данные, которые представляют проблему. Проектировать здесь означает придумать 
умный способ вызова рекурсивной функции для нового типа проблемы, которая похожа на данную, 
но проще. </p>

<p>Имейте в виду, что, хотя мы назвали это <a name="(idx._(gentag._692))"></a><span style="font-weight: bold">generative recursion(генеративной/порождающей рекурсией)</span>, большинство
 компьютерных ученых называют эти функции <span style="font-weight: bold">algorithms</span>(алгоритмами).
.</p>

<p></p>

<div class="SIntrapara">Завершив эту часть книги, вы поймете следующее о разработке 
генеративной рекурсии:
</div><div class="SIntrapara"><ol><li>

<p>Стандартные наброски рецепта проектирования/разработки остается в силе.</p>

</li><li>

<p>Основное изменение касается этапа кодирования. Он вводит четыре новых вопроса 
о переходе от полностью универсального шаблона для генеративной рекурсии к 
полной функции. С двумя из этих вопросов вы прорабатываете «тривиальные» части 
процесса решения; а с двумя другими вы разрабатываете этап генеративного решения.</p>

</li><li>

<p>Незначительное изменение касается поведения <a name="(idx._(gentag._693))"></a>завершения
(termination) порождающих рекурсивных функций. В отличие от структурно разработанных функций,
алгоритмы могут не завершаться для некоторых входных данных. Эта проблема может быть связана 
с внутренними ограничениями идеи или ее воплощения в коде. Тем не менее, будущий читатель 
вашей программы заслуживает предупреждения о потенциально «плохих» входах. </p>

</li></ol></div>

<p></p>

<p>Вы столкнетесь с некоторыми простыми или хорошо известными алгоритмами в 
своих реальных задачах программирования, и ожидается, что вы с ними справитесь. 
Для создания действительно умных алгоритмов компании-разработчики программного 
обеспечения нанимают высокооплачиваемых специалистов, экспертов в предметной 
области и математиков для разработки концептуальных деталей, прежде чем они 
попросят программистов превратить концепции в программы. Вы также должны быть 
готовы к такого рода задачам, и лучшая подготовка - это практика. </p>

<div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="i4-5.html" title="backward to &quot;Intermezzo 4: The Nature of Numbers&quot;" data-pltdoc="x">← prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;How to Design Programs, Second Edition&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="i5-6.html" title="forward to &quot;Intermezzo 5: The Cost of Computation&quot;" data-pltdoc="x">next →</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>